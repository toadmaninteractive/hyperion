!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{N1IV:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e[e.Before=-1]="Before",e[e.Into=0]="Into",e[e.After=1]="After",e[e.Root=2]="Root",e[e.Null=null]="Null",e}({})},QyQT:function(t,r,d){"use strict";d.d(r,"a",function(){return L});var l=d("fXoL"),s=d("UTw3"),c=d("Y4+Y"),u=d("N1IV"),p=d("2Vo4"),f=d("pLZG"),h=d("/uUt"),g=d("ofXK"),m=d("bSwM"),v=["addButtonTemplate"],y=["addParaButtonTemplate"],x=["nodeTitleTemplate"];function N(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",7),l["\u0275\u0275text"](1," Node template not defined\n"),l["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",8),l["\u0275\u0275listener"]("dragover",function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().onDragOverRoot(e)})("drop",function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().onDropToRoot(e)})("dragleave",function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().onDragLeaveRoot()}),l["\u0275\u0275elementStart"](1,"div",9),l["\u0275\u0275text"](2," Drop to root "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275classProp"]("drop-parent-select",r.dragOverRoot)}}var C=function(e){return{node:e}};function E(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"li",13),l["\u0275\u0275elementContainer"](1,14),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275nextContext"](2);var r=l["\u0275\u0275reference"](6),o=l["\u0275\u0275reference"](4);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",n.value.children.length?r:o)("ngTemplateOutletContext",l["\u0275\u0275pureFunction1"](2,C,n.value))}}function D(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,E,2,4,"li",12),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!r.hiddenNodeSet.has(n.value.item.id))}}function w(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ul",10),l["\u0275\u0275template"](1,D,2,1,"ng-container",11),l["\u0275\u0275pipe"](2,"keyvalue"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind1"](2,1,n.nodes))}}function S(e,t){if(1&e&&l["\u0275\u0275elementContainer"](0,14),2&e){var n=t.node;l["\u0275\u0275nextContext"]();var r=l["\u0275\u0275reference"](8);l["\u0275\u0275property"]("ngTemplateOutlet",r)("ngTemplateOutletContext",l["\u0275\u0275pureFunction1"](2,C,n))}}function T(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"li",13),l["\u0275\u0275elementContainer"](1,14),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275nextContext"](3);var r=l["\u0275\u0275reference"](6),o=l["\u0275\u0275reference"](4);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",n.children.length?r:o)("ngTemplateOutletContext",l["\u0275\u0275pureFunction1"](2,C,n))}}function k(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,T,2,4,"li",12),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,r=l["\u0275\u0275nextContext"](3);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!r.hiddenNodeSet.has(n.item.id))}}function O(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"ul",10),l["\u0275\u0275template"](2,k,2,1,"ng-container",11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().node;l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",n.children)}}function I(e,t){if(1&e&&(l["\u0275\u0275elementContainer"](0,14),l["\u0275\u0275template"](1,O,3,1,"ng-container",15)),2&e){var n=t.node;l["\u0275\u0275nextContext"]();var r=l["\u0275\u0275reference"](8);l["\u0275\u0275property"]("ngTemplateOutlet",r)("ngTemplateOutletContext",l["\u0275\u0275pureFunction1"](3,C,n)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.expanded)}}function F(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"i",21),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().node;return e.expanded=!e.expanded}),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().node;l["\u0275\u0275classProp"]("la-angle-right",!r.expanded)("la-angle-down",r.expanded)}}function R(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"mat-checkbox",22),l["\u0275\u0275listener"]("change",function(e){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"]().node;return l["\u0275\u0275nextContext"]().onCheckNode(t,e.checked)}),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().node,o=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("indeterminate",o.indeterminateNodeSet.has(r.item.id))("checked",o.checkedNodeSet.has(r.item.id))("disabled",r.item.isDraft)}}function _(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"i",23),l["\u0275\u0275listener"]("mousedown",function(e){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"]().node;return l["\u0275\u0275nextContext"]().setDraggedNode(e,t)})("mouseup",function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).unsetDraggedNode()}),l["\u0275\u0275elementEnd"]()}}function P(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"i",24),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().node;return l["\u0275\u0275nextContext"]().onRemoveNode(e)}),l["\u0275\u0275elementEnd"]()}}function A(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",16),l["\u0275\u0275listener"]("dragover",function(e){l["\u0275\u0275restoreView"](n);var r=t.node;return l["\u0275\u0275nextContext"]().onDragOver(e,r)})("dragend",function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().onDragEnd(e)})("drop",function(e){l["\u0275\u0275restoreView"](n);var r=t.node;return l["\u0275\u0275nextContext"]().onDrop(e,r)})("dragstart",function(e){l["\u0275\u0275restoreView"](n);var r=t.node;return l["\u0275\u0275nextContext"]().onDragStart(e,r)}),l["\u0275\u0275template"](1,F,1,4,"i",17),l["\u0275\u0275template"](2,R,1,3,"mat-checkbox",18),l["\u0275\u0275template"](3,_,1,0,"i",19),l["\u0275\u0275elementContainer"](4,14),l["\u0275\u0275elementContainer"](5,14),l["\u0275\u0275template"](6,P,1,0,"i",20),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.node,o=l["\u0275\u0275nextContext"](),i=l["\u0275\u0275reference"](10);l["\u0275\u0275classProp"]("dimmed",o.dimmedNodeSet.has(r.item.id))("more",o.dimmedNodeSet.has(r.item.id))("drag-start",r===o.draggedNode)("drop-center",r===o.hoveredNode&&0===o.draggedNodeHoveredType&&r!==o.draggedNode&&o.canDropInto(o.draggedNode,o.hoveredNode))("drop-before",r===o.hoveredNode&&-1===o.draggedNodeHoveredType&&r!==o.draggedNode&&o.canDropBefore(o.draggedNode,o.hoveredNode))("drop-below",r===o.hoveredNode&&1===o.draggedNodeHoveredType&&r!==o.draggedNode&&o.canDropAfter(o.draggedNode,o.hoveredNode)),l["\u0275\u0275attribute"]("draggable",r===o.draggedNode),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",r.children.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",o.showCheckboxes),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",o.canDrag&&0!==r.item.id),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",o.nodeTitleTemplate)("ngTemplateOutletContext",l["\u0275\u0275pureFunction1"](21,C,r)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngTemplateOutlet",o.addButtonTemplate?o.addButtonTemplate:i)("ngTemplateOutletContext",l["\u0275\u0275pureFunction1"](23,C,r)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",o.canRemove)}}function B(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",26),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().node;return l["\u0275\u0275nextContext"]().onAddNode(e)}),l["\u0275\u0275element"](1,"i",27),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().node,o=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("disabled",o.hasDraftChildrenSet.has(r.item.id))}}function M(e,t){if(1&e&&l["\u0275\u0275template"](0,B,2,1,"button",25),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngIf",n.canAdd)}}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=a(r);function r(e,o){var i;return n(this,r),(i=t.call(this)).expanded=!1,i.item=null,i.children=[],i.item=e.item,i.children=i.convertToDynamicNodes(e.children,o),i.expanded=o.has(e.item.id),i}return o(r,[{key:"convertToDynamicNodes",value:function(e,t){return e.map(function(e){return new r(e,t)})}}]),r}(s.i),L=function(){var t=function(){function t(e){n(this,t),this.cdr=e,this.inputNodes$=new p.a(null),this.flatNodes=new Map(null),this.flatDynamicNodes=new Map(null),this.dimmedNodeSet=new Set,this.hiddenNodeSet=new Set,this.canAdd=!0,this.canRemove=!0,this.showCheckboxes=!1,this.nodeAdded=new l.EventEmitter,this.nodeRemoved=new l.EventEmitter,this.nodeModified=new l.EventEmitter,this.showNotification=new l.EventEmitter,this.checkedNodeSetChange=new l.EventEmitter,this.treeRendered=new l.EventEmitter,this.checkedNodeSet=new Set,this.indeterminateNodeSet=new Set,this.nodes=new Map,this.expandedNodeSet=new Set,this.hasDraftChildrenSet=new Set,this.ready$=new p.a(!1),this.dragOverRoot=!1,this.delayBeforeHoveredNodeExpand=300,this.dropPlaceEnum=u.a,this.notificationTypeEnum=c.b}return o(t,[{key:"ngAfterContentInit",value:function(){var e=this;this.cdr.detectChanges(),this.ready$.pipe(Object(f.a)(function(e){return!!e})).subscribe(function(t){return e.treeRendered.emit(!0)})}},{key:"ngOnInit",value:function(){var e=this;this.inputNodes$.asObservable().pipe(Object(f.a)(function(e){return!!e}),Object(h.a)()).subscribe(function(t){e.nodes.size&&(e.expandedNodeSet.clear(),e.saveExpandedNode(e.nodes)),e.nodes.clear(),t.forEach(function(t){return e.nodes.set(t.item.id,new V(t,e.expandedNodeSet))}),e.nodes.forEach(function(t){return e.walkDynamicTreeNodes(t)}),e.hasDraftChildrenSet.clear(),e.checkDraftChildren(e.nodes),e.cdr.detectChanges(),e.ready$.next(!0)})}},{key:"expandTreeNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nodes;t.forEach(function(t){t.expanded=!0,e.expandTreeNodes(t.children)}),this.cdr.detectChanges()}},{key:"expandTreeNodesById",value:function(e){this.flatDynamicNodes.forEach(function(t){e.includes(t.item.id)&&(t.expanded=!0)}),this.cdr.detectChanges()}},{key:"collapseTreeNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nodes;t.forEach(function(t){t.expanded=!1,e.collapseTreeNodes(t.children)}),this.cdr.detectChanges()}},{key:"walkDynamicTreeNodes",value:function(e){var t=this;e instanceof V?(this.flatDynamicNodes.set(e.item.id,e),this.walkDynamicTreeNodes(e.children)):e.forEach(function(e){t.flatDynamicNodes.set(e.item.id,e),t.walkDynamicTreeNodes(e.children)})}},{key:"onAddNode",value:function(e){var t=this;e.expanded=!0,setTimeout(function(){return t.cdr.detectChanges()}),this.nodeAdded.emit(e.item.id)}},{key:"onRemoveNode",value:function(e){this.nodeRemoved.emit(e)}},{key:"saveExpandedNode",value:function(t){var n=this;t instanceof Map?t.forEach(function(e){e.expanded&&n.expandedNodeSet.add(e.item.id)}):t instanceof Array&&(this.expandedNodeSet=new Set([].concat(e(t.filter(function(e){return e.expanded}).map(function(e){return e.item.id})),e(this.expandedNodeSet)))),t.forEach(function(e){return n.saveExpandedNode(e.children)})}},{key:"checkDraftChildren",value:function(t){var n=this;t instanceof Map?t.forEach(function(e){e.children.find(function(e){return 0===e.item.id})&&n.hasDraftChildrenSet.add(e.item.id)}):t instanceof Array&&(this.hasDraftChildrenSet=new Set([].concat(e(t.filter(function(e){return e.children.find(function(e){return 0===e.item.id})}).map(function(e){return e.item.id})),e(this.hasDraftChildrenSet)))),t.forEach(function(e){return n.checkDraftChildren(e.children)})}},{key:"treeNodeHasDraftChildren",value:function(e){return e.children.filter(function(e){return 0===e.item.id}).length>0}},{key:"setDraggedNode",value:function(e,t){this.draggedNode=t}},{key:"unsetDraggedNode",value:function(){this.draggedNode=null}},{key:"onDragOverRoot",value:function(e){this.dragOverRoot=!0,e.preventDefault()}},{key:"onDragLeaveRoot",value:function(){this.dragOverRoot=!1}},{key:"onDropToRoot",value:function(e){this.dragOverRoot=!1,this.nodeModified.emit({dropType:u.a.Root,draggedNode:this.draggedNode,targetNode:null}),this.onDragEnd(e)}},{key:"onDragOver",value:function(e,t){e.preventDefault(),this.draggedNodeHoveredType=NaN,this.hoveredNode&&t===this.hoveredNode?Date.now()-this.draggedNodeHoveredSince>this.delayBeforeHoveredNodeExpand&&(t.expanded||(t.expanded=!0,this.cdr.detectChanges())):(this.hoveredNode=t,this.draggedNodeHoveredSince=(new Date).getTime());var n=e.offsetY/e.target.clientHeight;n>.15&&n<.85?this.draggedNodeHoveredType=this.dropPlaceEnum.Into:n<.15?this.draggedNodeHoveredType=this.dropPlaceEnum.Before:n>.85&&(this.draggedNodeHoveredType=this.dropPlaceEnum.After)}},{key:"onDrop",value:function(e,t){t!==this.draggedNode&&(this.draggedNodeHoveredType===this.dropPlaceEnum.Into?this.canDropInto(this.draggedNode,t)?this.draggedNode.item.parentId===t.item.id?this.showNotification.emit({type:this.notificationTypeEnum.Error,message:"You try drop to parent"}):this.nodeModified.emit({dropType:u.a.Into,draggedNode:this.nodeConverter(this.draggedNode),targetNode:this.nodeConverter(t)}):this.showNotification.emit({type:this.notificationTypeEnum.Error,message:"Forbidden"}):this.draggedNodeHoveredType===this.dropPlaceEnum.Before&&this.canDropBefore(this.draggedNode,t)?this.nodeModified.emit({dropType:u.a.Before,draggedNode:this.nodeConverter(this.draggedNode),targetNode:this.nodeConverter(t)}):this.draggedNodeHoveredType===this.dropPlaceEnum.After&&this.canDropAfter(this.draggedNode,t)&&this.nodeModified.emit({dropType:u.a.After,draggedNode:this.nodeConverter(this.draggedNode),targetNode:this.nodeConverter(t)})),this.onDragEnd(e)}},{key:"onDragStart",value:function(e,t){e.dataTransfer.setData("foo","bar")}},{key:"onDragEnd",value:function(e){this.draggedNode=null,this.hoveredNode=null,this.draggedNodeHoveredSince=0,this.draggedNodeHoveredType=NaN,e.preventDefault()}},{key:"nodeConverter",value:function(e){var t=new s.i;return t.children=e.children,t.item=e.item,t}},{key:"verifyChildrenNode",value:function(e,t){return t.item.parentId!==e.item.id&&(!t.item.parentId||this.verifyChildrenNode(e,this.flatDynamicNodes.get(t.item.parentId)))}},{key:"canDropInto",value:function(e,t){return!(!e||!t)&&e.item.parentId!==t.item.id&&this.verifyChildrenNode(e,t)}},{key:"canDropAfter",value:function(e,t){return!(!e||!t)&&e.item.id!==t.item.id&&this.verifyChildrenNode(e,t)}},{key:"canDropBefore",value:function(e,t){return!(!e||!t)&&e.item.id!==t.item.id&&this.verifyChildrenNode(e,t)}},{key:"precheckedNodeIdSet",set:function(e){this.checkedNodeSet=e}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.ChangeDetectorRef))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["m-dynamic-tree-map"]],contentQueries:function(e,t,n){var r;(1&e&&(l["\u0275\u0275contentQuery"](n,v,!0),l["\u0275\u0275contentQuery"](n,y,!0),l["\u0275\u0275contentQuery"](n,x,!0)),2&e)&&(l["\u0275\u0275queryRefresh"](r=l["\u0275\u0275loadQuery"]())&&(t.addButtonTemplate=r.first),l["\u0275\u0275queryRefresh"](r=l["\u0275\u0275loadQuery"]())&&(t.addParaButtonTemplate=r.first),l["\u0275\u0275queryRefresh"](r=l["\u0275\u0275loadQuery"]())&&(t.nodeTitleTemplate=r.first))},inputs:{inputNodes$:"inputNodes$",flatNodes:"flatNodes",dimmedNodeSet:"dimmedNodeSet",hiddenNodeSet:"hiddenNodeSet",canAdd:"canAdd",canRemove:"canRemove",showCheckboxes:"showCheckboxes",precheckedNodeIdSet:"precheckedNodeIdSet",canDrag:"canDrag"},outputs:{nodeAdded:"nodeAdded",nodeRemoved:"nodeRemoved",nodeModified:"nodeModified",showNotification:"showNotification",checkedNodeSetChange:"checkedNodeSetChange",treeRendered:"treeRendered"},decls:11,vars:3,consts:[["class","m-card-warning",4,"ngIf"],["class","drop-parent",3,"drop-parent-select","dragover","drop","dragleave",4,"ngIf"],["class","tree-list",4,"ngIf"],["noChild",""],["hasChild",""],["nodeItem",""],["defaultAddButton",""],[1,"m-card-warning"],[1,"drop-parent",3,"dragover","drop","dragleave"],[1,"drop-text"],[1,"tree-list"],[4,"ngFor","ngForOf"],["class","tree-list-item",4,"ngIf"],[1,"tree-list-item"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"item-node",3,"dragover","dragend","drop","dragstart"],["class","las cursor-pointer",3,"la-angle-right","la-angle-down","click",4,"ngIf"],["color","primary","class","mr-1",3,"indeterminate","checked","disabled","change",4,"ngIf"],["class","drag-handle las la-grip-lines",3,"mousedown","mouseup",4,"ngIf"],["class","las la-trash cursor-pointer red",3,"click",4,"ngIf"],[1,"las","cursor-pointer",3,"click"],["color","primary",1,"mr-1",3,"indeterminate","checked","disabled","change"],[1,"drag-handle","las","la-grip-lines",3,"mousedown","mouseup"],[1,"las","la-trash","cursor-pointer","red",3,"click"],["class","icon-button",3,"disabled","click",4,"ngIf"],[1,"icon-button",3,"disabled","click"],[1,"las","la-plus","cursor-pointer","blue","f-s-20"]],template:function(e,t){1&e&&(l["\u0275\u0275template"](0,N,2,0,"div",0),l["\u0275\u0275template"](1,b,3,2,"div",1),l["\u0275\u0275template"](2,w,3,3,"ul",2),l["\u0275\u0275template"](3,S,1,4,"ng-template",null,3,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275template"](5,I,2,5,"ng-template",null,4,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275template"](7,A,7,25,"ng-template",null,5,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275template"](9,M,1,1,"ng-template",null,6,l["\u0275\u0275templateRefExtractor"])),2&e&&(l["\u0275\u0275property"]("ngIf",!t.nodeTitleTemplate),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.draggedNode&&t.draggedNode.item.parentId),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.nodes&&t.nodes.size>0))},directives:[g.m,g.l,g.r,m.a],pipes:[g.g],styles:[".example-tree-progress-bar[_ngcontent-%COMP%]{margin-left:30px}ul[_ngcontent-%COMP%]{list-style-type:none}.las[_ngcontent-%COMP%]{font-size:20px}.item-node[_ngcontent-%COMP%]{height:32px;display:flex;align-items:center;border:2px solid transparent}input[type=text].default-disable[_ngcontent-%COMP%], input[type=text].default-disable[_ngcontent-%COMP%]:disabled{border:none;border-bottom:1px solid #ccc;background-color:hsla(0,0%,100%,.125)}"],changeDetection:0}),t}()},gfTr:function(e,t,r){"use strict";r.d(t,"a",function(){return m}),r.d(t,"b",function(){return g}),r.d(t,"c",function(){return v});var i=r("fXoL"),a=r("PqYM"),d=r("ofXK"),l=["fileSelector"];function s(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.dropZoneLabel)}}function c(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"input",9),i["\u0275\u0275listener"]("click",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).openFileSelector(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("value",r.browseBtnLabel),i["\u0275\u0275property"]("className",r.browseBtnClassName)}}function u(e,t){if(1&e&&(i["\u0275\u0275template"](0,s,2,1,"div",6),i["\u0275\u0275template"](1,c,2,2,"div",7)),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",n.dropZoneLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.showBrowseBtn)}}function p(e,t){}var f=function(e){return{openFileSelector:e}},h=function e(t,r){n(this,e),this.relativePath=t,this.fileEntry=r},g=function(){var e=function e(t){n(this,e),this.template=t};return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.TemplateRef))},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,selectors:[["","ngx-file-drop-content-tmp",""]]}),e}(),m=function(){var e=function(){function e(t,r){var o=this;n(this,e),this.zone=t,this.renderer=r,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new i.EventEmitter,this.onFileOver=new i.EventEmitter,this.onFileLeave=new i.EventEmitter,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=function(e){o.fileSelector&&o.fileSelector.nativeElement&&o.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",function(e){o.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",function(e){o.globalDraggingInProgress=!1})}return o(e,[{key:"ngOnDestroy",value:function(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}},{key:"onDragOver",value:function(e){this.useDragEnter?this.preventAndStop(e):this.isDropzoneDisabled()||this.useDragEnter||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}},{key:"onDragEnter",value:function(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}},{key:"onDragLeave",value:function(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))}},{key:"dropFiles",value:function(e){var t;!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)&&(e.dataTransfer.dropEffect="copy",t=e.dataTransfer.items?e.dataTransfer.items:e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t))}},{key:"uploadFiles",value:function(e){!this.isDropzoneDisabled()&&e.target&&(this.checkFiles(e.target.files||[]),this.resetFileInput())}},{key:"checkFiles",value:function(e){for(var t=this,n=function(n){var r=e[n],o=null;if(t.canGetAsEntry(r)&&(o=r.webkitGetAsEntry()),o)if(o.isFile){var i=new h(o.name,o);t.addToQueue(i)}else o.isDirectory&&t.traverseFileTree(o,o.name);else if(r){var a={name:r.name,isDirectory:!1,isFile:!0,file:function(e){e(r)}},d=new h(a.name,a);t.addToQueue(d)}},r=0;r<e.length;r++)n(r);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(a.a)(200,200).subscribe(function(){if(t.files.length>0&&0===t.numOfActiveReadEntries){var e=t.files;t.files=[],t.onFileDrop.emit(e)}})}},{key:"traverseFileTree",value:function(e,t){var n=this;if(e.isFile){var r=new h(t,e);this.files.push(r)}else{t+="/";var o=e.createReader(),i=[];!function r(){n.numOfActiveReadEntries++,o.readEntries(function(o){if(o.length)i=i.concat(o),r();else if(0===i.length){var a=new h(t,e);n.zone.run(function(){n.addToQueue(a)})}else for(var d=function(e){n.zone.run(function(){n.traverseFileTree(i[e],t+i[e].name)})},l=0;l<i.length;l++)d(l);n.numOfActiveReadEntries--})}()}}},{key:"resetFileInput",value:function(){if(this.fileSelector&&this.fileSelector.nativeElement){var e=this.fileSelector.nativeElement,t=e.parentElement,n=this.getHelperFormElement(),r=this.getFileInputPlaceholderElement();t!==n&&(this.renderer.insertBefore(t,r,e),this.renderer.appendChild(n,e),n.reset(),this.renderer.insertBefore(t,e,r),this.renderer.removeChild(t,r))}}},{key:"getHelperFormElement",value:function(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}},{key:"getFileInputPlaceholderElement",value:function(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}},{key:"canGetAsEntry",value:function(e){return!!e.webkitGetAsEntry}},{key:"isDropzoneDisabled",value:function(){return this.globalDraggingInProgress||this.disabled}},{key:"addToQueue",value:function(e){this.files.push(e)}},{key:"preventAndStop",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&""+e!="false"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](i.Renderer2))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-file-drop"]],contentQueries:function(e,t,n){var r;(1&e&&i["\u0275\u0275contentQuery"](n,g,!0,i.TemplateRef),2&e)&&(i["\u0275\u0275queryRefresh"](r=i["\u0275\u0275loadQuery"]())&&(t.contentTemplate=r.first))},viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275staticViewQuery"](l,!0),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.fileSelector=n.first))},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:15,consts:[[3,"className","drop","dragover","dragenter","dragleave"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"className","value","click"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275listener"]("drop",function(e){return t.dropFiles(e)})("dragover",function(e){return t.onDragOver(e)})("dragenter",function(e){return t.onDragEnter(e)})("dragleave",function(e){return t.onDragLeave(e)}),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"input",2,3),i["\u0275\u0275listener"]("change",function(e){return t.uploadFiles(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,u,2,2,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](6,p,0,0,"ng-template",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](5);i["\u0275\u0275classProp"]("ngx-file-drop__drop-zone--over",t.isDraggingOverDropZone),i["\u0275\u0275property"]("className",t.dropZoneClassName),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("className",t.contentClassName),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("accept",t.accept)("multiple",t.multiple),i["\u0275\u0275attribute"]("directory",t.directory||void 0)("webkitdirectory",t.directory||void 0)("mozdirectory",t.directory||void 0)("msdirectory",t.directory||void 0)("odirectory",t.directory||void 0),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngTemplateOutlet",t.contentTemplate||n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](13,f,t.openFileSelector))}},directives:[d.r,d.m],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),e}(),v=function(){var e=function e(){n(this,e)};return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e,bootstrap:function(){return[m]}}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[d.c]]}),e}()}}])}();