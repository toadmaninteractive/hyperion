!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"HwM/":function(t,i,r){"use strict";r.r(i),r.d(i,"SettingsModule",function(){return V});var o,s=r("ofXK"),a=r("3Pt+"),l=r("tyNb"),d=r("bTqV"),m=r("Wp6s"),c=r("bSwM"),p=r("kmnG"),u=r("NFeN"),f=r("qFsG"),g=r("QibW"),h=r("d3UM"),S=r("Qu3c"),v=r("PCNd"),y=r("XNiG"),b=r("2Vo4"),_=r("1G5W"),E=r("nYR2"),w=r("Y4+Y"),k=r("mbOZ"),x=r("H/DC"),C=r("fXoL"),D=((o=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e,t){if(!("number"==typeof e&&e>0))return"invalid duration";var n=+e,i=Math.floor(n/86400);n%=86400;var r=Math.floor(n/3600);n%=3600;var o=Math.floor(n/60),s=n%60,a=i>0?i+" days ":"";return a+=r>0?r+" hours ":"",a+=o>0?o+" mins ":"",a+=s>0?s+" secs ":""}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=C["\u0275\u0275definePipe"]({name:"mPrettyDuration",type:o,pure:!0}),o),I=function(e){return{dimmed:e}};function $(e,t){if(1&e){var n=C["\u0275\u0275getCurrentView"]();C["\u0275\u0275elementStart"](0,"form",15),C["\u0275\u0275pipe"](1,"async"),C["\u0275\u0275elementStart"](2,"fieldset",16),C["\u0275\u0275pipe"](3,"async"),C["\u0275\u0275elementStart"](4,"div",17),C["\u0275\u0275elementStart"](5,"div",0),C["\u0275\u0275elementStart"](6,"div",18),C["\u0275\u0275elementStart"](7,"div",19),C["\u0275\u0275elementStart"](8,"h3",20),C["\u0275\u0275text"](9,"Sessions"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](10,"div",21),C["\u0275\u0275elementStart"](11,"mat-form-field",22),C["\u0275\u0275elementStart"](12,"input",23),C["\u0275\u0275listener"]("ngModelChange",function(e){return C["\u0275\u0275restoreView"](n),C["\u0275\u0275nextContext"]().settings.personnelSessionDuration=e}),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](13,"mat-hint",24),C["\u0275\u0275text"](14," Which is "),C["\u0275\u0275elementStart"](15,"strong"),C["\u0275\u0275text"](16),C["\u0275\u0275pipe"](17,"mPrettyDuration"),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](18,"div",25),C["\u0275\u0275elementStart"](19,"div",26),C["\u0275\u0275elementStart"](20,"button",27),C["\u0275\u0275listener"]("click",function(){return C["\u0275\u0275restoreView"](n),C["\u0275\u0275nextContext"]().updateSettings()}),C["\u0275\u0275pipe"](21,"async"),C["\u0275\u0275text"](22," Update settings "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275text"](23,"\xa0 "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()}if(2&e){var i=C["\u0275\u0275nextContext"]();C["\u0275\u0275property"]("ngClass",C["\u0275\u0275pureFunction1"](14,I,C["\u0275\u0275pipeBind1"](1,6,i.loading$))),C["\u0275\u0275advance"](2),C["\u0275\u0275property"]("disabled",C["\u0275\u0275pipeBind1"](3,8,i.loading$)),C["\u0275\u0275advance"](10),C["\u0275\u0275property"]("min",0)("ngModel",i.settings.personnelSessionDuration),C["\u0275\u0275advance"](4),C["\u0275\u0275textInterpolate"](C["\u0275\u0275pipeBind1"](17,10,i.settings.personnelSessionDuration)),C["\u0275\u0275advance"](4),C["\u0275\u0275property"]("disabled",C["\u0275\u0275pipeBind1"](21,12,i.loading$)||!i.settingsChanged()||!i.settingsValid())}}var j,M,O=((j=function(){function t(n,i,r,o){e(this,t),this.router=n,this.cdr=i,this.hyperionSettingsService=r,this.notificationService=o}return n(t,[{key:"ngOnInit",value:function(){this.destroy$=new y.b,this.loading$=new b.a(!1),this.getSettings()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete(),this.loading$.complete()}},{key:"isInitialized",value:function(){return!(!this.settings||!this.pristineSettings)}},{key:"settingsChanged",value:function(){return!!this.isInitialized()&&+this.settings.personnelSessionDuration!==this.pristineSettings.personnelSessionDuration}},{key:"settingsValid",value:function(){return!!this.isInitialized()&&+this.settings.personnelSessionDuration>0}},{key:"getSettings",value:function(){var e=this;this.loading$.next(!0),this.hyperionSettingsService.getSettings().pipe(Object(_.a)(this.destroy$),Object(E.a)(function(){return e.loading$.next(!1)})).subscribe(function(t){e.settings=t,e.pristineSettings=x.a.fromJson(t.toJson()),e.cdr.detectChanges()})}},{key:"updateSettings",value:function(){var e=this;if(this.isInitialized()){var t=new x.b;t.personnelSessionDuration=+this.settings.personnelSessionDuration!==this.pristineSettings.personnelSessionDuration?this.settings.personnelSessionDuration:null,this.loading$.next(!0),this.hyperionSettingsService.updateSettings(t).pipe(Object(_.a)(this.destroy$),Object(E.a)(function(){return e.loading$.next(!1)})).subscribe(function(t){t.result?e.notificationService.success("Settings updated"):e.notificationService.error("Settings not updated"),t.result&&(e.cdr.detectChanges(),e.getSettings())})}}}]),t}()).\u0275fac=function(e){return new(e||j)(C["\u0275\u0275directiveInject"](l.g),C["\u0275\u0275directiveInject"](C.ChangeDetectorRef),C["\u0275\u0275directiveInject"](k.a),C["\u0275\u0275directiveInject"](w.a))},j.\u0275cmp=C["\u0275\u0275defineComponent"]({type:j,selectors:[["m-settings"]],decls:16,vars:1,consts:[[1,"row"],[1,"col-lg-12"],[1,"m-portlet"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-icon"],[1,"la","la-gear"],[1,"m-portlet__head-text"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],["href","javascript:void(null);","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],["class","m-form m-form--fit",3,"ngClass",4,"ngIf"],[1,"m-form","m-form--fit",3,"ngClass"],[3,"disabled"],[1,"m-portlet__body"],[1,"col-md-6","col-sm-12","col-xs-12"],[1,"m-form__heading"],[1,"m-form__heading-title"],[1,"form-group","m-form__group"],[1,"example-full-width"],["type","number","required","","matInput","","name","personnelSessionDuration","placeholder","Personnel session duration",3,"min","ngModel","ngModelChange"],["align","start",1,"f-s-12","pt-1"],[1,"m-portlet__foot","m-portlet__no-border","m-portlet__foot--fit","m--align-right"],[1,"m-form__actions","m-form__actions--solid"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(C["\u0275\u0275elementStart"](0,"div",0),C["\u0275\u0275elementStart"](1,"div",1),C["\u0275\u0275elementStart"](2,"div",2),C["\u0275\u0275elementStart"](3,"div",3),C["\u0275\u0275elementStart"](4,"div",4),C["\u0275\u0275elementStart"](5,"div",5),C["\u0275\u0275elementStart"](6,"span",6),C["\u0275\u0275element"](7,"i",7),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](8,"h3",8),C["\u0275\u0275text"](9," Manage system settings "),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementStart"](10,"div",9),C["\u0275\u0275elementStart"](11,"ul",10),C["\u0275\u0275elementStart"](12,"li",11),C["\u0275\u0275elementStart"](13,"a",12),C["\u0275\u0275listener"]("click",function(){return t.getSettings()}),C["\u0275\u0275element"](14,"i",13),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275template"](15,$,24,16,"form",14),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"](),C["\u0275\u0275elementEnd"]()),2&e&&(C["\u0275\u0275advance"](15),C["\u0275\u0275property"]("ngIf",t.isInitialized()))},directives:[S.a,s.m,a.q,a.j,a.k,s.k,p.b,a.m,f.b,a.c,a.o,a.i,a.l,p.e,d.a],pipes:[s.b,D],styles:[""],changeDetection:0}),j),P=r("qebw"),V=((M=function t(){e(this,t)}).\u0275mod=C["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=C["\u0275\u0275defineInjector"]({factory:function(e){return new(e||M)},providers:[],imports:[[s.c,a.e,d.b,m.a,c.b,p.d,u.b,f.c,g.a,h.b,S.b,v.a,l.i.forChild([{path:"",component:O,canActivate:[P.a]}])]]}),M)}}])}();