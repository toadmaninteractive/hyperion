(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"8YY7":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e[e.Id=1]="Id",e[e.FileSize=2]="FileSize",e[e.OriginalFilename=3]="OriginalFilename",e[e.ContentType=4]="ContentType",e[e.PersonnelId=5]="PersonnelId",e[e.PersonnelName=6]="PersonnelName",e[e.CreatedAt=7]="CreatedAt",e}({});!function(e){function t(t){switch(t){case e.Id:return"id";case e.FileSize:return"file_size";case e.OriginalFilename:return"original_filename";case e.ContentType:return"content_type";case e.PersonnelId:return"personnel_id";case e.PersonnelName:return"personnel_name";case e.CreatedAt:return"created_at";default:throw new Error("Invalid FileAttachmentOrderBy value: "+t)}}function n(t){switch(t){case"id":return e.Id;case"file_size":return e.FileSize;case"original_filename":return e.OriginalFilename;case"content_type":return e.ContentType;case"personnel_id":return e.PersonnelId;case"personnel_name":return e.PersonnelName;case"created_at":return e.CreatedAt;default:throw new Error("Invalid FileAttachmentOrderBy value: "+t)}}e.toJson=function(e){return t(e)},e.fromJson=function(e){return n(e)},e.toJsonKey=t,e.fromJsonKey=n}(i||(i={}))},E1Th:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("tk/3"),r=n("z6cu"),o=n("JIr8"),a=n("lJxs"),d=n("UTw3"),s=n("0bxZ"),c=n("8YY7"),l=n("fXoL");let p=(()=>{class e{constructor(e){this.http=e,this.baseUrl=""}getProjectAttachments(e,t,n,l,p,m=null){const h=[];h.push("order_by="+c.a.toJson(t)),h.push("order_dir="+d.h.toJson(n)),h.push("offset="+l),h.push("limit="+p),null!=m&&h.push("needle="+m);const u=h.length>0?"?"+h.join("&"):"";return this.http.get(`${this.baseUrl}/api/attachments/project/${e}${u}`).pipe(Object(o.a)(e=>{if(e instanceof i.c)switch(e.status){case 403:return Object(r.a)(d.d.fromJson(e.error));case 500:return Object(r.a)(d.f.fromJson(e.error))}Object(r.a)(e)}),Object(a.a)(e=>d.c.instanceJsonSerializer(s.c).fromJson(e)))}getLinkedAttachments(e,t){return this.http.get(`${this.baseUrl}/api/attachments/${s.b.toJson(e)}/${t}`).pipe(Object(o.a)(e=>{if(e instanceof i.c)switch(e.status){case 403:return Object(r.a)(d.d.fromJson(e.error));case 404:return Object(r.a)(d.g.fromJson(e.error));case 500:return Object(r.a)(d.f.fromJson(e.error))}Object(r.a)(e)}),Object(a.a)(e=>d.b.instanceJsonSerializer(s.c).fromJson(e)))}deleteAttachmentLink(e,t,n){return this.http.delete(`${this.baseUrl}/api/attachments/${e}/${s.b.toJson(t)}/${n}`).pipe(Object(o.a)(e=>{if(e instanceof i.c)switch(e.status){case 403:return Object(r.a)(d.d.fromJson(e.error));case 404:return Object(r.a)(d.g.fromJson(e.error));case 500:return Object(r.a)(d.f.fromJson(e.error))}Object(r.a)(e)}),Object(a.a)(e=>d.e.fromJson(e)))}getAttachmentLinks(e){return this.http.get(`${this.baseUrl}/api/attachments/${e}/links`).pipe(Object(o.a)(e=>{if(e instanceof i.c)switch(e.status){case 403:return Object(r.a)(d.d.fromJson(e.error));case 500:return Object(r.a)(d.f.fromJson(e.error))}Object(r.a)(e)}),Object(a.a)(e=>d.b.instanceJsonSerializer(s.d).fromJson(e)))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](i.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},gQyj:function(e,t,n){"use strict";n.r(t),n.d(t,"SetupModule",function(){return We});var i=n("ofXK"),r=n("3Pt+"),o=n("tyNb"),a=n("bTqV"),d=n("bSwM"),s=n("0IaG"),c=n("kmnG"),l=n("NFeN"),p=n("qFsG"),m=n("Xa2L"),h=n("Qu3c"),u=n("8yBR"),f=n("m3o8"),g=n("fXoL");n("jhN1");let v=(()=>{let e=class{};return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})();var b=n("gfTr"),S=n("bFKe"),N=n("QJFE"),x=n("PCNd"),y=n("j1ZV"),w=n("0Y/I"),C=n("sUzd"),k=n("tk/3"),I=n("XNiG"),E=n("2Vo4"),T=n("itXk"),M=n("VRyK"),P=n("1G5W"),O=n("pLZG"),A=n("nYR2"),D=n("/1cH"),j=n("E1Th"),F=n("EPMp"),$=n("Y4+Y"),_=n("TufI"),R=n("25+x"),V=n("Sw3e"),L=n("Ehhc"),B=n("N1IV"),z=n("FvrZ"),J=n("0bxZ");const H=["addButtonTemplate"],U=["addParaButtonTemplate"],Q=["nodeTitleTemplate"],q=["treeSelector"];function Y(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",4),g["\u0275\u0275text"](1," Node template not defined "),g["\u0275\u0275elementEnd"]())}function G(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",5),g["\u0275\u0275listener"]("dragover",function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().onDragOverRoot(t)})("drop",function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().onDropToRoot(t)})("dragleave",function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().onDragLeaveRoot()}),g["\u0275\u0275elementStart"](1,"div",6),g["\u0275\u0275text"](2," Drop to root "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275classProp"]("drop-parent-select",e.dragOverRoot)}}function Z(e,t){1&e&&g["\u0275\u0275element"](0,"div",19)}function X(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",20),g["\u0275\u0275elementStart"](1,"mat-icon",21),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().$implicit,n=g["\u0275\u0275nextContext"](2);return n.toggleTreeNode(t,n.treeControl.isExpanded(t))}),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]().$implicit,t=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",t.treeControl.isExpanded(e)?"expand_more":"chevron_right"," ")}}function K(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"mat-checkbox",22),g["\u0275\u0275listener"]("change",function(t){g["\u0275\u0275restoreView"](e);const n=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"](2).onCheckNode(n,t.checked)}),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]().$implicit,t=g["\u0275\u0275nextContext"](2);g["\u0275\u0275property"]("checked",t.checkedNodeSet.has(e.item.id))("indeterminate",t.indeterminatedNodeSet.has(e.item.id))("disabled",e.item.isDraft)}}function W(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"mat-icon",23),g["\u0275\u0275listener"]("mousedown",function(t){g["\u0275\u0275restoreView"](e);const n=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"](2).setDraggedNode(t,n)})("mouseup",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"](2).unsetDraggedNode(t)}),g["\u0275\u0275text"](1," apps "),g["\u0275\u0275elementEnd"]()}}function ee(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"mat-icon",24),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().$implicit;return g["\u0275\u0275nextContext"](2).onRemoveNode(t)}),g["\u0275\u0275text"](1," delete "),g["\u0275\u0275elementEnd"]()}}const te=function(e){return{node:e}};function ne(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",27),g["\u0275\u0275elementStart"](1,"div",28),g["\u0275\u0275elementStart"](2,"span",29),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](2).$implicit;return g["\u0275\u0275nextContext"](2).onAddNode(t)}),g["\u0275\u0275text"](3," Add item to "),g["\u0275\u0275elementStart"](4,"b"),g["\u0275\u0275text"](5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainer"](6,16),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"](2).$implicit,t=g["\u0275\u0275nextContext"](2),n=g["\u0275\u0275reference"](4);g["\u0275\u0275advance"](5),g["\u0275\u0275textInterpolate"](e.item.title),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",t.addButtonTemplate?t.addButtonTemplate:n)("ngTemplateOutletContext",g["\u0275\u0275pureFunction1"](3,te,e))}}function ie(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"ul"),g["\u0275\u0275elementContainer"](1,25),g["\u0275\u0275template"](2,ne,7,5,"div",26),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]().$implicit,t=g["\u0275\u0275nextContext"](2);g["\u0275\u0275classProp"]("basic-tree-invisible",!t.treeControl.isExpanded(e)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",e.children.length>10&&!t.showCheckboxes&&!t.treeNodeHasDraftChildren(e))}}function re(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"mat-nested-tree-node"),g["\u0275\u0275elementStart"](1,"li"),g["\u0275\u0275elementStart"](2,"div",10),g["\u0275\u0275listener"]("dragover",function(n){g["\u0275\u0275restoreView"](e);const i=t.$implicit;return g["\u0275\u0275nextContext"](2).onDragOver(n,i)})("dragend",function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](2).onDragEnd(t)})("drop",function(n){g["\u0275\u0275restoreView"](e);const i=t.$implicit;return g["\u0275\u0275nextContext"](2).onDrop(n,i)})("dragstart",function(n){g["\u0275\u0275restoreView"](e);const i=t.$implicit;return g["\u0275\u0275nextContext"](2).onDragStart(n,i)}),g["\u0275\u0275template"](3,Z,1,0,"div",11),g["\u0275\u0275template"](4,X,3,1,"div",12),g["\u0275\u0275template"](5,K,1,3,"mat-checkbox",13),g["\u0275\u0275elementStart"](6,"button",14),g["\u0275\u0275template"](7,W,2,0,"mat-icon",15),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainer"](8,16),g["\u0275\u0275elementContainer"](9,16),g["\u0275\u0275elementContainer"](10,16),g["\u0275\u0275elementStart"](11,"button",14),g["\u0275\u0275template"](12,ee,2,0,"mat-icon",17),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](13,ie,3,3,"ul",18),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=g["\u0275\u0275nextContext"](2),i=g["\u0275\u0275reference"](4);g["\u0275\u0275styleProp"]("display",null!=n.hiddenNodeSet&&n.hiddenNodeSet.has(e)?"none":"block"),g["\u0275\u0275attribute"]("matTreeNodeToggle",0===e.children.length),g["\u0275\u0275advance"](2),g["\u0275\u0275classProp"]("dimmed",!!n.filterFn&&!n.filterFn(e,n.filterText))("more",!!n.filterFn&&!n.filterFn(e,n.filterText))("drag-start",e===n.draggedNode)("drop-center",e===n.hoveredNode&&0===n.draggedNodeHoveredType&&e!==n.draggedNode&&n.canDropInto&&n.canDropInto(n.draggedNode,n.hoveredNode))("drop-before",e===n.hoveredNode&&-1===n.draggedNodeHoveredType&&e!==n.draggedNode&&n.canDropBefore&&n.canDropBefore(n.draggedNode,n.hoveredNode))("drop-below",e===n.hoveredNode&&1===n.draggedNodeHoveredType&&e!==n.draggedNode&&n.canDropAfter&&n.canDropAfter(n.draggedNode,n.hoveredNode)),g["\u0275\u0275attribute"]("draggable",e===n.draggedNode),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",0===(null==e.children?null:e.children.length)),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",(null==e.children?null:e.children.length)>0),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",n.showCheckboxes),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",n.canDrag&&0!==e.item.id),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",n.nodeTitleTemplate)("ngTemplateOutletContext",g["\u0275\u0275pureFunction1"](28,te,e)),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",n.addButtonTemplate?n.addButtonTemplate:i)("ngTemplateOutletContext",g["\u0275\u0275pureFunction1"](30,te,e)),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",n.addParaButtonTemplate?n.addParaButtonTemplate:null)("ngTemplateOutletContext",g["\u0275\u0275pureFunction1"](32,te,e)),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",n.nodeRemoved.observers.length>0),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.children.length>0)}}function oe(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"mat-tree",7,8),g["\u0275\u0275template"](2,re,14,34,"mat-nested-tree-node",9),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("dataSource",e.dataSource)("treeControl",e.treeControl)}}function ae(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"button",31),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().node;return g["\u0275\u0275nextContext"]().onAddNode(t)}),g["\u0275\u0275elementStart"](1,"mat-icon"),g["\u0275\u0275text"](2,"add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]().node,t=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("disabled",t.treeNodeHasDraftChildren(e))}}function de(e,t){if(1&e&&g["\u0275\u0275template"](0,ae,3,1,"button",30),2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("ngIf",e.nodeAdded.observers.length>0)}}let se=(()=>{class e{constructor(e,t,n){this.cdr=e,this.notificationService=t,this.windowRefService=n,this.nodeMapChange=new g.EventEmitter,this.itemMapChange=new g.EventEmitter,this.itemMapRefresh=new g.EventEmitter,this.getCheckedNodeSet=new g.EventEmitter,this.selectNode=new g.EventEmitter,this.treeChanged=new g.EventEmitter,this.nodeAdded=new g.EventEmitter,this.parametricNodeAdded=new g.EventEmitter,this.nodeRemoved=new g.EventEmitter,this.nodeModified=new g.EventEmitter,this.showNotification=new g.EventEmitter,this.destroy$=new I.b,this.treeControl=new z.j(e=>e.children),this.dataSource=new u.d,this.expandedNodeId=new Set,this.expandedNodeSet=new Set,this.checkedNodeSet=new Set,this.indeterminatedNodeSet=new Set,this.fullNodeMap=[],this.dragOverRoot=!1,this.delayBeforeHoveredNodeExpand=300,this.dropPlaceEnum=B.a,this.notificationTypeEnum=$.b,this.alreadySetPrechecked=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(){if(this.rootNode&&this.rootNode.children.length>0){if(console.log("========== onChanges ==========="),this.dataSource.data=[],this.dataSource=new u.d,this.dataSource.data=this.rootNode.children,this.dataSource.data.sort(this.orderingFn),this.updateDataSource(),this.expandedNodeSet.clear(),this.expandedNodeId.forEach(e=>this.findNodeInDataSource(this.dataSource.data,e)),this.expandedNodeSet.forEach(e=>this.toggleTreeNode(e,!0)),this.nodeMap.clear(),this.itemMap||(this.itemMap=new Map),this.rootNode.children.forEach(e=>this.walkTreeNode(e)),setTimeout(()=>this.windowRefService.focusElementById("input-setup-0",0),200),setTimeout(()=>this.windowRefService.focusElementById("input-parameter-0",0),200),this.precheckedNodeSet){const e=[];this.rootNode.children.forEach((t,n)=>{e.push(this.flatTree(this.rootNode.children[n]))}),e.forEach(e=>{this.fullNodeMap.push(e.reduce((e,t)=>e.find(e=>e.id===t.id)?e:e.concat([t]),[]))}),this.fullNodeMap.forEach(e=>{const t=[];e.forEach(e=>{!1===e.draft&&!1===e.group&&this.checkedNodeSet.has(e.id)&&t.push(e)})}),this.precheckedNodeSet.forEach(e=>this.checkUncheckNodeParent(this.searchNode(e),!0,!0))}}else this.dataSource.data=[];if(this.websocketNodeAdd&&this.prevNewNode!==this.websocketNodeAdd&&(this.prevNewNode=this.websocketNodeAdd,this.nodeMap.has(this.websocketNodeAdd.item.id)||(this.websocketNodeAdd.item.parentId?this.nodeMap.get(this.websocketNodeAdd.item.parentId).children.push(this.websocketNodeAdd):this.rootNode.children.push(this.websocketNodeAdd),this.itemMap.set(this.websocketNodeAdd.item.id,this.websocketNodeAdd.item),this.updateDataSource(),this.tree.renderNodeChanges(this.dataSource.data))),this.websocketNodeModifyEvent&&this.prevUpdatedNode!==this.websocketNodeModifyEvent&&(this.prevUpdatedNode=this.websocketNodeModifyEvent,this.nodeMap.has(this.websocketNodeModifyEvent.item.id))){const e=this.itemMap.get(this.websocketNodeModifyEvent.item.id),t=this.nodeMap.get(this.websocketNodeModifyEvent.item.id);t.item=this.websocketNodeModifyEvent.item,this.nodeMap.set(t.item.id,t),this.setItemMapByType(t),this.moveTreeNode(t,e.parentId,this.websocketNodeModifyEvent.item.parentId),this.dataSource.data.sort(this.orderingFn),this.tree.renderNodeChanges(this.dataSource.data)}if(this.websocketNodeRemove&&this.prevRemovedNode!==this.websocketNodeRemove&&this.nodeMap.has(this.websocketNodeRemove.item.id)){this.nodeMap.delete(this.websocketNodeRemove.item.id),this.itemMap.delete(this.websocketNodeRemove.item.id);const e=this.websocketNodeRemove.item.parentId?this.nodeMap.get(this.websocketNodeRemove.item.parentId):null,t=e?e.children.findIndex(e=>e.item.id===this.websocketNodeRemove.item.id):this.rootNode.children.findIndex(e=>e.item.id===this.websocketNodeRemove.item.id);-1!==t&&(e?e.children.splice(t,1):this.rootNode.children.splice(t,1)),this.updateDataSource()}!this.alreadySetPrechecked&&this.precheckedNodeSet&&(this.checkedNodeSet=this.precheckedNodeSet,this.alreadySetPrechecked=!0),this.itemMapRefresh.emit(this.nodeMap)}flatTree(e){const t=new Array;return t.push({id:e.item.id,parentId:e.item.parentId,node:e}),e.children&&e.children.forEach(e=>{t.push({id:e.item.id,parentId:e.item.parentId,node:e}),e.children.length>0&&t.push(this.flatTree(e))}),t.flat(1)}walkTreeNode(e){e&&0!==e.item.id&&this.itemMap&&(this.setItemMapByType(e),this.nodeMap.set(e.item.id,e),e.children.forEach(e=>this.walkTreeNode(e)))}setItemMapByType(e){switch(e.item.constructor){case J.m:this.itemMap.set(e.item.id,J.m.fromJson(e.item.toJson()));break;case J.o:this.itemMap.set(e.item.id,J.o.fromJson(e.item.toJson()));break;case J.f:this.itemMap.set(e.item.id,J.f.fromJson(e.item.toJson()))}}moveTreeNode(e,t,n){if(t===n)return;e.item.parentId=n;const i=t?this.nodeMap.get(t):null,r=i?i.children.findIndex(t=>t.item.id===e.item.id):this.rootNode.children.findIndex(t=>t.item.id===e.item.id);-1!==r&&(i?i.children.splice(r,1):this.rootNode.children.splice(r,1)),n?this.nodeMap.get(n).children.push(e):this.rootNode.children.push(e),this.dataSource.data=this.rootNode.children,this.updateDataSource()}updateDataSource(){this.dataSource.data=[],performance.now(),this.dataSource=new u.d,this.dataSource.data=this.rootNode.children,this.dataSource.data.sort(this.orderingFn)}treeNodeHasDraftChildren(e){return e.children.filter(e=>0===e.item.id).length>0}findNodeInDataSource(e,t){e.forEach(e=>{e.item.id!==t?this.findNodeInDataSource(e.children,t):this.expandedNodeSet.add(e)})}toggleTreeNode(e,t){t?this.treeControl.expand(e):this.treeControl.collapse(e),t?this.expandedNodeId.add(e.item.id):this.expandedNodeId.delete(e.item.id)}toggleAllChildTreeNode(e,t){t?this.treeControl.expand(e):this.treeControl.collapse(e),t?this.expandedNodeId.add(e.item.id):this.expandedNodeId.delete(e.item.id),e.children.forEach(e=>this.toggleAllChildTreeNode(e,t))}toggleOneChildTreeNode(e,t){t?this.treeControl.expand(e):this.treeControl.collapse(e),t?this.expandedNodeId.add(e.item.id):this.expandedNodeId.delete(e.item.id),e.item.parentId&&this.toggleOneChildTreeNode(this.nodeMap.get(e.item.parentId),!0)}expandAllTreeNodes(){this.dataSource.data.forEach(e=>this.toggleAllChildTreeNode(e,!0))}collapseAllTreeNodes(){this.dataSource.data.forEach(e=>this.toggleAllChildTreeNode(e,!1))}checkUncheckNodeParent(e,t,n){if(e){n&&(this.indeterminatedNodeSet.delete(e.item.id),t&&!e.item.isDraft?this.checkedNodeSet.add(e.item.id):this.checkedNodeSet.delete(e.item.id),e.children.length>0&&e.children.forEach(n=>{t&&!e.item.isDraft?this.checkedNodeSet.add(n.item.id):this.checkedNodeSet.delete(n.item.id),this.indeterminatedNodeSet.delete(n.item.id),this.checkUncheckNodeChild(n,t)}));let i=0,r=0,o=0;e.children.length>0&&e.children.forEach(e=>{this.indeterminatedNodeSet.has(e.item.id)&&r++,this.checkedNodeSet.has(e.item.id)&&i++,o++}),i===o&&0!==i&&0!==o?(this.indeterminatedNodeSet.delete(e.item.id),t&&!e.item.isDraft?this.checkedNodeSet.add(e.item.id):this.checkedNodeSet.delete(e.item.id),this.indeterminatedNodeSet.add(e.item.parentId),this.checkUncheckNodeParent(this.searchNode(e.item.parentId),t,!1)):e.item.parentId?this.fullNodeMap.forEach((n,i)=>{let r=0,o=0,a=0;n.forEach(t=>{t.parentId===e.item.parentId&&null!==t.parentId&&null!==e.item.parentId&&(r=t.parentId,o++,this.checkedNodeSet.has(t.id)&&a++)}),a>0&&(t=!0),o>0&&(this.checkedNodeSet.delete(r),t&&!e.item.isDraft?this.indeterminatedNodeSet.add(r):this.indeterminatedNodeSet.delete(r),this.checkUncheckNodeParent(this.searchNode(r),t,!1))}):i>0&&this.indeterminatedNodeSet.add(e.item.id)}}checkUncheckNodeChild(e,t){e.children&&e.children.forEach(n=>{this.indeterminatedNodeSet.delete(n.item.id),t&&!e.item.isDraft?this.checkedNodeSet.add(n.item.id):this.checkedNodeSet.delete(n.item.id),this.checkUncheckNodeChild(n,t)})}searchNode(e){let t;return this.fullNodeMap.forEach((n,i)=>{n.forEach(n=>{n.id===e&&(t=n.node)})}),t}setDraggedNode(e,t){this.draggedNode=t}unsetDraggedNode(e){this.draggedNode=null}onDragOverRoot(e){this.dragOverRoot=!0,e.preventDefault()}onDragLeaveRoot(){this.dragOverRoot=!1}onDropToRoot(e){this.dragOverRoot=!1,this.nodeModified.emit({dropType:B.a.Root,draggedNode:this.draggedNode,targetNode:null}),this.onDragEnd(e)}onDragOver(e,t){e.preventDefault(),this.draggedNodeHoveredType=NaN,this.hoveredNode&&t===this.hoveredNode?Date.now()-this.draggedNodeHoveredSince>this.delayBeforeHoveredNodeExpand&&(this.treeControl.isExpanded(t)||this.treeControl.expand(t)):(this.hoveredNode=t,this.draggedNodeHoveredSince=(new Date).getTime());const n=e.offsetY/e.target.clientHeight;n>.15&&n<.85?this.draggedNodeHoveredType=this.dropPlaceEnum.Into:n<.15?this.draggedNodeHoveredType=this.dropPlaceEnum.Before:n>.85&&(this.draggedNodeHoveredType=this.dropPlaceEnum.After)}onDrop(e,t){t!==this.draggedNode&&(this.draggedNodeHoveredType===this.dropPlaceEnum.Into?this.canDropInto(this.draggedNode,t)?this.draggedNode.item.parentId===t.item.id?this.showNotification.emit({type:this.notificationTypeEnum.Error,message:"You try drop to parent"}):this.nodeModified.emit({dropType:B.a.Into,draggedNode:this.draggedNode,targetNode:t}):this.showNotification.emit({type:this.notificationTypeEnum.Error,message:"Forbidden"}):this.draggedNodeHoveredType===this.dropPlaceEnum.Before&&this.canDropBefore(this.draggedNode,t)?this.nodeModified.emit({dropType:B.a.Before,draggedNode:this.draggedNode,targetNode:t}):this.draggedNodeHoveredType===this.dropPlaceEnum.After&&this.canDropAfter(this.draggedNode,t)&&this.nodeModified.emit({dropType:B.a.After,draggedNode:this.draggedNode,targetNode:t})),this.onDragEnd(e)}onDragStart(e,t){e.dataTransfer.setData("foo","bar")}onDragEnd(e){this.draggedNode=null,this.hoveredNode=null,this.draggedNodeHoveredSince=0,this.draggedNodeHoveredType=NaN,e.preventDefault()}onAddNode(e){this.nodeAdded.emit(e)}onRemoveNode(e){this.nodeRemoved.emit(e)}onCheckNode(e,t){this.checkUncheckNodeParent(e,t,!0),this.getCheckedNodeSet.emit(this.checkedNodeSet),this.cdr.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](g.ChangeDetectorRef),g["\u0275\u0275directiveInject"]($.a),g["\u0275\u0275directiveInject"](L.a))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["m-tree"]],contentQueries:function(e,t,n){if(1&e&&(g["\u0275\u0275contentQuery"](n,H,!0),g["\u0275\u0275contentQuery"](n,U,!0),g["\u0275\u0275contentQuery"](n,Q,!0)),2&e){let e;g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.addButtonTemplate=e.first),g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.addParaButtonTemplate=e.first),g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.nodeTitleTemplate=e.first)}},viewQuery:function(e,t){if(1&e&&g["\u0275\u0275viewQuery"](q,!0),2&e){let e;g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.tree=e.first)}},inputs:{rootNode:"rootNode",filterFn:"filterFn",filterText:"filterText",hiddenNodeSet:"hiddenNodeSet",orderingFn:"orderingFn",config:"config",canDrag:"canDrag",canDropInto:"canDropInto",canDropBefore:"canDropBefore",canDropAfter:"canDropAfter",customAddTemplate:"customAddTemplate",precheckedNodeSet:"precheckedNodeSet",showCheckboxes:"showCheckboxes",websocketNodeAdd:"websocketNodeAdd",websocketNodeRemove:"websocketNodeRemove",websocketNodeModifyEvent:"websocketNodeModifyEvent",nodeMap:"nodeMap",itemMap:"itemMap"},outputs:{nodeMapChange:"nodeMapChange",itemMapChange:"itemMapChange",itemMapRefresh:"itemMapRefresh",getCheckedNodeSet:"getCheckedNodeSet",selectNode:"selectNode",treeChanged:"treeChanged",nodeAdded:"nodeAdded",parametricNodeAdded:"parametricNodeAdded",nodeRemoved:"nodeRemoved",nodeModified:"nodeModified",showNotification:"showNotification"},features:[g["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:3,consts:[["class","m-card-warning",4,"ngIf"],["class","drop-parent",3,"drop-parent-select","dragover","drop","dragleave",4,"ngIf"],["class","basic-tree",3,"dataSource","treeControl",4,"ngIf"],["defaultAddButton",""],[1,"m-card-warning"],[1,"drop-parent",3,"dragover","drop","dragleave"],[1,"drop-text"],[1,"basic-tree",3,"dataSource","treeControl"],["treeSelector",""],[3,"display",4,"matTreeNodeDef"],[1,"mat-tree-node",3,"dragover","dragend","drop","dragstart"],["class","mat-icon-not",4,"ngIf"],["class","chevron-btn",4,"ngIf"],["color","primary","class","mr-1",3,"checked","indeterminate","disabled","change",4,"ngIf"],["mat-icon-button",""],["class","node-drag-icon light drag-handle",3,"mousedown","mouseup",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","node-delete-icon pointer","color","warn","matTooltip","Click to delete","matTooltipPosition","above",3,"click",4,"ngIf"],[3,"basic-tree-invisible",4,"ngIf"],[1,"mat-icon-not"],[1,"chevron-btn"],["matTreeNodeToggle","",1,"node-chevron-icon","drop-down","pointer",3,"click"],["color","primary",1,"mr-1",3,"checked","indeterminate","disabled","change"],[1,"node-drag-icon","light","drag-handle",3,"mousedown","mouseup"],["color","warn","matTooltip","Click to delete","matTooltipPosition","above",1,"node-delete-icon","pointer",3,"click"],["matTreeNodeOutlet",""],["class","block-add-node",4,"ngIf"],[1,"block-add-node"],[1,"group"],[1,"button-link-add",3,"click"],["class","node-add-icon f-w-600 pointer","color","primary","mat-icon-button","","matTooltip","Click to add a child","matTooltipPosition","above",3,"disabled","click",4,"ngIf"],["color","primary","mat-icon-button","","matTooltip","Click to add a child","matTooltipPosition","above",1,"node-add-icon","f-w-600","pointer",3,"disabled","click"]],template:function(e,t){1&e&&(g["\u0275\u0275template"](0,Y,2,0,"div",0),g["\u0275\u0275template"](1,G,3,2,"div",1),g["\u0275\u0275template"](2,oe,3,2,"mat-tree",2),g["\u0275\u0275template"](3,de,1,1,"ng-template",null,3,g["\u0275\u0275templateRefExtractor"])),2&e&&(g["\u0275\u0275property"]("ngIf",!t.nodeTitleTemplate),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.draggedNode&&t.draggedNode.item.parentId),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.rootNode))},directives:[i.m,u.b,u.e,u.a,u.g,a.a,i.r,l.a,d.a,h.a,u.f],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-tree-node[_ngcontent-%COMP%]{overflow:visible;border:2px solid transparent}.drop-center[_ngcontent-%COMP%]{border-color:var(--primary)!important;transition:border 125ms linear}.drop-before[_ngcontent-%COMP%]{border-top:30px solid var(--primary)!important;transition:border-top 125ms linear}.drop-after[_ngcontent-%COMP%]{border-bottom:30px solid var(--primary)!important;transition:border-bottom 125ms linear}.drag-start[_ngcontent-%COMP%]{border:1px dashed var(--info);color:#000}.drop-root[_ngcontent-%COMP%]{border:1px dashed var(--gray);margin-left:15px;height:30px}.drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab}.drop-parent[_ngcontent-%COMP%]{position:absolute;left:-90px;top:33%;z-index:100;background-color:rgba(85,120,235,.6);width:120px;height:120px;border-radius:50%;box-shadow:3px 3px 15px -5px rgba(0,0,0,.75)}.drop-parent-select[_ngcontent-%COMP%]{background-color:#5578eb;transition:.25s linear}.drop-text[_ngcontent-%COMP%]{height:60px;padding:45px 10px;color:#fff;font-size:18px;text-align:center;font-weight:400}.block-add-node[_ngcontent-%COMP%]{display:block;padding-left:22px;margin-top:-10px}input[type=text].default-disable[_ngcontent-%COMP%], input[type=text].default-disable[_ngcontent-%COMP%]:disabled{border:none;border-bottom:1px solid #ccc;background-color:hsla(0,0%,100%,.125)}.button-link-add[_ngcontent-%COMP%]{color:#3f51b5}.button-link-add[_ngcontent-%COMP%]:hover{cursor:pointer;border-bottom:1px solid #3f51b5}.mat-icon-not[_ngcontent-%COMP%]{display:block;height:40px;width:22px}"]}),e})();var ce=n("xmDL"),le=n("QyQT");function pe(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"mat-checkbox",7),g["\u0275\u0275listener"]("change",function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().checkFilter()}),g["\u0275\u0275elementStart"](1,"a",8),g["\u0275\u0275listener"]("click",function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().checkFilter()}),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("checked",e.hideUnsetParameters),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](e.hideUnsetParameters?"Show unset parameters":"Hide unset parameters")}}function me(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275element"](0,"i",9),g["\u0275\u0275elementStart"](1,"div",10),g["\u0275\u0275elementStart"](2,"div",11),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const n=t.node;return g["\u0275\u0275nextContext"]().selectParameter(n)}),g["\u0275\u0275text"](3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=t.node;g["\u0275\u0275classProp"]("la-cog",null===e.item.dependentId)("la-cogs",e.item.dependentId),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate1"](" ",e.item.title," ")}}function he(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"span",12),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"]("",e.data.project.title," does not contain any parameters")}}let ue=(()=>{class e{constructor(e,t,n,i){this.dialogRef=e,this.data=t,this.cdr=n,this.parametersService=i,this.loading$=new E.a(!0),this.hideUnsetParameters=!1,this.hiddenNodeSetId=new Set,this.unsetParameters=new Set}ngOnInit(){this.destroy$=new I.b,this.parametersService.parameterList$.asObservable().pipe(Object(P.a)(this.destroy$)).subscribe(e=>{e.forEach(e=>{0===e.item.values.length&&this.unsetParameters.add(e.item.id)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.loading$.complete()}selectParameter(e){this.dialogRef.close({paramNode:e,setup:this.data.setupNode})}checkFilter(){this.hideUnsetParameters=!this.hideUnsetParameters,this.hiddenNodeSetId=this.hideUnsetParameters?new Set(this.unsetParameters):new Set,this.cdr.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](s.g),g["\u0275\u0275directiveInject"](s.a),g["\u0275\u0275directiveInject"](g.ChangeDetectorRef),g["\u0275\u0275directiveInject"](ce.a))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["m-browse-params-dialog"]],viewQuery:function(e,t){if(1&e&&g["\u0275\u0275viewQuery"](se,!0),2&e){let e;g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.tree=e.first)}},decls:10,vars:7,consts:[["mat-dialog-title",""],["color","primary",3,"checked","change",4,"ngIf","ngIfElse"],["mat-dialog-content",""],[2,"max-height","80vh"],[3,"inputNodes$","hiddenNodeSet","canDrag","canAdd","canRemove"],["nodeTitleTemplate",""],["other_content",""],["color","primary",3,"checked","change"],["href","javascript:void(null)",3,"click"],[1,"las","dimmed","f-s-20"],[1,"new-in-place","monospace"],[1,"pointer","f-w-400",3,"click"],[1,"f-s-14"]],template:function(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"h1",0),g["\u0275\u0275text"](1,"Choose parameter"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](2,pe,3,2,"mat-checkbox",1),g["\u0275\u0275elementStart"](3,"div",2),g["\u0275\u0275elementStart"](4,"perfect-scrollbar",3),g["\u0275\u0275elementStart"](5,"m-dynamic-tree-map",4),g["\u0275\u0275template"](6,me,4,5,"ng-template",null,5,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](8,he,2,1,"ng-template",null,6,g["\u0275\u0275templateRefExtractor"])),2&e){const e=g["\u0275\u0275reference"](9);g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.data.paramData.length>0)("ngIfElse",e),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("inputNodes$",t.parametersService.parameterTree$)("hiddenNodeSet",t.hiddenNodeSetId)("canDrag",!1)("canAdd",!1)("canRemove",!1)}},directives:[s.h,i.m,s.e,S.b,le.a,d.a],styles:[".tree-label[_ngcontent-%COMP%]{line-height:40px}mat-nested-tree-node[_ngcontent-%COMP%], mat-tree-node[_ngcontent-%COMP%]{min-height:30px;height:35px}.m-badge[_ngcontent-%COMP%]{min-width:40px}  .ps__rail-x{visibility:hidden}.pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-tree-node[_ngcontent-%COMP%]{overflow:visible;border:2px solid transparent}.dialog-tree-invisible[_ngcontent-%COMP%]{display:none}.dialog-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .dialog-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.mat-tree-node[_ngcontent-%COMP%]{color:#4a7cbe;cursor:pointer}"]}),e})();var fe=n("PSD3"),ge=n.n(fe),ve=n("wg/d"),be=n("65F8"),Se=n("lPHq"),Ne=n("UTw3"),xe=n("9pgZ"),ye=n("7Z50"),we=n("cdP3"),Ce=n("ihCf");function ke(e,t){if(1&e&&g["\u0275\u0275element"](0,"i",26),2&e){const e=g["\u0275\u0275nextContext"]().node,t=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("matTooltip",t.tooltipTextShow(e))}}function Ie(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"input",24),g["\u0275\u0275listener"]("ngModelChange",function(e){return t.node.item.title=e})("click",function(){g["\u0275\u0275restoreView"](e);const n=t.node,i=g["\u0275\u0275nextContext"]();return n.item.id>0?i.setActiveTreeNode(n):null})("keyup.escape",function(n){g["\u0275\u0275restoreView"](e);const i=t.node;return g["\u0275\u0275nextContext"]().revertTreeNode(i),n.target.blur()})("keyup.enter",function(e){return e.target.blur()})("blur",function(n){g["\u0275\u0275restoreView"](e);const i=t.node;return g["\u0275\u0275nextContext"]().invalidateTreeNode(i,0===i.item.id?null:"title",n.target.value)}),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](1,ke,1,1,"i",25)}if(2&e){const e=t.node,n=g["\u0275\u0275nextContext"]();g["\u0275\u0275styleProp"]("width",e.item.title.length?e.item.title.length+2:15,"ch"),g["\u0275\u0275classProp"]("changed",0===e.item.id||n.pristineSetupStep.get(e.item.id)&&e.item.title!==n.pristineSetupStep.get(e.item.id).title)("draft",e.item.isDraft)("m-selected",n.activeNode&&e.item.id===n.activeNode.item.id),g["\u0275\u0275propertyInterpolate1"]("id","input-setup-",e.item.id,""),g["\u0275\u0275property"]("placeholder",0===e.item.title.length?"Setup step title":null)("ngModel",e.item.title),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",n.tooltipTextShow(e))}}function Ee(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",54),g["\u0275\u0275elementStart"](1,"mat-icon",55),g["\u0275\u0275text"](2," add "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"a",56),g["\u0275\u0275listener"]("click",function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](3).changeParameter()}),g["\u0275\u0275text"](4," Add parameter "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function Te(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"div",52),g["\u0275\u0275template"](2,Ee,5,0,"div",53),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2),t=g["\u0275\u0275reference"](35);g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",e.parametersList.size>0)("ngIfElse",t)}}function Me(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"mat-icon",58),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](3);return t.deleteParameter(t.activeNode)}),g["\u0275\u0275text"](1," close "),g["\u0275\u0275elementEnd"]()}}function Pe(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"div",52),g["\u0275\u0275elementStart"](2,"div",54),g["\u0275\u0275elementStart"](3,"a",56),g["\u0275\u0275listener"]("click",function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"](2).changeParameter()}),g["\u0275\u0275text"](4),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](5,Me,2,0,"mat-icon",57),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](4),g["\u0275\u0275textInterpolate1"](" ",e.activeParam.item.title," "),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e.activeNode.item.parameterId)}}function Oe(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementContainer"](1,48),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](2),t=g["\u0275\u0275reference"](31),n=g["\u0275\u0275reference"](29);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)>3&&e.showMoreAttachments?t:n)}}function Ae(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"as-split-area",14),g["\u0275\u0275elementStart"](1,"div",27),g["\u0275\u0275elementStart"](2,"perfect-scrollbar",16),g["\u0275\u0275elementStart"](3,"div",28),g["\u0275\u0275elementStart"](4,"div",29),g["\u0275\u0275elementStart"](5,"input",30),g["\u0275\u0275listener"]("ngModelChange",function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().activeNode.item.title=t})("keyup.escape",function(t){g["\u0275\u0275restoreView"](e);const n=g["\u0275\u0275nextContext"]();return n.revertTreeNodeTitle(n.activeNode),t.target.blur()})("blur",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]();return t.invalidateTreeNode(t.activeNode,"title")}),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",31),g["\u0275\u0275elementStart"](7,"div",32),g["\u0275\u0275listener"]("click",function(){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().resetActiveTreeNode()}),g["\u0275\u0275element"](8,"i",33),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",34),g["\u0275\u0275elementStart"](10,"span",35),g["\u0275\u0275text"](11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](12,"ul",36),g["\u0275\u0275elementStart"](13,"li"),g["\u0275\u0275elementStart"](14,"div",37),g["\u0275\u0275elementStart"](15,"div",38),g["\u0275\u0275elementStart"](16,"label",39),g["\u0275\u0275text"](17,"Description"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"textarea",40),g["\u0275\u0275listener"]("ngModelChange",function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().activeNode.item.description=t})("keyup.escape",function(t){g["\u0275\u0275restoreView"](e);const n=g["\u0275\u0275nextContext"]();return n.revertTreeNodeDescription(n.activeNode),t.target.blur()})("blur",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]();return t.invalidateTreeNode(t.activeNode,"description")}),g["\u0275\u0275text"](19,"                                            "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](20,"div",41),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](21,"li"),g["\u0275\u0275elementStart"](22,"div",37),g["\u0275\u0275elementStart"](23,"div",42),g["\u0275\u0275elementStart"](24,"label",43),g["\u0275\u0275text"](25,"Parameter"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerStart"](26,44),g["\u0275\u0275template"](27,Te,3,2,"ng-container",45),g["\u0275\u0275template"](28,Pe,6,2,"ng-container",45),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](29,"li"),g["\u0275\u0275elementStart"](30,"div",37),g["\u0275\u0275elementStart"](31,"div",42),g["\u0275\u0275elementStart"](32,"label",39),g["\u0275\u0275text"](33,"Attachments"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](34,"div",37),g["\u0275\u0275elementStart"](35,"div",46),g["\u0275\u0275template"](36,Oe,2,1,"ng-container",47),g["\u0275\u0275elementContainer"](37,48),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](38,"li",49),g["\u0275\u0275elementStart"](39,"div",37),g["\u0275\u0275elementStart"](40,"div",50),g["\u0275\u0275elementStart"](41,"label",43),g["\u0275\u0275text"](42,"Created At"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](43,"input",51),g["\u0275\u0275pipe"](44,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](45,"div",50),g["\u0275\u0275elementStart"](46,"label",43),g["\u0275\u0275text"](47,"Updated At"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](48,"input",51),g["\u0275\u0275pipe"](49,"date"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"](),t=g["\u0275\u0275reference"](33);g["\u0275\u0275property"]("size",e.activeNode?30:0),g["\u0275\u0275advance"](5),g["\u0275\u0275classProp"]("changed",e.treeNodeChanged(e.activeNode,"title")),g["\u0275\u0275property"]("placeholder",0===e.activeNode.item.title.length?"Parameter title":null)("ngModel",e.activeNode.item.title),g["\u0275\u0275advance"](6),g["\u0275\u0275textInterpolate1"](" #",e.activeNode.item.id," "),g["\u0275\u0275advance"](7),g["\u0275\u0275classProp"]("changed",e.treeNodeChanged(e.activeNode,"description")),g["\u0275\u0275property"]("ngModel",e.activeNode.item.description),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngSwitch",!!e.activeParam),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitchCase",!1),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitchCase",!0),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("ngIf",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)>0),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",0===(null==e.activeFileAttachments?null:e.activeFileAttachments.length)?t:null),g["\u0275\u0275advance"](6),g["\u0275\u0275propertyInterpolate"]("value",g["\u0275\u0275pipeBind2"](44,16,e.activeNode.item.createdAt,"yyyy-MM-dd HH:mm")),g["\u0275\u0275advance"](5),g["\u0275\u0275propertyInterpolate"]("value",g["\u0275\u0275pipeBind2"](49,19,e.activeNode.item.updatedAt,"yyyy-MM-dd HH:mm"))}}function De(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"img",70),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](2).index;return g["\u0275\u0275nextContext"](2).openGallery(t)}),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"](2).$implicit;g["\u0275\u0275propertyInterpolate1"]("src","/download/attachments/",e.thumbFilename,"",g["\u0275\u0275sanitizeUrl"])}}function je(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",71),g["\u0275\u0275text"](1,"File"),g["\u0275\u0275elementEnd"]())}const Fe=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Delete",confirmButtonColor:"#f4516c",confirmButtonClass:"btn-danger",showCancelButton:!0,heightAuto:!1}};function $e(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",64),g["\u0275\u0275elementContainerStart"](1,44),g["\u0275\u0275template"](2,De,1,1,"img",65),g["\u0275\u0275elementStart"](3,"a",66),g["\u0275\u0275template"](4,je,2,0,"div",67),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementStart"](5,"div",68),g["\u0275\u0275listener"]("confirm",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().$implicit,n=g["\u0275\u0275nextContext"](2);return n.unlinkFileAttachment(t.id,n.activeNode.item.id)}),g["\u0275\u0275elementStart"](6,"mat-icon",69),g["\u0275\u0275text"](7,"clear"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275property"]("matTooltip",e.originalFilename),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitchCase",!0),g["\u0275\u0275advance"](1),g["\u0275\u0275propertyInterpolate1"]("href","/download/attachments/",e.filename,"",g["\u0275\u0275sanitizeUrl"]),g["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitchCase",!1),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("swal",g["\u0275\u0275pureFunction1"](7,Fe,"Delete <b>"+e.originalFilename+"</b>?"))}}function _e(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275template"](1,$e,8,9,"div",63),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.index;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",e<3)}}function Re(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",72),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"](2);return t.showMoreAttachments=!t.showMoreAttachments}),g["\u0275\u0275elementStart"](1,"div",73),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" + ",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)-3," ")}}function Ve(e,t){1&e&&g["\u0275\u0275elementContainer"](0)}function Le(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",59),g["\u0275\u0275template"](1,_e,2,1,"ng-container",60),g["\u0275\u0275template"](2,Re,3,1,"div",61),g["\u0275\u0275template"](3,Ve,1,0,"ng-container",62),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"](),t=g["\u0275\u0275reference"](33);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",e.activeFileAttachments),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)>3),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",t)}}function Be(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"img",70),g["\u0275\u0275listener"]("click",function(){g["\u0275\u0275restoreView"](e);const t=g["\u0275\u0275nextContext"]().index;return g["\u0275\u0275nextContext"](2).openGallery(t)}),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275propertyInterpolate1"]("src","/download/attachments/",e.thumbFilename,"",g["\u0275\u0275sanitizeUrl"])}}function ze(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",71),g["\u0275\u0275text"](1,"File"),g["\u0275\u0275elementEnd"]())}function Je(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",64),g["\u0275\u0275elementContainerStart"](1,44),g["\u0275\u0275template"](2,Be,1,1,"img",65),g["\u0275\u0275elementStart"](3,"a",66),g["\u0275\u0275template"](4,ze,2,0,"div",67),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"](),g["\u0275\u0275elementStart"](5,"div",68),g["\u0275\u0275listener"]("confirm",function(){g["\u0275\u0275restoreView"](e);const n=t.$implicit,i=g["\u0275\u0275nextContext"](2);return i.unlinkFileAttachment(n.id,i.activeNode.item.id)}),g["\u0275\u0275elementStart"](6,"mat-icon",69),g["\u0275\u0275text"](7,"clear"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;g["\u0275\u0275property"]("matTooltip",e.originalFilename),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitchCase",!0),g["\u0275\u0275advance"](1),g["\u0275\u0275propertyInterpolate1"]("href","/download/attachments/",e.filename,"",g["\u0275\u0275sanitizeUrl"]),g["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngSwitchCase",!1),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("swal",g["\u0275\u0275pureFunction1"](7,Fe,"Delete <b>"+e.originalFilename+"</b>?"))}}function He(e,t){1&e&&g["\u0275\u0275elementContainer"](0)}function Ue(e,t){if(1&e&&(g["\u0275\u0275template"](0,Je,8,9,"div",74),g["\u0275\u0275template"](1,He,1,0,"ng-container",62)),2&e){const e=g["\u0275\u0275nextContext"](),t=g["\u0275\u0275reference"](33);g["\u0275\u0275property"]("ngForOf",e.activeFileAttachments),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngTemplateOutlet",t)}}function Qe(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",79),g["\u0275\u0275element"](1,"mat-progress-spinner",80),g["\u0275\u0275pipe"](2,"async"),g["\u0275\u0275elementStart"](3,"div",81),g["\u0275\u0275text"](4),g["\u0275\u0275pipe"](5,"async"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("value",g["\u0275\u0275pipeBind1"](2,2,e.value)),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](5,4,e.value),"% ")}}function qe(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275template"](1,Qe,6,6,"div",78),g["\u0275\u0275pipe"](2,"async"),g["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",g["\u0275\u0275pipeBind1"](2,1,e.value))}}function Ye(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"button",82),g["\u0275\u0275listener"]("click",function(){return(0,t.openFileSelector)()}),g["\u0275\u0275elementStart"](1,"mat-icon",83),g["\u0275\u0275text"](2,"add"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]())}function Ge(e,t){if(1&e){const e=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275template"](0,qe,3,3,"ng-container",60),g["\u0275\u0275pipe"](1,"keyvalue"),g["\u0275\u0275elementStart"](2,"div",75),g["\u0275\u0275elementStart"](3,"ngx-file-drop",76),g["\u0275\u0275listener"]("onFileDrop",function(t){return g["\u0275\u0275restoreView"](e),g["\u0275\u0275nextContext"]().dropped(t)}),g["\u0275\u0275template"](4,Ye,3,0,"ng-template",77),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("ngForOf",g["\u0275\u0275pipeBind1"](1,1,e.attachmentsProgress))}}function Ze(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"span",84),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){const e=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"]("",e.project.title," does not contain any parameters")}}let Xe=(()=>{class e{constructor(e,t,n,i,r,o,a,d,s,c,l,p,m,h,u,f){this.route=e,this.router=t,this.cdr=n,this.lightbox=i,this.hyperionAttachmentService=r,this.hyperionSetupService=o,this.hyperionParameterService=a,this.notificationService=d,this.render=s,this.uploadService=c,this.websocketService=l,this.windowRefService=p,this.dialog=m,this.accountService=h,this.setupService=u,this.parameterService=f,this.destroy$=new I.b,this.setup$=new E.a(null),this.ready$=new E.a(!1),this.pristineSetupStep=new Map,this.setupList=new Map,this.rootLevelSetupSteps=new Map,this.activeNodeId=-1,this.attachments=new Map,this.showMoreAttachments=!1,this.attachmentsProgress=new Map,this.activeAlbum=[],this.parametersTree=new Map,this.dimmedNodeSetId=new Set,this.hiddenNodeSetId=new Set}ngOnInit(){this.accountService.profile$.asObservable().pipe(Object(P.a)(this.destroy$)).subscribe(e=>this.profile=e),Object(T.b)([this.setupService.flatSetup$,this.setupService.setupList$,this.parameterService.parameterTree$,this.parameterService.parameterList$]).pipe(Object(O.a)(([e,t,n,i])=>!!(e&&t&&n&&i)),Object(P.a)(this.destroy$)).subscribe(([e,t,n,i])=>{this.pristineSetupStep.clear(),e.forEach(e=>this.pristineSetupStep.set(e.id,J.m.fromJson(e.toJson()))),this.setupList=t,this.parametersTree=n,this.parametersList=i,this.ready$.next(!0)}),this.route.data.pipe(Object(P.a)(this.destroy$)).subscribe(e=>this.initialize(e.activeProject)),this.setupService.setupTree$.asObservable().pipe(Object(O.a)(e=>!!e),Object(P.a)(this.destroy$)).subscribe(e=>{this.rootLevelSetupSteps.clear(),e.forEach(e=>this.rootLevelSetupSteps.set(e.item.id,e.item))}),Object(T.b)(this.route.data,this.route.queryParamMap).pipe(Object(P.a)(this.destroy$)).subscribe(([e,t])=>{this.activeQueryId=parseInt(t.get("id"),10)}),Object(M.a)(this.websocketService.setupStepUpdated,this.websocketService.setupStepDeleted).pipe(Object(P.a)(this.destroy$),Object(O.a)(e=>e.data.projectId===this.project.id)).subscribe(e=>{const t=new Ne.i;t.item=e.data,e instanceof be.n?-1!==this.activeNodeId&&t.item.id===this.activeNodeId&&this.profile.username!==e.actorName&&ge.a.fire({type:"information",title:"Your active node has been changed by "+e.actorName,confirmButtonText:"ok"}).then(e=>{void 0!==e.value&&this.setActiveTreeNode(t)}):e instanceof be.m&&this.activeNode&&t.item.id===this.activeNode.item.id&&this.profile.username!==e.actorName&&ge.a.fire({type:"warning",title:"Your active node has been deleted by "+e.actorName,confirmButtonText:"ok"}).then(e=>{void 0!==e.value&&this.resetActiveTreeNode()})}),Object(M.a)(this.websocketService.attachmentLinked,this.websocketService.attachmentUnlinked).pipe(Object(P.a)(this.destroy$),Object(O.a)(e=>e.link.owner===J.b.SetupStep)).subscribe(e=>{if(!this.attachments.has(e.link.linkedId))return;const t=this.attachments.get(e.link.linkedId),n=t.findIndex(t=>t.id===e.attachment.id);e instanceof be.a?n>=0?t[n]=e.attachment:t.push(e.attachment):e instanceof be.b&&-1!==n&&t.splice(n,1),this.attachments.set(e.link.linkedId,t),this.activeNode.item.id&&this.activeNode.item.id===e.link.linkedId&&(this.activeFileAttachments=t),this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.setup$.complete(),this.ready$.complete()}initialize(e){this.project=e,this.activeNode=null,this.activeNodeId=-1}openGallery(e){this.activeFileAttachments.filter(e=>e.contentType.includes("image")).forEach(e=>{this.activeAlbum.push({src:"/download/attachments/"+e.filename,caption:e.originalFilename,thumb:"/download/attachments/"+e.thumbFilename})}),this.lightbox.open(this.activeAlbum,e)}getAllChildrenId(e){return e.children.reduce((e,t)=>[...e,[t.item.id],t.children.map(e=>this.getAllChildrenId(e)).reduce((e,t)=>e.concat(t),[])],[]).concat(e.item.id).reduce((e,t)=>e.concat(t),[])}getAllParentId(e){const t=[];for(;e&&0!==e.item.parentId;){const n=this.setupList.get(e.item.parentId);t.push(n?n.item.id:null),e=n}return t.filter(e=>!!e)}applyFilter(e){this.dimmedNodeSetId=new Set(Array.from(this.pristineSetupStep).map(t=>this.filterCallback(t[1],e)?null:t[1].id)),this.hiddenNodeSetId=new Set(Array.from(this.setupList).filter(e=>this.getAllChildrenId(e[1]).every(e=>this.dimmedNodeSetId.has(e))).map(e=>e[1].item.id)),this.expandAllTreeNodes()}showChildrenBeforeAddDraftNode(e){e?e.children.forEach(e=>this.hiddenNodeSetId.delete(e.item.id)):this.hiddenNodeSetId.forEach(e=>{null===this.pristineSetupStep.get(e).parentId&&this.hiddenNodeSetId.delete(e)}),this.cdr.detectChanges()}initializeTreeNode(e){const t=new Ne.i,n=new J.m;return n.id=0,n.parentId=e?e.item.id:null,n.projectId=this.project.id,n.title="",n.description=null,n.orderNum=e?e.children.length?e.children.slice(-1)[0].item.orderNum+1e3:1e3:this.rootLevelSetupSteps.size?[...this.rootLevelSetupSteps.entries()].map(e=>e[1]).sort((e,t)=>e.orderNum>t.orderNum?1:-1).slice(-1)[0].orderNum+1e3:1e3,t.item=n,t.children=[],t}treeNodeHasDraftChildren(e){return e?e.children.filter(e=>0===e.item.id).length>0:this.rootLevelSetupSteps.has(0)}treeNodeChanged(e,t){const n=this.pristineSetupStep.get(e.item.id);if(t&&"title"!==t&&"description"!==t&&"isDraft"!==t)return!1;if(!n)return!0;switch(t){case"title":return(n.title||"").trim()!==(e.item.title||"").trim();case"description":return(n.description||"").trim()!==(e.item.description||"").trim();case"isDraft":return n.isDraft!==e.item.isDraft;default:return(n.title||"").trim()!==(e.item.title||"").trim()||(n.description||"").trim()!==(e.item.description||"").trim()}}canSubmitTreeNode(e,t){if(t&&"title"!==t&&"description"!==t&&"isDraft"!==t)return!1;switch(t){case"description":case"isDraft":return!0;case"title":default:return(e.item.title||"").trim().length>0}}addDraftTreeNode(e){const t=e?this.setupList.get(e):null;this.resetActiveTreeNode(),t&&this.showChildrenBeforeAddDraftNode(t);const n=this.initializeTreeNode(t);t?this.setupService.addDraftSetupStep(n,t):this.setupService.addDraftSetupStep(n),this.cdr.detectChanges(),this.windowRefService.focusElementById("input-setup-0",100)}revertTreeNode(e){const t=this.pristineSetupStep.get(e.item.id);e.item.title=t?t.title:"",e.item.description=t?t.description:null,this.activeNode=null,this.activeNodeId=-1,this.cdr.detectChanges()}revertTreeNodeTitle(e){const t=this.pristineSetupStep.get(e.item.id);e.item.title=t?t.title:"",this.cdr.detectChanges()}revertTreeNodeDescription(e){const t=this.pristineSetupStep.get(e.item.id);e.item.description=t?t.description:null,this.cdr.detectChanges()}invalidateTreeNode(e,t,n){const i=this.pristineSetupStep.get(e.item.id);null!==t&&"title"!==t||!n||(e.item.title=n.trim(),0!==(e.item.title||"").trim().length)?this.treeNodeChanged(e,t)&&this.canSubmitTreeNode(e,t)&&(0===e.item.id?this.createTreeNode(e):this.updateSetupStep(e,t)):e.item.title=i?i.title:""}setActiveTreeNode(e){e.item.id&&this.router.navigate([],{queryParams:{id:e.item.id},replaceUrl:!0,queryParamsHandling:"merge"}),this.activeNode=e,this.activeNodeId=e.item.id,this.setActiveParamNode(e),this.showMoreAttachments=!1,this.attachments.has(this.activeNode.item.id)&&(this.activeFileAttachments=this.attachments.get(this.activeNode.item.id)),this.getLinkedAttachments(this.activeNode.item.id)}resetActiveTreeNode(){this.activeNode=null,this.activeNodeId=-1,this.activeParam=null,this.activeQueryId=null,this.cdr.detectChanges()}getOrderNum(e,t){switch(t){case B.a.Before:if(e.item.parentId){const t=this.setupList.get(e.item.parentId).children.indexOf(e);return 0===t?1e3:Math.round((e.item.orderNum+this.setupList.get(e.item.parentId).children[t-1].item.orderNum)/2)}{const t=[...this.rootLevelSetupSteps.entries()].map(e=>e[1]).findIndex(t=>t.id===e.item.id);return 0===t?1e3:Math.round((e.item.orderNum+[...this.rootLevelSetupSteps.entries()].map(e=>e[1])[t-1].orderNum)/2)}case B.a.After:if(e.item.parentId){const t=this.setupList.get(e.item.parentId).children.indexOf(e);return t===this.setupList.get(e.item.parentId).children.length-1?e.item.orderNum+1e3:Math.round((e.item.orderNum+this.setupList.get(e.item.parentId).children[t+1].item.orderNum)/2)}{const t=[...this.rootLevelSetupSteps.entries()].map(e=>e[1]).findIndex(t=>t.id===e.item.id);return t===this.rootLevelSetupSteps.size-1?e.item.orderNum+1e3:Math.round((e.item.orderNum+[...this.rootLevelSetupSteps.entries()].map(e=>e[1])[t+1].orderNum)/2)}}}dropped(e){for(const t of e)if(t.fileEntry.isFile){const e=t.fileEntry,n=new E.a(0);this.attachmentsProgress.set(t.fileEntry.name,n),e.file(e=>{this.uploadService.uploadAttachment(e,J.b.SetupStep,this.activeNode.item.id).pipe(Object(P.a)(this.destroy$),Object(O.a)(e=>e.type===k.d.UploadProgress),Object(A.a)(()=>{n.complete(),this.attachmentsProgress.delete(e.name),this.cdr.detectChanges()})).subscribe(e=>{const t=Math.round(100*e.loaded/e.total);n.next(t)},t=>this.notificationService.warning("Failed to upload attachment error: "+e.name))})}}createTreeNode(e){const t=new Se.a;t.parentId=e.item.parentId,t.title=null===e.item.title?null:e.item.title.trim(),t.description=null===e.item.description?null:e.item.description.trim(),t.isDraft=!1,t.orderNum=e.item.orderNum,this.hyperionSetupService.createSetupStep(t,e.item.projectId).pipe(Object(P.a)(this.destroy$)).subscribe(e=>{this.activeQueryId=e.id,this.activeNode={children:[],item:{description:e.description,id:e.id,isDraft:e.isDraft,orderNum:e.orderNum,parameterId:e.parameterId,parentId:e.parentId,projectId:e.projectId,rev:e.rev,title:e.title,createdAt:e.createdAt,updatedAt:e.updatedAt}},this.activeNodeId=e.id,this.notificationService.success("Setup step created"),this.setupService.clearDraftNode(e.parentId)},e=>{if(e instanceof Ne.a){let t=null;switch(e.error){case Se.b.ParentNotExists:t="Setup step does not exist";break;case Se.b.ProjectNotExists:t="Project does not exist";break;case Se.b.TitleAlreadyExists:t="Setup step title already exists";break;case Se.b.HasChildren:t="Setup step has children"}this.notificationService.error(t||e)}else this.notificationService.error(e)})}updateSetupStep(e,t,n,i){const r=new Se.d,o=this.pristineSetupStep.get(e.item.id);r.parentId=n?-1===n?null:n:e.item.parentId!==o.parentId?e.item.parentId:o.parentId,r.orderNum=i||(e.item.orderNum!==o.orderNum?e.item.orderNum:o.orderNum),e.item.title===o.title||null!==t&&"title"!==t||(r.title=e.item.title),e.item.description===o.description||null!==t&&"description"!==t||(r.description=e.item.description),e.item.isDraft===o.isDraft||null!==t&&"isDraft"!==t||(r.isDraft=e.item.isDraft),this.hyperionSetupService.updateSetupStep(r,e.item.id).pipe(Object(P.a)(this.destroy$)).subscribe(e=>{this.notificationService.success("Setup step updated")},e=>{if(e instanceof Ne.a){let t=null;switch(e.error){case Se.b.ParentNotExists:t="Setup step does not exist";break;case Se.b.ProjectNotExists:t="Project does not exist";break;case Se.b.TitleAlreadyExists:t="Setup step title already exists";break;case Se.b.HasChildren:t="Setup step has children"}this.notificationService.error(t||e)}else this.notificationService.error(e)})}deleteSetupStep(e){if(0===e.item.id)return this.setupService.clearDraftNode(e.item.parentId?e.item.parentId:null),e===this.activeNode&&(this.activeNode=null,this.activeNodeId=-1),void this.cdr.detectChanges();this.hyperionSetupService.deleteSetupStep(e.item.id).pipe(Object(P.a)(this.destroy$)).subscribe(e=>{this.activeNode=null,this.activeNodeId=-1,this.notificationService.success("Setup step deleted")},e=>{e instanceof Ne.a&&e.error===Se.b.HasChildren?this.notificationService.warning("Setup step can not be deleted because has children"):e instanceof Ne.g?(this.notificationService.warning("Setup step is not found. Maybe it was deleted already"),this.cdr.detectChanges()):this.notificationService.error("Probably used in test case or other server error")})}getLinkedAttachments(e){0!==e&&this.hyperionAttachmentService.getLinkedAttachments(J.b.SetupStep,e).pipe(Object(P.a)(this.destroy$)).subscribe(t=>{this.attachments.set(e,t.items),this.activeFileAttachments=t.items,this.cdr.detectChanges()},e=>this.notificationService.error(e))}unlinkFileAttachment(e,t){this.hyperionAttachmentService.deleteAttachmentLink(e,J.b.SetupStep,t).pipe(Object(P.a)(this.destroy$)).subscribe(t=>{this.activeFileAttachments=this.activeFileAttachments.filter(t=>t.id!==e),this.cdr.detectChanges()},e=>this.notificationService.error(e))}expandAllTreeNodes(){this.dynamicTree.expandTreeNodes()}collapseAllTreeNodes(){this.dynamicTree.collapseTreeNodes()}filterCallback(e,t){return!t||e.title.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}orderingCallback(e,t){return e.item.orderNum>t.item.orderNum?1:-1}updateAfterDrop(e){const t=e.dropType,n=e.draggedNode,i=e.targetNode;let r=null,o=null;switch(t){case B.a.Before:case B.a.After:o=i.item.parentId,r=this.getOrderNum(i,t);break;case B.a.Into:o=i.item.id,r=i.children.length?i.children.slice(-1)[0].item.orderNum+1e3:1e3;break;case B.a.Root:o=-1,r=[...this.rootLevelSetupSteps.entries()].map(e=>e[1]).sort((e,t)=>e.orderNum>t.orderNum?1:-1).slice(-1)[0].orderNum+1e3}this.updateSetupStep(n,null,o,r)}showNotification(e){const t=e.message;switch(e.type){case $.b.Success:this.notificationService.success(t);break;case $.b.Info:this.notificationService.info(t);break;case $.b.Warning:this.notificationService.warning(t);break;case $.b.Error:this.notificationService.error(t)}}updateParameter(e,t){this.hyperionSetupService.linkSetupStepToParameter(new ve.a,e.item.id,t).pipe(Object(P.a)(this.destroy$)).subscribe(t=>{this.notificationService.success("Parameter linked"),e.item.parameterId=t.parameterId,this.setActiveParamNode(e)})}deleteParameter(e){this.hyperionSetupService.unlinkSetupStepFromParameter(new ve.a,e.item.id).pipe(Object(P.a)(this.destroy$)).subscribe(e=>{this.notificationService.success("Parameter unlinked"),this.activeParam=null})}changeParameter(){this.dialog.open(ue,{width:"850px",autoFocus:!1,data:{project:this.project,paramData:this.getMapAsIterable(this.parametersTree),setupNode:this.activeNode}}).afterClosed().pipe(Object(P.a)(this.destroy$)).subscribe(e=>{e&&e.paramNode&&this.updateParameter(e.setup,e.paramNode.item.id)})}getMapAsIterable(e){const t=[];return e.forEach(e=>t.push(e)),t.sort((e,t)=>e.id-t.id),t}setActiveParamNode(e){this.activeParam=e.item.parameterId?this.parametersList.get(e.item.parameterId):null}focusSetup(){this.activeQueryId&&this.ready$.asObservable().pipe(Object(O.a)(e=>!!e),Object(P.a)(this.destroy$)).subscribe(()=>{const e=this.setupList.get(this.activeQueryId);if(e){const t=this.getAllParentId(e);this.dynamicTree.expandTreeNodesById(t),setTimeout(()=>{const t=this.render.selectRootElement("#input-setup-"+e.item.id);setTimeout(()=>t.focus(),10),this.setActiveTreeNode(e)},20)}else this.router.navigate([],{queryParams:{id:null},replaceUrl:!0,queryParamsHandling:"merge"})})}tooltipTextShow(e){var t;if((null===(t=this.parametersList)||void 0===t?void 0:t.size)>0){if(!(e.item.parameterId&&this.parametersList.get(e.item.parameterId)&&this.parametersList.get(e.item.parameterId).item.dependentId))return null;const t=this.parametersList.get(e.item.parameterId).item,n=this.parametersList.get(this.parametersList.get(e.item.parameterId).item.dependentId).item;return this.isSetDependOnParameter(e,n.id)?null:"["+t.title+"] parameter depends on ["+n.title+"] parameter which is not set for any of the parent setup steps"}}isSetDependOnParameter(e,t){return e.item.parameterId===t||!!e.item.parentId&&this.isSetDependOnParameter(this.setupList.get(e.item.parentId),t)}afterTreeRendered(e){e&&this.focusSetup()}}return e.\u0275fac=function(t){return new(t||e)(g["\u0275\u0275directiveInject"](o.a),g["\u0275\u0275directiveInject"](o.g),g["\u0275\u0275directiveInject"](g.ChangeDetectorRef),g["\u0275\u0275directiveInject"](f.Lightbox),g["\u0275\u0275directiveInject"](j.a),g["\u0275\u0275directiveInject"](F.a),g["\u0275\u0275directiveInject"](_.a),g["\u0275\u0275directiveInject"]($.a),g["\u0275\u0275directiveInject"](g.Renderer2),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](V.a),g["\u0275\u0275directiveInject"](L.a),g["\u0275\u0275directiveInject"](s.b),g["\u0275\u0275directiveInject"](xe.a),g["\u0275\u0275directiveInject"](ye.a),g["\u0275\u0275directiveInject"](ce.a))},e.\u0275cmp=g["\u0275\u0275defineComponent"]({type:e,selectors:[["m-setup-page"]],viewQuery:function(e,t){if(1&e&&(g["\u0275\u0275viewQuery"](D.b,!0),g["\u0275\u0275staticViewQuery"](le.a,!0)),2&e){let e;g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.trigger=e.first),g["\u0275\u0275queryRefresh"](e=g["\u0275\u0275loadQuery"]())&&(t.dynamicTree=e.first)}},decls:36,vars:13,consts:[[1,"m-portlet","mb-0"],[1,"m-portlet__head","compact","align-items-center"],[1,"d-inline-flex"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"ml-2","m-button-group"],["mat-raised-button","",3,"click"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"pr-2"],["floatLabel","never",2,"width","300px"],["matInput","","placeholder","Type to filter...",3,"ngModel","ngModelChange","keyup"],[1,"m-portlet__nav-item"],[1,"d-flex"],["unit","percent","direction","horizontal"],[3,"size"],[1,"pt-2","col-12","left-split-content"],[2,"height","70vh"],[3,"inputNodes$","flatNodes","hiddenNodeSet","dimmedNodeSet","canDrag","nodeAdded","nodeRemoved","nodeModified","showNotification","treeRendered"],["nodeTitleTemplate",""],[3,"size",4,"ngIf"],["lessAttachments",""],["moreAttachments",""],["uploadButton",""],["notParameters",""],["type","text",1,"monospace","new-in-place",2,"max-width","100ch !important","padding-left","5px !important",3,"id","placeholder","ngModel","ngModelChange","click","keyup.escape","keyup.enter","blur"],["class","las la-exclamation-triangle c-warning f-s-20","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"las","la-exclamation-triangle","c-warning","f-s-20",3,"matTooltip"],[1,"col","pt-3","right-split-content"],[1,"sticky-block"],[1,"title-container"],["matInput","","type","text",1,"form-control","inline-block",2,"max-width","65%",3,"placeholder","ngModel","ngModelChange","keyup.escape","blur"],[1,"block","text-right",2,"width","35%"],[1,"",3,"click"],[1,"las","la-times"],[1,"block","text-left"],[1,"sticky-id","dimmed"],[1,"basic-tree","pl-0"],[1,"row"],[1,"col-md-12"],[1,"f-w-600","block"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","6","placeholder","Put some text here",1,"form-control",3,"ngModel","ngModelChange","keyup.escape","blur"],[1,"textarea-border"],[1,"col-md-12","mini"],[1,"f-w-600","block","mb-0"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"col-md-12","mt-1",2,"display","flex","flex-wrap","wrap"],[4,"ngIf"],[3,"ngTemplateOutlet"],[1,"created-updated-row"],[1,"col-md-6"],["matInput","","type","text","readonly","",1,"form-control",3,"value"],[1,"param-select-wrapper"],["class","param-select",4,"ngIf","ngIfElse"],[1,"param-select"],[1,"node-add-icon","param-add-icon","c-success","f-w-600"],["href","javascript:void(null)",1,"f-w-400",3,"click"],["class","param-delete-icon c-error align-text-bottom clickable animate","style","height: 21px",3,"click",4,"ngIf"],[1,"param-delete-icon","c-error","align-text-bottom","clickable","animate",2,"height","21px",3,"click"],[1,"row","m-0"],[4,"ngFor","ngForOf"],["class","attachment-count-container clickable mr-1 mb-1 animate",3,"click",4,"ngIf"],[4,"ngTemplateOutlet"],["class","thumb mr-1 mb-1 inline-block animate clickable","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"thumb","mr-1","mb-1","inline-block","animate","clickable",3,"matTooltip"],[3,"src","click",4,"ngSwitchCase"],["target","_blank",3,"href","ngSwitch"],["class","placeholder inline-block",4,"ngSwitchCase"],[1,"delete","animate",3,"swal","confirm"],[1,"animate","c-white"],[3,"src","click"],[1,"placeholder","inline-block"],[1,"attachment-count-container","clickable","mr-1","mb-1","animate",3,"click"],[1,"attachment-count-label","animate"],["class","thumb mr-1 mb-1 inline-block animate clickable","matTooltipPosition","above",3,"matTooltip",4,"ngFor","ngForOf"],[1,"uploader","compact","inline-block","clickable","mb-1"],["dropZoneLabel","Drop files here",3,"onFileDrop"],["ngx-file-drop-content-tmp",""],["class","progress-conteiner mr-1 mb-1",4,"ngIf"],[1,"progress-conteiner","mr-1","mb-1"],["color","primary","mode","determinate",3,"value"],[1,"progress-percent"],["mat-icon-button","","color","primary",1,"animate",3,"click"],[1,"animate"],[1,"f-s-12"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"div",2),g["\u0275\u0275elementStart"](3,"div"),g["\u0275\u0275elementStart"](4,"button",3),g["\u0275\u0275listener"]("click",function(){return t.addDraftTreeNode(null)}),g["\u0275\u0275text"](5," Add setup step "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",4),g["\u0275\u0275elementStart"](7,"button",5),g["\u0275\u0275listener"]("click",function(){return t.collapseAllTreeNodes()}),g["\u0275\u0275text"](8,"Collapse"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"button",5),g["\u0275\u0275listener"]("click",function(){return t.expandAllTreeNodes()}),g["\u0275\u0275text"](10,"Expand"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"div",6),g["\u0275\u0275elementStart"](12,"ul",7),g["\u0275\u0275elementStart"](13,"li"),g["\u0275\u0275elementStart"](14,"div",8),g["\u0275\u0275elementStart"](15,"mat-form-field",9),g["\u0275\u0275elementStart"](16,"input",10),g["\u0275\u0275listener"]("ngModelChange",function(e){return t.filterText=e})("keyup",function(e){return t.applyFilter(e.target.value)}),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](17,"li",11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](18,"div",12),g["\u0275\u0275elementStart"](19,"as-split",13),g["\u0275\u0275elementStart"](20,"as-split-area",14),g["\u0275\u0275elementStart"](21,"div",15),g["\u0275\u0275elementStart"](22,"perfect-scrollbar",16),g["\u0275\u0275elementStart"](23,"m-dynamic-tree-map",17),g["\u0275\u0275listener"]("nodeAdded",function(e){return t.addDraftTreeNode(e)})("nodeRemoved",function(e){return t.deleteSetupStep(e)})("nodeModified",function(e){return t.updateAfterDrop(e)})("showNotification",function(e){return t.showNotification(e)})("treeRendered",function(e){return t.afterTreeRendered(e)}),g["\u0275\u0275pipe"](24,"async"),g["\u0275\u0275template"](25,Ie,2,12,"ng-template",null,18,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](27,Ae,50,22,"as-split-area",19),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](28,Le,4,3,"ng-template",null,20,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275template"](30,Ue,2,2,"ng-template",null,21,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275template"](32,Ge,5,3,"ng-template",null,22,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275template"](34,Ze,2,1,"ng-template",null,23,g["\u0275\u0275templateRefExtractor"])),2&e&&(g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("disabled",t.treeNodeHasDraftChildren(null)),g["\u0275\u0275advance"](12),g["\u0275\u0275property"]("ngModel",t.filterText),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("size",t.activeNode?70:100),g["\u0275\u0275advance"](1),g["\u0275\u0275classProp"]("darken",t.activeNode),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("inputNodes$",t.setupService.setupTree$)("flatNodes",g["\u0275\u0275pipeBind1"](24,11,t.setupService.flatSetup$))("hiddenNodeSet",t.hiddenNodeSetId)("dimmedNodeSet",t.dimmedNodeSetId)("canDrag",!0),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",t.activeNode))},directives:[a.a,c.b,p.b,r.c,r.i,r.l,we.c,we.b,S.b,le.a,i.m,h.a,Ce.b,i.o,i.p,i.r,l.a,i.l,N.b,b.a,b.b,m.a],pipes:[i.b,i.e,i.g],styles:[".non-sticky-block[_ngcontent-%COMP%]{margin-left:-15px;transition:background-color 125ms linear}.sticky-block-parent[_ngcontent-%COMP%]{box-shadow:-5px 0 5px -5px rgba(51,51,51,.25),0 0 5px 0 rgba(51,51,51,.25);padding-right:0;border:1px solid #fff;height:80vh;overflow-y:auto;overflow-x:hidden;margin-top:-28px}.sticky-block[_ngcontent-%COMP%], .sticky-block-parent[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:100px}.sticky-block[_ngcontent-%COMP%]{display:block;z-index:100}.darken[_ngcontent-%COMP%]{background-color:rgba(176,196,222,.125)}.small-line[_ngcontent-%COMP%]{line-height:21px}.btn-save[_ngcontent-%COMP%]{position:relative;z-index:10;top:32px;left:363px;border-radius:5px;background-color:#fff;padding:0}.btn-save[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1f1f1;transition:.2s}  .basic-tree>li div>ul,   .basic-tree>li div>ul>li{list-style-type:disc!important}  .basic-tree>li div>ol,   .basic-tree>li div>ol>li{list-style-type:decimal!important}  .ps__rail-x{visibility:hidden}.mat-tree-node[_ngcontent-%COMP%]{overflow:visible;border:2px solid transparent}.vertical-text[_ngcontent-%COMP%]{transform:rotate(90deg);transform-origin:left top 0}input.m-selected[_ngcontent-%COMP%]{background-color:#f5f7fa!important;border:1px solid #d3d3d3!important;box-shadow:0 0 7px 0 #d3d3d3!important}.draft[_ngcontent-%COMP%]{color:#ff8949;font-style:italic}.progress-percent[_ngcontent-%COMP%]{text-align:center;top:-60%;z-index:500;display:block;position:relative;font-size:16px}.progress-container[_ngcontent-%COMP%]{display:inline-block;height:100px;color:#0782d0;width:100px!important;height:100px!important;border:1px solid rgba(7,130,208,.25)!important;border-radius:8px!important;transition:all .125s linear}.align-icon[_ngcontent-%COMP%]{justify-content:center!important;background-repeat:no-repeat!important;display:flex!important;fill:currentColor!important;height:18px!important;width:18px!important;align-items:center!important}.m-portlet__preview[_ngcontent-%COMP%]{padding-right:0!important}.la-close-s-f[_ngcontent-%COMP%]{font-size:24px;color:#c4c5d6}.la-close-s-f[_ngcontent-%COMP%]:hover{cursor:pointer;font-size:24px;color:#a5a6b7}"],changeDetection:0}),e})();var Ke=n("NuMO");let We=(()=>{class e{}return e.\u0275mod=g["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,r.e,a.b,d.b,c.d,l.b,p.c,m.b,h.b,u.c,f.LightboxModule,b.c,v,N.c,S.c,y.a,w.a,x.a,o.i.forChild([{path:"**",component:Xe,resolve:{activeProject:C.a},canActivate:[Ke.a]}]),we.a,s.f]]}),e})()}}]);