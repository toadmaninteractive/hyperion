(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{N1IV:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e[e.Before=-1]="Before",e[e.Into=0]="Into",e[e.After=1]="After",e[e.Root=2]="Root",e[e.Null=null]="Null",e}({})},lVqJ:function(e,t,n){"use strict";n.r(t),n.d(t,"TestRunsModule",function(){return pi});var i=n("ofXK"),s=n("fXoL"),r=n("vxfF"),a=n("nLfN"),o=n("8LU1"),l=n("XNiG"),c=n("quSY"),d=n("l5mm"),h=n("eNwd"),m=n("HDdC"),p=n("VRyK"),u=n("1G5W"),g=n("JX91"),f=n("lJxs"),b=n("IzEk"),_=n("vkgz"),v=n("eIep"),S=n("cH1L");function x(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function C(e,t){const n=t?"":"none";x(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function y(e,t){const n=e.style;n.position=t?"":"fixed",n.top=n.opacity=t?"":"0",n.left=t?"":"-999em"}function w(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function I(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}function E(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function T(e,t,n){const{top:i,bottom:s,left:r,right:a}=e;return n>=i&&n<=s&&t>=r&&t<=a}function k(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function P(e,t,n,i){const{top:s,right:r,bottom:a,left:o,width:l,height:c}=e,d=l*t,h=c*t;return i>s-h&&i<a+h&&n>o-d&&n<r+d}class R{constructor(e,t){this._document=e,this._viewportRuler=t,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:E(e)})})}handleScroll(e){const t=e.target,n=this.positions.get(t);if(!n)return null;const i=t===this._document?t.documentElement:t,s=n.scrollPosition;let r,a;if(t===this._document){const e=this._viewportRuler.getViewportScrollPosition();r=e.top,a=e.left}else r=t.scrollTop,a=t.scrollLeft;const o=s.top-r,l=s.left-a;return this.positions.forEach((e,n)=>{e.clientRect&&t!==n&&i.contains(n)&&k(e.clientRect,o,l)}),s.top=r,s.left=a,{top:o,left:l}}}function D(e){const t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(let s=0;s<n.length;s++)n[s].removeAttribute("id");return"canvas"===i?M(e,t):"input"!==i&&"select"!==i&&"textarea"!==i||$(e,t),O("canvas",e,t,M),O("input, textarea, select",e,t,$),t}function O(e,t,n,i){const s=t.querySelectorAll(e);if(s.length){const t=n.querySelectorAll(e);for(let e=0;e<s.length;e++)i(s[e],t[e])}}let j=0;function $(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${j++}`)}function M(e,t){const n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(i){}}const F=Object(a.f)({passive:!0}),A=Object(a.f)({passive:!1});class V{constructor(e,t,n,i,s,r){this._config=t,this._document=n,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new l.b,this._pointerMoveSubscription=c.a.EMPTY,this._pointerUpSubscription=c.a.EMPTY,this._scrollSubscription=c.a.EMPTY,this._resizeSubscription=c.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new l.b,this.started=new l.b,this.released=new l.b,this.ended=new l.b,this.entered=new l.b,this.exited=new l.b,this.dropped=new l.b,this.moved=this._moveEvents,this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const t=this._handles.find(t=>{const n=e.target;return!!n&&(n===t||t.contains(n))});!t||this._disabledHandles.has(t)||this.disabled||this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{e.preventDefault();const t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging){if(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const t=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),n=this._dropContainer;if(!t)return void this._endDragSequence(e);n&&(n.isDragging()||n.isReceiving())||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const n=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,t);else{const e=this._activeTransform;e.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{this._endDragSequence(e)},this.withRootElement(e),this._parentPositions=new R(n,s),r.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=Object(o.c)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>C(e,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(e=>Object(o.e)(e)),this._handles.forEach(e=>C(e,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(e=>{this._handles.indexOf(e)>-1&&t.add(e)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Object(o.e)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,A),t.addEventListener("touchstart",this._pointerDown,F)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Object(o.e)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&N(this._rootElement),N(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),C(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),C(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&N(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&N(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(e){z(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const e=this._rootElement,n=e.parentNode,i=this._preview=this._createPreviewElement(),s=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();n.insertBefore(r,e),y(e,!1),this._document.body.appendChild(n.replaceChild(s,e)),function(e,t){return t||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body}(this._document,a).appendChild(i),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){t.stopPropagation();const n=this.isDragging(),i=z(t),s=!i&&0!==t.button,r=this._rootElement,a=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),n||s||a)return;this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor||"",r.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{this._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=E(this._boundaryElement));const o=this._previewTemplate;this._pickupPositionInElement=o&&o.template&&!o.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){y(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(this._getPointerPositionOnPage(e)),r=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:s}),t.drop(this,n,this._initialIndex,this._initialContainer,r,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(n,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._preview.style.transform=L(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,n=e?e.template:null;let i;if(n&&e){const t=e.matchSize?this._rootElement.getBoundingClientRect():null,s=e.viewContainer.createEmbeddedView(n,e.context);s.detectChanges(),i=H(s,this._document),this._previewRef=s,e.matchSize?q(i,t):i.style.transform=L(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement;i=D(e),q(i,e.getBoundingClientRect())}return x(i.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:""+(this._config.zIndex||1e3)}),C(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(e=>i.classList.add(e)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=L(e.left,e.top);const t=function(e){const t=getComputedStyle(e),n=I(t,"transition-property"),i=n.find(e=>"transform"===e||"all"===e);if(!i)return 0;const s=n.indexOf(i),r=I(t,"transition-duration"),a=I(t,"transition-delay");return w(r[s])+w(a[s])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const n=t=>{(!t||t.target===this._preview&&"transform"===t.propertyName)&&(this._preview.removeEventListener("transitionend",n),e(),clearTimeout(i))},i=setTimeout(n,1.5*t);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=H(this._placeholderRef,this._document)):n=D(this._rootElement),n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t){const n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,s=i?i.getBoundingClientRect():n,r=z(t)?t.targetTouches[0]:t,a=this._getViewportScrollPosition();return{x:s.left-n.left+(r.pageX-s.left-a.left),y:s.top-n.top+(r.pageY-s.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),n=z(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,s=n.pageY-t.top;if(this._ownerSVGElement){const e=this._ownerSVGElement.getScreenCTM();if(e){const t=this._ownerSVGElement.createSVGPoint();return t.x=i,t.y=s,t.matrixTransform(e.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:i}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:t}=this._pickupPositionInElement,s=this._boundaryRect,r=this._previewRect,a=s.top+t,o=s.bottom-(r.height-t);n=B(n,s.left+e,s.right-(r.width-e)),i=B(i,a,o)}return{x:n,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:n}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-s.x),a=Math.abs(n-s.y);return r>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=n>s.y?1:-1,s.y=n),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,C(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,A),e.removeEventListener("touchstart",this._pointerDown,F)}_applyRootElementTransform(e,t){const n=L(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===i.width&&0===i.height)return;const s=n.left-i.left,r=i.right-n.right,a=n.top-i.top,o=i.bottom-n.bottom;n.width>i.width?(s>0&&(e+=s),r>0&&(e-=r)):e=0,n.height>i.height?(a>0&&(t+=a),o>0&&(t-=o)):t=0,e===this._passiveTransform.x&&t===this._passiveTransform.y||this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:z(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const n=e.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&k(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Object(a.c)(this._rootElement)),this._cachedShadowRoot}}function L(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function B(e,t,n){return Math.max(t,Math.min(n,e))}function N(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function z(e){return"t"===e.type[0]}function H(e,t){const n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];const i=t.createElement("div");return n.forEach(e=>i.appendChild(e)),i}function q(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.transform=L(t.left,t.top)}function U(e,t,n){const i=G(t,e.length-1),s=G(n,e.length-1);if(i===s)return;const r=e[i],a=s<i?-1:1;for(let o=i;o!==s;o+=a)e[o]=e[o+a];e[s]=r}function G(e,t){return Math.max(0,Math.min(t,e))}class Z{constructor(e,t,n,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new l.b,this.entered=new l.b,this.exited=new l.b,this.dropped=new l.b,this.sorted=new l.b,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=c.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new l.b,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),Object(d.a)(0,h.b).pipe(Object(u.a)(this._stopScrollTimers)).subscribe(()=>{const e=this._scrollNode;1===this._verticalScrollDirection?W(e,-2):2===this._verticalScrollDirection&&W(e,2),1===this._horizontalScrollDirection?Y(e,-2):2===this._horizontalScrollDirection&&Y(e,2)})},this.element=Object(o.e)(e),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new R(n,s)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){const e=Object(o.e)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach(e=>e._startReceiving(this)),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}enter(e,t,n,i){let s;this.start(),null==i?(s=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(e,t,n))):s=i;const r=this._activeDraggables,a=r.indexOf(e),l=e.getPlaceholderElement();let c=r[s];if(c===e&&(c=r[s+1]),a>-1&&r.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){const t=c.getRootElement();t.parentElement.insertBefore(l,t),r.splice(s,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){const t=r[0].getRootElement();t.parentNode.insertBefore(l,t),r.unshift(e)}else Object(o.e)(this.element).appendChild(l),r.push(e);l.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,i,s,r){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:s,distance:r})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&(t.filter(e=>e.isDragging()).every(t=>-1===e.indexOf(t))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Object(o.e)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?Q("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,t=>t.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,i){if(this.sortingDisabled||!P(this._clientRect,.05,t,n))return;const s=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,n,i);if(-1===r&&s.length>0)return;const a="horizontal"===this._orientation,o=Q(s,t=>t.drag===e),l=s[r],c=l.clientRect,d=o>r?1:-1,h=this._getItemOffsetPx(s[o].clientRect,c,d),m=this._getSiblingOffsetPx(o,s,d),p=s.slice();U(s,o,r),this.sorted.next({previousIndex:o,currentIndex:r,container:this,item:e}),s.forEach((t,n)=>{if(p[n]===t)return;const i=t.drag===e,s=i?h:m,r=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=s,a?(r.style.transform=`translate3d(${Math.round(t.offset)}px, 0, 0)`,k(t.clientRect,0,s)):(r.style.transform=`translate3d(0, ${Math.round(t.offset)}px, 0)`,k(t.clientRect,s,0))}),this._previousSwap.overlaps=T(c,t,n),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?i.x:i.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,i=0,s=0;if(this._parentPositions.positions.forEach((r,a)=>{a!==this._document&&r.clientRect&&!n&&P(r.clientRect,.05,e,t)&&([i,s]=function(e,t,n,i){const s=X(t,i),r=K(t,n);let a=0,o=0;if(s){const t=e.scrollTop;1===s?t>0&&(a=1):e.scrollHeight-t>e.clientHeight&&(a=2)}if(r){const t=e.scrollLeft;1===r?t>0&&(o=1):e.scrollWidth-t>e.clientWidth&&(o=2)}return[a,o]}(a,r.clientRect,e,t),(i||s)&&(n=a))}),!i&&!s){const{width:r,height:a}=this._viewportRuler.getViewportSize(),o={width:r,height:a,top:0,right:r,bottom:a,left:0};i=X(o,t),s=K(o,e),n=window}!n||i===this._verticalScrollDirection&&s===this._horizontalScrollDirection&&n===this._scrollNode||(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=n,(i||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_cacheParentPositions(){const e=Object(o.e)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,clientRect:E(t)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const e=Object(o.e)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const t=e.getRootElement();t&&(t.style.transform="")}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,n){const i="horizontal"===this._orientation,s=t[e].clientRect,r=t[e+-1*n];let a=s[i?"width":"height"]*n;if(r){const e=i?"left":"top",t=i?"right":"bottom";-1===n?a-=r.clientRect[e]-s[t]:a+=s[e]-r.clientRect[t]}return a}_getItemOffsetPx(e,t,n){const i="horizontal"===this._orientation;let s=i?t.left-e.left:t.top-e.top;return-1===n&&(s+=i?t.width-e.width:t.height-e.height),s}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const s=n[n.length-1].clientRect;return i?e>=s.right:t>=s.bottom}{const s=n[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,n,i){const s="horizontal"===this._orientation,r=Q(this._itemPositions,({drag:r,clientRect:a},o,l)=>{if(r===e)return l.length<2;if(i){const e=s?i.x:i.y;if(r===this._previousSwap.drag&&this._previousSwap.overlaps&&e===this._previousSwap.delta)return!1}return s?t>=Math.floor(a.left)&&t<Math.floor(a.right):n>=Math.floor(a.top)&&n<Math.floor(a.bottom)});return-1!==r&&this.sortPredicate(r,e,this)?r:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return T(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(i=>i._canReceive(e,t,n))}_canReceive(e,t,n){if(!T(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;const s=Object(o.e)(this.element);return i===s||s.contains(i)}_startReceiving(e){const t=this._activeSiblings;t.has(e)||(t.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:e})=>{k(e,t.top,t.left)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Object(a.c)(Object(o.e)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}}function Q(e,t){for(let n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function W(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function Y(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function X(e,t){const{top:n,bottom:i,height:s}=e,r=.05*s;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}function K(e,t){const{left:n,right:i,width:s}=e,r=.05*s;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}const J=Object(a.f)({passive:!1,capture:!0});let ee=(()=>{class e{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new l.b,this.pointerUp=new l.b,this.scroll=new l.b,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.size&&e.preventDefault()},this._persistentTouchmoveListener=e=>{this._activeDragInstances.size&&(e.preventDefault(),this.pointerMove.next(e))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,J)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,J)}startDragging(e,t){if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){const e=t.type.startsWith("touch");this._globalListeners.set(e?"touchend":"mouseup",{handler:e=>this.pointerUp.next(e),options:!0}).set("scroll",{handler:e=>this.scroll.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:J}),e||this._globalListeners.set("mousemove",{handler:e=>this.pointerMove.next(e),options:J}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](s.NgZone),s["\u0275\u0275inject"](i.d))},e.\u0275prov=Object(s["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(s["\u0275\u0275inject"])(s.NgZone),Object(s["\u0275\u0275inject"])(i.d))},token:e,providedIn:"root"}),e})();const te={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let ne=(()=>{class e{constructor(e,t,n,i){this._document=e,this._ngZone=t,this._viewportRuler=n,this._dragDropRegistry=i}createDrag(e,t=te){return new V(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new Z(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](i.d),s["\u0275\u0275inject"](s.NgZone),s["\u0275\u0275inject"](r.d),s["\u0275\u0275inject"](ee))},e.\u0275prov=Object(s["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(s["\u0275\u0275inject"])(i.d),Object(s["\u0275\u0275inject"])(s.NgZone),Object(s["\u0275\u0275inject"])(r.d),Object(s["\u0275\u0275inject"])(ee))},token:e,providedIn:"root"}),e})();const ie=new s.InjectionToken("CDK_DRAG_PARENT"),se=new s.InjectionToken("CdkDropListGroup"),re=new s.InjectionToken("CDK_DRAG_CONFIG");let ae=0;const oe=new s.InjectionToken("CdkDropList");let le=(()=>{class e{constructor(t,n,i,r,a,o,c){this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=r,this._dir=a,this._group=o,this._destroyed=new l.b,this.connectedTo=[],this.id="cdk-drop-list-"+ae++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new s.EventEmitter,this.entered=new s.EventEmitter,this.exited=new s.EventEmitter,this.sorted=new s.EventEmitter,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(e,t)=>this.enterPredicate(e.data,t.data),this._dropListRef.sortPredicate=(e,t,n)=>this.sortPredicate(e,t.data,n.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),o&&o._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=Object(o.c)(e)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Object(g.a)(this._dir.value),Object(u.a)(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{const n=Object(o.b)(this.connectedTo).map(t=>"string"==typeof t?e._dropLists.find(e=>e.id===t):t);if(this._group&&this._group._items.forEach(e=>{-1===n.indexOf(e)&&n.push(e)}),!this._scrollableParentsResolved){const e=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(e=>e.getElementRef().nativeElement);this._dropListRef.withScrollableParents(e),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=Object(o.c)(this.sortingDisabled),t.autoScrollDisabled=Object(o.c)(this.autoScrollDisabled),t.connectedTo(n.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:t,draggingDisabled:n,sortingDisabled:i,listAutoScrollDisabled:s,listOrientation:r}=e;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=s&&s,this.orientation=r||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](ne),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](r.b),s["\u0275\u0275directiveInject"](S.b,8),s["\u0275\u0275directiveInject"](se,12),s["\u0275\u0275directiveInject"](re,8))},e.\u0275dir=s["\u0275\u0275defineDirective"]({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(s["\u0275\u0275attribute"]("id",t.id),s["\u0275\u0275classProp"]("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[s["\u0275\u0275ProvidersFeature"]([{provide:se,useValue:void 0},{provide:oe,useExisting:e}])]}),e._dropLists=[],e})();const ce=new s.InjectionToken("CdkDragHandle"),de=new s.InjectionToken("CdkDragPlaceholder"),he=new s.InjectionToken("CdkDragPreview");let me=(()=>{class e{constructor(e,t,n,i,r,a,o,c,d,h){this.element=e,this.dropContainer=t,this._ngZone=i,this._viewContainerRef=r,this._dir=o,this._changeDetectorRef=d,this._selfHandle=h,this._destroyed=new l.b,this.started=new s.EventEmitter,this.released=new s.EventEmitter,this.ended=new s.EventEmitter,this.entered=new s.EventEmitter,this.exited=new s.EventEmitter,this.dropped=new s.EventEmitter,this.moved=new m.a(e=>{const t=this._dragRef.moved.pipe(Object(f.a)(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{t.unsubscribe()}}),this._dragRef=c.createDrag(e,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:null==a?void 0:a.zIndex}),this._dragRef.data=this,a&&this._assignDefaults(a),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=Object(o.c)(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.pipe(Object(b.a)(1),Object(u.a)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Object(g.a)(this._handles),Object(_.a)(e=>{const t=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),Object(v.a)(e=>Object(p.a)(...e.map(e=>e._stateChanges.pipe(Object(g.a)(e))))),Object(u.a)(this._destroyed)).subscribe(e=>{const t=this._dragRef,n=e.element.nativeElement;e.disabled?t.disableHandle(n):t.enableHandle(n)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,t=this.rootElementSelector?pe(e,this.rootElementSelector):e;this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?pe(this.element.nativeElement,e):Object(o.e)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,n=this.dragStartDelay,i=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof n&&n?n:Object(o.f)(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(i).withPreviewTemplate(s),t&&e.withDirection(t.value)}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:n,constrainPosition:i,previewClass:s,boundaryElement:r,draggingDisabled:a,rootElementSelector:o}=e;this.disabled=null!=a&&a,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),s&&(this.previewClass=s),r&&(this.boundaryElement=r),o&&(this.rootElementSelector=o)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](oe,12),s["\u0275\u0275directiveInject"](i.d),s["\u0275\u0275directiveInject"](s.NgZone),s["\u0275\u0275directiveInject"](s.ViewContainerRef),s["\u0275\u0275directiveInject"](re,8),s["\u0275\u0275directiveInject"](S.b,8),s["\u0275\u0275directiveInject"](ne),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](ce,10))},e.\u0275dir=s["\u0275\u0275defineDirective"]({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){if(1&e&&(s["\u0275\u0275contentQuery"](n,he,!0),s["\u0275\u0275contentQuery"](n,de,!0),s["\u0275\u0275contentQuery"](n,ce,!0)),2&e){let e;s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t._previewTemplate=e.first),s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t._placeholderTemplate=e.first),s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t._handles=e)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&s["\u0275\u0275classProp"]("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[s["\u0275\u0275ProvidersFeature"]([{provide:ie,useExisting:e}]),s["\u0275\u0275NgOnChangesFeature"]]}),e})();function pe(e,t){let n=e.parentElement;for(;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}let ue=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[ne],imports:[r.a]}),e})();var ge=n("3Pt+"),fe=n("tyNb"),be=n("bTqV"),_e=n("bSwM"),ve=n("0IaG"),Se=n("kmnG"),xe=n("NFeN"),Ce=n("qFsG"),ye=n("MutI"),we=n("M9IT"),Ie=n("Xa2L"),Ee=n("Dh3D"),Te=n("/t3+"),ke=n("Qu3c"),Pe=n("8yBR"),Re=n("cdP3"),De=n("m3o8"),Oe=n("bFKe"),je=n("gfTr"),$e=n("QJFE"),Me=n("PCNd"),Fe=n("j1ZV"),Ae=n("0Y/I"),Ve=n("sUzd"),Le=n("k+3h"),Be=n("tk/3"),Ne=n("2Vo4"),ze=n("itXk"),He=n("pLZG"),qe=n("SxV6"),Ue=n("nYR2"),Ge=n("PSD3"),Ze=n.n(Ge),Qe=n("7RDQ"),We=n("Sw3e"),Ye=n("IsHO"),Xe=n("0bxZ"),Ke=n("UTw3"),Je=n("65F8"),et=n("e18D");function tt(e,t){1&e&&s["\u0275\u0275element"](0,"i",9)}function nt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span",10),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"uppercase"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().node,t=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",t.badgeTestClass(t.data.activeCaseStatusMap.get(e.item.id))),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,2,t.testStatusText(t.data.activeCaseStatusMap.get(e.item.id)))," ")}}function it(e,t){if(1&e&&(s["\u0275\u0275template"](0,tt,1,0,"i",7),s["\u0275\u0275template"](1,nt,3,4,"span",8),s["\u0275\u0275elementStart"](2,"span"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"]()),2&e){const e=t.node,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngIf",e.item.isGroup),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.data.activeCaseStatusMap.has(e.item.id)&&!e.item.isGroup),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.item.title)}}let st=(()=>{class e{constructor(e,t,n,i,s){this.cdr=e,this.dialogRef=t,this.data=n,this.hyperionTestCaseService=i,this.websocketService=s,this.precheckedCasesSet=new Set,this.caseSet=new Set,this.nodes=[]}ngOnInit(){this.destroy$=new l.b,this.data.activeCaseSet.forEach(e=>{this.precheckedCasesSet.add(e),this.caseSet.add(e)}),this.hyperionTestCaseService.getTestCaseTree(this.data.projectId).pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.nodes=e.items.filter(e=>!e.item.isDraft)}),Object(p.a)(this.websocketService.testCaseCreated,this.websocketService.testCaseDeleted,this.websocketService.testCaseUpdated).pipe(Object(u.a)(this.destroy$),Object(He.a)(e=>e.data.projectId===this.data.projectId)).subscribe(e=>{const t=new Ke.i;if(t.item=e.data,t.children=[],e instanceof Je.o)t.item.parentId?this.getNode(t.item.parentId).children.push(t):this.nodes.push(t);else if(e instanceof Je.q){t.children=this.getNode(t.item.id).children;const e=this.getNode(t.item.id);e.children=[...t.children],e.item=Xe.o.fromJson(t.item.toJson())}else if(e instanceof Je.p){const e=this.getNode(t.item.parentId);e.children.splice(e.children.findIndex(e=>e.item.id===t.item.id),1)}this.nodes=[...this.nodes],this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}matchCasesSet(){if(this.data.activeCaseSet.size!==this.caseSet.size)return!1;let e=!0;return this.data.activeCaseSet.forEach(t=>{this.caseSet.has(t)||(e=!1)}),e}testStatusText(e){switch(e){case Xe.s.Pending:return"Pending";case Xe.s.Blocked:return"Blocked";case Xe.s.Passed:return"Passed";case Xe.s.Failed:return"Failed";case Xe.s.InProgress:return"In Progress"}}badgeTestClass(e){switch(e){case Xe.s.Pending:return"m-badge--metal";case Xe.s.InProgress:return"m-badge--info";case Xe.s.Blocked:return"m-badge--warning";case Xe.s.Failed:return"m-badge--danger";case Xe.s.Passed:return"m-badge--success"}}orderingCallback(e,t){return e.item.orderNum>t.item.orderNum?1:-1}getCheckedNodeCallback(e){this.caseSet=e}getNode(e){const t=[];let n;for(t.push(...this.nodes);t.length>0;){if(n=t.pop(),console.log(n),n.item.id===e)return n;n.children&&n.children.length&&t.push(n.children)}return null}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](ve.g),s["\u0275\u0275directiveInject"](ve.a),s["\u0275\u0275directiveInject"](Ye.a),s["\u0275\u0275directiveInject"](We.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["m-test-case-browse-dialog"]],decls:11,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"inputNodes","canAdd","canRemove","canDrag","showCheckboxes","precheckedNodeIdSet","checkedNodeSetChange"],["nodeTitleTemplate",""],["mat-dialog-actions","",1,"justify-content-end"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled"],["class","las la-folder-open f-s-20",4,"ngIf"],["class","m-badge x-tag mini align-text-top ml-1 mr-1",3,"ngClass",4,"ngIf"],[1,"las","la-folder-open","f-s-20"],[1,"m-badge","x-tag","mini","align-text-top","ml-1","mr-1",3,"ngClass"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h1",0),s["\u0275\u0275text"](1,"Select test cases"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"m-dynamic-tree",2),s["\u0275\u0275listener"]("checkedNodeSetChange",function(e){return t.getCheckedNodeCallback(e)}),s["\u0275\u0275template"](4,it,4,3,"ng-template",null,3,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275elementStart"](7,"button",5),s["\u0275\u0275text"](8,"Cancel"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"button",6),s["\u0275\u0275text"](10,"Confirm"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("inputNodes",t.nodes)("canAdd",!1)("canRemove",!1)("canDrag",!1)("showCheckboxes",!0)("precheckedNodeIdSet",t.precheckedCasesSet),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("mat-dialog-close",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("mat-dialog-close",t.caseSet)("disabled",t.matchCasesSet()))},directives:[ve.h,ve.e,et.a,ve.c,be.a,ve.d,i.m,i.k],pipes:[i.u],styles:[".tree-label[_ngcontent-%COMP%]{line-height:40px}.mat-checkbox-checked.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],   .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background,   .mat-primary .mat-pseudo-checkbox-checked{background:var(--primary)!important}  .m-badge-reds{color:#ff8949;width:24px}  .ps__rail-x{visibility:hidden}"]}),e})();var rt=n("Y4+Y"),at=n("4j9A"),ot=n("25+x"),lt=n("E1Th"),ct=n("KiUO"),dt=n("EPMp"),ht=n("xR9/"),mt=n("wg/d"),pt=n("9VOA"),ut=n("jhN1"),gt=n("Uq9q");function ft(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"No tests are added"),s["\u0275\u0275elementEnd"]())}function bt(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"No data to display"),s["\u0275\u0275elementEnd"]())}function _t(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",23),s["\u0275\u0275pipe"](1,"async"),s["\u0275\u0275template"](2,ft,2,0,"span",24),s["\u0275\u0275template"](3,bt,2,0,"span",25),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngSwitch",s["\u0275\u0275pipeBind1"](1,2,e.testRunItems$).length),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngSwitchCase",0)}}function vt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("",e.$parentTitle," \u203a ")}}function St(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275elementStart"](1,"span"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](":",e.$param," ")}}function xt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span",39),s["\u0275\u0275elementStart"](1,"span",40),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" Failure reason: ",e.summary," ")}}const Ct=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Delete",confirmButtonColor:"#f4516c",confirmButtonClass:"btn-danger",showCancelButton:!0,heightAuto:!1}};function yt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",28),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).selectTestRunItem(n)}),s["\u0275\u0275elementStart"](1,"div",29),s["\u0275\u0275elementStart"](2,"div",30),s["\u0275\u0275elementStart"](3,"div",31),s["\u0275\u0275elementStart"](4,"div",32),s["\u0275\u0275elementStart"](5,"div",33),s["\u0275\u0275elementStart"](6,"div",34),s["\u0275\u0275elementStart"](7,"span",35),s["\u0275\u0275template"](8,vt,3,1,"span",36),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"strong"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](11,St,3,1,"span",36),s["\u0275\u0275elementStart"](12,"button",37),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).deleteTestRunItem(n.id)}),s["\u0275\u0275elementStart"](13,"mat-icon"),s["\u0275\u0275text"](14,"delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](15,xt,3,1,"span",38),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275classProp"]("active",e===n.selectedTestItem)("pending",e.status===n.testStatusEnum.Pending)("in-progress",e.status===n.testStatusEnum.InProgress)("passed",e.status===n.testStatusEnum.Passed)("failed",e.status===n.testStatusEnum.Failed)("blocked",e.status===n.testStatusEnum.Blocked),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngClass",n.badgeTestClass(e.status)),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",e.$parentTitle),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.$title),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.$param),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](18,Ct,"Delete <b>Test run item #"+e.id+"</b>?")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",e.summary)}}function wt(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",26),s["\u0275\u0275listener"]("cdkDropListDropped",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().drop(t)}),s["\u0275\u0275template"](1,yt,16,20,"div",27),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.filteredTestRunItems$.getValue())}}function It(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li",52),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Description"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](3,"span",59),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("innerHTML",null==e.selectedTestCase?null:e.selectedTestCase.description,s["\u0275\u0275sanitizeHtml"])}}function Et(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Not set"),s["\u0275\u0275elementEnd"]())}function Tt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1," Inherited from "),s["\u0275\u0275elementStart"](2,"strong",62),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](4);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",e.inheritedPreconditionTestCase.title," ")}}function kt(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Et,2,0,"span",36),s["\u0275\u0275template"](2,Tt,4,1,"span",36),s["\u0275\u0275elementContainerEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0===(null==e.selectedTestItemPrecondition?null:e.selectedTestItemPrecondition.length)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.inheritedPreconditionTestCase)}}function Pt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span",68),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Rt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span",69),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.description," ")}}function Dt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li"),s["\u0275\u0275elementStart"](1,"mat-icon",65),s["\u0275\u0275text"](2,"subdirectory_arrow_right"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,Pt,2,1,"span",66),s["\u0275\u0275template"](4,Rt,2,1,"span",67),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",e&&e.title),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e&&e.description)}}function Ot(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ul",63),s["\u0275\u0275template"](1,Dt,5,2,"li",64),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.selectedTestItemPrecondition)}}function jt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li",52),s["\u0275\u0275elementStart"](1,"label",60),s["\u0275\u0275text"](2,"Precondition"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,kt,3,2,"ng-container",36),s["\u0275\u0275template"](4,Ot,2,1,"ul",61),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",!e.selectedTestCase.preconditionId),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",(null==e.selectedTestItemPrecondition?null:e.selectedTestItemPrecondition.length)>0)}}function $t(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Not set"),s["\u0275\u0275elementEnd"]())}function Mt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1," Inherited from "),s["\u0275\u0275elementStart"](2,"strong",62),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](4);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.inheritedSetupTestCase.title)}}function Ft(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,$t,2,0,"span",36),s["\u0275\u0275template"](2,Mt,4,1,"span",36),s["\u0275\u0275elementContainerEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0===(null==e.selectedTestItemSetup?null:e.selectedTestItemSetup.length)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.inheritedSetupTestCase)}}function At(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",73),s["\u0275\u0275elementStart"](1,"mat-icon",75),s["\u0275\u0275text"](2,"link"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function Vt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",73),s["\u0275\u0275elementStart"](1,"span",76),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2).$implicit,t=s["\u0275\u0275nextContext"](4);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate2"](" [",t.selectedTestItem.params.specs[t.selectParamForTestItemSetup(e)].param,"]: ",t.selectedTestItem.params.specs[t.selectParamForTestItemSetup(e)].value," ")}}function Lt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div",72),s["\u0275\u0275elementStart"](2,"div",73),s["\u0275\u0275elementStart"](3,"mat-icon",62),s["\u0275\u0275text"](4," subdirectory_arrow_right "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",73),s["\u0275\u0275elementStart"](6,"span",68),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](8,At,3,0,"div",74),s["\u0275\u0275template"](9,Vt,3,2,"div",74),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit,t=s["\u0275\u0275nextContext"](4);s["\u0275\u0275classProp"]("line-vertical",t.selectedTestItem.status===t.testStatusEnum.Blocked&&t.selectedTestItem.params.specs[t.selectParamForTestItemSetup(e)].setupId===t.selectedTestItem.failedSetupId),s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate1"](" ",e.title," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",null!==t.selectParamForTestItemSetup(e)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",null!==t.selectParamForTestItemSetup(e))}}function Bt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",72),s["\u0275\u0275elementStart"](1,"div",73),s["\u0275\u0275elementStart"](2,"mat-icon",62),s["\u0275\u0275text"](3,"subdirectory_arrow_right"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",73),s["\u0275\u0275elementStart"](5,"span",68),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit,t=s["\u0275\u0275nextContext"](4);s["\u0275\u0275classProp"]("line-vertical",e.id===t.selectedTestItem.failedSetupId),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function Nt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li"),s["\u0275\u0275template"](1,Lt,10,5,"div",70),s["\u0275\u0275template"](2,Bt,7,3,"div",71),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"](4);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.selectedTestItem.params.specs.length>0&&null!==n.selectParamForTestItemSetup(e)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0===n.selectedTestItem.params.specs.length||null===n.selectParamForTestItemSetup(e))}}function zt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ul",63),s["\u0275\u0275template"](1,Nt,3,2,"li",64),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.selectedTestItemSetup)}}function Ht(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li",52),s["\u0275\u0275elementStart"](1,"label",60),s["\u0275\u0275text"](2,"Setup"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](3,Ft,3,2,"ng-container",36),s["\u0275\u0275template"](4,zt,2,1,"ul",61),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",!e.selectedTestCase.setupId),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",(null==e.selectedTestItemSetup?null:e.selectedTestItemSetup.length)>0)}}function qt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li",52),s["\u0275\u0275elementStart"](1,"label",60),s["\u0275\u0275text"](2,"Test steps"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](3,"span",59),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("innerHTML",null==e.selectedTestCase?null:e.selectedTestCase.testSteps,s["\u0275\u0275sanitizeHtml"])}}function Ut(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li",52),s["\u0275\u0275elementStart"](1,"label",60),s["\u0275\u0275text"](2,"Expected result"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](3,"span",59),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("innerHTML",null==e.selectedTestCase?null:e.selectedTestCase.expectedResult,s["\u0275\u0275sanitizeHtml"])}}function Gt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li",52),s["\u0275\u0275elementStart"](1,"label",60),s["\u0275\u0275text"](2,"Failure reason"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](3,"span",59),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("innerHTML",e.selectedTestItem.summary||"None",s["\u0275\u0275sanitizeHtml"])}}function Zt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Created By"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"strong",62),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.selectedTestItem.reporterName)}}function Qt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Assigned To"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"strong",62),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.selectedTestItem.assigneeName)}}function Wt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"li",52),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275template"](2,Zt,5,1,"div",55),s["\u0275\u0275template"](3,Qt,5,1,"div",55),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.selectedTestItem.reporterName),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.selectedTestItem.assigneeName)}}function Yt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Created At"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"date"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](4,1,e.selectedTestItem.createdAt,"yyyy-MM-dd HH:mm")," ")}}function Xt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Started At"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"date"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](4,1,e.selectedTestItem.startedAt,"yyyy-MM-dd HH:mm")," ")}}function Kt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Passed At"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"date"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](4,1,e.selectedTestItem.finishedAt,"yyyy-MM-dd HH:mm")," ")}}function Jt(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Failed At"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"date"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](4,1,e.selectedTestItem.finishedAt,"yyyy-MM-dd HH:mm")," ")}}function en(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",77),s["\u0275\u0275elementStart"](1,"label",57),s["\u0275\u0275text"](2,"Blocked At"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"date"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](4,1,e.selectedTestItem.finishedAt,"yyyy-MM-dd HH:mm")," ")}}function tn(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementContainer"](1,9),s["\u0275\u0275elementContainerEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2),t=s["\u0275\u0275reference"](28),n=s["\u0275\u0275reference"](26);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)>3&&e.showMoreAttachments?t:n)}}function nn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"as-split-area",12),s["\u0275\u0275elementStart"](1,"div",41),s["\u0275\u0275elementStart"](2,"perfect-scrollbar",15),s["\u0275\u0275elementStart"](3,"div",42),s["\u0275\u0275elementStart"](4,"div",43),s["\u0275\u0275elementStart"](5,"div",44),s["\u0275\u0275elementStart"](6,"h5"),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",45),s["\u0275\u0275elementStart"](9,"div",31),s["\u0275\u0275elementStart"](10,"div",46),s["\u0275\u0275elementStart"](11,"div",34),s["\u0275\u0275elementStart"](12,"div",47),s["\u0275\u0275elementStart"](13,"span",35),s["\u0275\u0275text"](14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",48),s["\u0275\u0275elementStart"](16,"span",49),s["\u0275\u0275text"](17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"ul",50),s["\u0275\u0275template"](19,It,4,1,"li",51),s["\u0275\u0275template"](20,jt,5,2,"li",51),s["\u0275\u0275template"](21,Ht,5,2,"li",51),s["\u0275\u0275template"](22,qt,4,1,"li",51),s["\u0275\u0275template"](23,Ut,4,1,"li",51),s["\u0275\u0275template"](24,Gt,4,1,"li",51),s["\u0275\u0275template"](25,Wt,4,2,"li",51),s["\u0275\u0275elementStart"](26,"li",52),s["\u0275\u0275elementStart"](27,"div",0),s["\u0275\u0275elementContainerStart"](28,53),s["\u0275\u0275template"](29,Yt,5,4,"div",54),s["\u0275\u0275template"](30,Xt,5,4,"div",55),s["\u0275\u0275template"](31,Kt,5,4,"div",54),s["\u0275\u0275template"](32,Jt,5,4,"div",54),s["\u0275\u0275template"](33,en,5,4,"div",54),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](34,"li",52),s["\u0275\u0275elementStart"](35,"div",0),s["\u0275\u0275elementStart"](36,"div",56),s["\u0275\u0275elementStart"](37,"label",57),s["\u0275\u0275text"](38,"Attachments"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"div",0),s["\u0275\u0275elementStart"](40,"div",58),s["\u0275\u0275template"](41,tn,2,1,"ng-container",36),s["\u0275\u0275elementContainer"](42,9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](),t=s["\u0275\u0275reference"](30);s["\u0275\u0275property"]("size",e.selectedTestItem?30:0),s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate"](e.selectedTestItem.$title),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngClass",e.badgeTestClass(e.selectedTestItem.status)),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",e.testStatusText(e.selectedTestItem.status)," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" #",e.selectedTestItem.id," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.selectedTestCase.description),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0!==(null==e.selectedTestItemPrecondition?null:e.selectedTestItemPrecondition.length)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0!==(null==e.selectedTestItemSetup?null:e.selectedTestItemSetup.length)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.selectedTestCase.testSteps),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.selectedTestCase.expectedResult),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.selectedTestItem.summary),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.selectedTestItem.reporterName||e.selectedTestItem.assigneeName),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngSwitch",e.selectedTestItem.status),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.testStatusEnum.Pending),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.selectedTestItem.status!==e.testStatusEnum.Pending&&e.selectedTestItem.startedAt),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.testStatusEnum.Passed),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.testStatusEnum.Failed),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.testStatusEnum.Blocked),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("ngIf",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)>0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",0===(null==e.activeFileAttachments?null:e.activeFileAttachments.length)?t:null)}}function sn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"img",88),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](2).index;return s["\u0275\u0275nextContext"](2).openGallery(t)}),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275propertyInterpolate1"]("src","/download/attachments/",e.thumbFilename,"",s["\u0275\u0275sanitizeUrl"])}}function rn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",89),s["\u0275\u0275text"](1,"File"),s["\u0275\u0275elementEnd"]())}function an(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",82),s["\u0275\u0275elementContainerStart"](1,53),s["\u0275\u0275template"](2,sn,1,1,"img",83),s["\u0275\u0275elementStart"](3,"a",84),s["\u0275\u0275template"](4,rn,2,0,"div",85),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementStart"](5,"div",86),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"](2);return n.unlinkFileAttachment(t.id,n.selectedTestItem.id)}),s["\u0275\u0275elementStart"](6,"mat-icon",87),s["\u0275\u0275text"](7,"clear"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("matTooltip",e.originalFilename),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",!0),s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate1"]("href","/download/attachments/",e.filename,"",s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",!1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](7,Ct,"Delete <b>"+e.originalFilename+"</b>?"))}}function on(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,an,8,9,"div",81),s["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.index;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e<3)}}function ln(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",90),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](2);return t.showMoreAttachments=!t.showMoreAttachments}),s["\u0275\u0275elementStart"](1,"div",91),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" + ",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)-3," ")}}function cn(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}function dn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",78),s["\u0275\u0275template"](1,on,2,1,"ng-container",64),s["\u0275\u0275template"](2,ln,3,1,"div",79),s["\u0275\u0275template"](3,cn,1,0,"ng-container",80),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](),t=s["\u0275\u0275reference"](30);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.activeFileAttachments),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",(null==e.activeFileAttachments?null:e.activeFileAttachments.length)>3),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",t)}}function hn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"img",88),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](2).openGallery(t)}),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275propertyInterpolate1"]("src","/download/attachments/",e.thumbFilename,"",s["\u0275\u0275sanitizeUrl"])}}function mn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",89),s["\u0275\u0275text"](1,"File"),s["\u0275\u0275elementEnd"]())}function pn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",82),s["\u0275\u0275elementContainerStart"](1,53),s["\u0275\u0275template"](2,hn,1,1,"img",83),s["\u0275\u0275elementStart"](3,"a",84),s["\u0275\u0275template"](4,mn,2,0,"div",85),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementStart"](5,"div",86),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit,i=s["\u0275\u0275nextContext"](2);return i.unlinkFileAttachment(n.id,i.selectedTestItem.id)}),s["\u0275\u0275elementStart"](6,"mat-icon",87),s["\u0275\u0275text"](7,"clear"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275property"]("matTooltip",e.originalFilename),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",!0),s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate1"]("href","/download/attachments/",e.filename,"",s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275property"]("ngSwitch",!!e.thumbFilename),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",!1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](7,Ct,"Delete <b>"+e.originalFilename+"</b>?"))}}function un(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}function gn(e,t){if(1&e&&(s["\u0275\u0275template"](0,pn,8,9,"div",92),s["\u0275\u0275template"](1,un,1,0,"ng-container",80)),2&e){const e=s["\u0275\u0275nextContext"](),t=s["\u0275\u0275reference"](30);s["\u0275\u0275property"]("ngForOf",e.activeFileAttachments),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",t)}}function fn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",97),s["\u0275\u0275element"](1,"mat-progress-spinner",98),s["\u0275\u0275pipe"](2,"async"),s["\u0275\u0275elementStart"](3,"div",99),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"async"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("value",s["\u0275\u0275pipeBind1"](2,2,e.value)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](5,4,e.value),"% ")}}function bn(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,fn,6,6,"div",96),s["\u0275\u0275pipe"](2,"async"),s["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](2,1,e.value))}}function _n(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"button",100),s["\u0275\u0275listener"]("click",function(){return(0,t.openFileSelector)()}),s["\u0275\u0275elementStart"](1,"mat-icon",101),s["\u0275\u0275text"](2,"add"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function vn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275template"](0,bn,3,3,"ng-container",64),s["\u0275\u0275pipe"](1,"keyvalue"),s["\u0275\u0275elementStart"](2,"div",93),s["\u0275\u0275elementStart"](3,"ngx-file-drop",94),s["\u0275\u0275listener"]("onFileDrop",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().dropped(t)}),s["\u0275\u0275template"](4,_n,3,0,"ng-template",95),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngForOf",s["\u0275\u0275pipeBind1"](1,1,e.attachmentsProgress))}}function Sn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",113),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](2);return t.startTestRun(t.testRun.id)}),s["\u0275\u0275elementStart"](1,"mat-icon",108),s["\u0275\u0275text"](2,"play_arrow"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"span",106),s["\u0275\u0275text"](4,"Start"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}const xn=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Close",confirmButtonColor:"#343a40",confirmButtonClass:"btn-dark",showCancelButton:!0,heightAuto:!1}};function Cn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",114),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](2);return t.closeTestRun(t.testRun.id)}),s["\u0275\u0275elementStart"](1,"mat-icon",115),s["\u0275\u0275text"](2,"stop"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"span",116),s["\u0275\u0275text"](4,"Stop"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](1,xn,"Close <b>Test run #"+e.testRun.id+"</b>?"))}}const yn=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Reopen",confirmButtonColor:"#36a3f7",confirmButtonClass:"btn-info",showCancelButton:!0,heightAuto:!1}};function wn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",117),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"](2);return t.reopenTestRun(t.testRun.id)}),s["\u0275\u0275elementStart"](1,"mat-icon",115),s["\u0275\u0275text"](2,"refresh"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"span",116),s["\u0275\u0275text"](4,"Reopen"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](1,yn,"Reopen <b>Test run #"+e.testRun.id+"</b>?"))}}function In(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",102),s["\u0275\u0275elementStart"](1,"div",103),s["\u0275\u0275elementStart"](2,"button",104),s["\u0275\u0275listener"]("click",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().showFilter(t)}),s["\u0275\u0275elementStart"](3,"mat-icon",105),s["\u0275\u0275text"](4,"filter_list"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"span",106),s["\u0275\u0275text"](6,"Filter"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"button",107),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().showBrowseTestCaseDialog()}),s["\u0275\u0275elementStart"](8,"mat-icon",108),s["\u0275\u0275text"](9,"edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"span",106),s["\u0275\u0275text"](11,"Manage test cases"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",109),s["\u0275\u0275template"](13,Sn,5,0,"button",110),s["\u0275\u0275template"](14,Cn,5,3,"button",111),s["\u0275\u0275template"](15,wn,5,3,"button",112),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngSwitch",e.testRun.status),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.statusEnum.Draft),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.statusEnum.InProgress),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.statusEnum.Closed)}}function En(e,t){1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1,"check_box"),s["\u0275\u0275elementContainerEnd"]())}function Tn(e,t){1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1,"check_box_outline_blank"),s["\u0275\u0275elementContainerEnd"]())}function kn(e,t){1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1,"indeterminate_check_box"),s["\u0275\u0275elementContainerEnd"]())}function Pn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",118),s["\u0275\u0275elementStart"](1,"div",119),s["\u0275\u0275elementStart"](2,"button",120),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().changeFilter(null)}),s["\u0275\u0275elementStart"](3,"mat-icon",121),s["\u0275\u0275pipe"](4,"async"),s["\u0275\u0275template"](5,En,2,0,"ng-container",24),s["\u0275\u0275template"](6,Tn,2,0,"ng-container",24),s["\u0275\u0275template"](7,kn,2,0,"ng-container",24),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](8," All "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",122),s["\u0275\u0275element"](10,"input",123),s["\u0275\u0275pipe"](11,"async"),s["\u0275\u0275elementStart"](12,"label",124),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]();return t.changeFilter(t.typeFilterEnum.Pending)}),s["\u0275\u0275text"](13," Pending "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",122),s["\u0275\u0275element"](15,"input",125),s["\u0275\u0275pipe"](16,"async"),s["\u0275\u0275elementStart"](17,"label",126),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]();return t.changeFilter(t.typeFilterEnum.InProgress)}),s["\u0275\u0275text"](18," In Progress "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](19,"div",43),s["\u0275\u0275element"](20,"input",127),s["\u0275\u0275pipe"](21,"async"),s["\u0275\u0275elementStart"](22,"label",128),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]();return t.changeFilter(t.typeFilterEnum.Passed)}),s["\u0275\u0275text"](23," Passed "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](24,"div",122),s["\u0275\u0275element"](25,"input",129),s["\u0275\u0275pipe"](26,"async"),s["\u0275\u0275elementStart"](27,"label",130),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]();return t.changeFilter(t.typeFilterEnum.Failed)}),s["\u0275\u0275text"](28," Failed "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"div",122),s["\u0275\u0275element"](30,"input",131),s["\u0275\u0275pipe"](31,"async"),s["\u0275\u0275elementStart"](32,"label",132),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]();return t.changeFilter(t.typeFilterEnum.Blocked)}),s["\u0275\u0275text"](33," Blocked "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngSwitch",s["\u0275\u0275pipeBind1"](4,9,e.checkedFilter$)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngSwitchCase",e.filterStatusEnum.Checked),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.filterStatusEnum.Unchecked),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",e.filterStatusEnum.Indeterminate),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",!s["\u0275\u0275pipeBind1"](11,11,e.testStatusFilters$).has(e.typeFilterEnum.Pending)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("disabled",!s["\u0275\u0275pipeBind1"](16,13,e.testStatusFilters$).has(e.typeFilterEnum.InProgress)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("disabled",!s["\u0275\u0275pipeBind1"](21,15,e.testStatusFilters$).has(e.typeFilterEnum.Passed)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("disabled",!s["\u0275\u0275pipeBind1"](26,17,e.testStatusFilters$).has(e.typeFilterEnum.Failed)),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("disabled",!s["\u0275\u0275pipeBind1"](31,19,e.testStatusFilters$).has(e.typeFilterEnum.Blocked))}}let Rn=(()=>{class e{constructor(e,t,n,i,s,r,a,o,c,d,h,m,p,u,g){this.cdr=e,this.dialog=t,this.hyperionAttachmentService=n,this.hyperionProjectService=i,this.hyperionSetupService=s,this.hyperionTestCaseService=r,this.hyperionTestRunsService=a,this.lightbox=o,this.notificationService=c,this.route=d,this.router=h,this.sanitizer=m,this.uploadService=p,this.subheaderService=u,this.websocketService=g,this.destroy$=new l.b,this.filteredTestRunItems$=new Ne.a([]),this.attachmentsProgress=new Map,this.testStatusFilters$=new Ne.a(new Set([Xe.s.Pending,Xe.s.InProgress,Xe.s.Passed,Xe.s.Failed,Xe.s.Blocked])),this.checkedFilter$=new Ne.a(Qe.a.Checked),this.showFilter$=new Ne.a(!1),this.typeFilterEnum=Xe.s,this.testStatusEnum=Xe.s,this.statusEnum=Xe.r,this.setupMap=new Map,this.testCaseMap=new Map,this.testRunItems$=new Ne.a([]),this.attachments=new Map,this.activeAlbum=[],this.filterStatusEnum=Qe.a,this.initialized=!1,this.files=[],this.showMoreAttachments=!1}ngOnInit(){Object(ze.b)(this.route.data,this.route.queryParamMap).pipe(Object(u.a)(this.destroy$)).subscribe(([e,t])=>{this.activeQueryId=parseInt(t.get("item_id"),10)}),this.route.data.pipe(Object(u.a)(this.destroy$)).subscribe(e=>this.initialize(e.activeProject,e.testRun)),Object(p.a)(this.websocketService.setupStepCreated,this.websocketService.setupStepUpdated,this.websocketService.setupStepDeleted).pipe(Object(u.a)(this.destroy$),Object(He.a)(e=>this.initialized&&e.data.projectId===this.project.id)).subscribe(e=>{e instanceof Je.m?this.setupMap.delete(e.data.id):this.setupMap.set(e.data.id,e.data),this.selectedTestItem&&this.selectTestRunItem(this.selectedTestItem),this.cdr.detectChanges()}),Object(p.a)(this.websocketService.testCaseCreated,this.websocketService.testCaseUpdated,this.websocketService.testCaseDeleted).pipe(Object(u.a)(this.destroy$),Object(He.a)(e=>this.initialized&&e.data.projectId===this.project.id)).subscribe(e=>{let t,n;if(e instanceof Je.o)t=new Ke.i,t.item=e.data,t.children=[],this.testCaseMap.set(e.data.id,t),n=t.item.parentId?this.testCaseMap.get(t.item.parentId):null,n&&n.children.push(t);else if(e instanceof Je.p){if(t=this.testCaseMap.get(e.data.id),this.testCaseMap.delete(e.data.id),n=t.item.parentId?this.testCaseMap.get(t.item.parentId):null,n){const e=n.children.findIndex(e=>e.item.id===t.item.id);-1!==e&&n.children.splice(e,1)}}else{t=this.testCaseMap.get(e.data.id);const i=t.item.parentId;if(t.item=e.data,this.testCaseMap.set(e.data.id,t),i!==t.item.parentId){if(n=t.item.parentId?this.testCaseMap.get(i):null,n){const e=n.children.findIndex(e=>e.item.id===t.item.id);-1!==e&&n.children.splice(e,1)}n=t.item.parentId?this.testCaseMap.get(t.item.parentId):null,n&&n.children.push(t),this.walkTestCaseTreeNode(this.testCaseMap.get(n.item.id))}}this.testRunItems$.next(this.reoderTestRunItems(this.testRunItems$.getValue())),this.selectedTestItem&&this.selectTestRunItem(this.selectedTestItem),this.cdr.detectChanges()}),Object(p.a)(this.websocketService.testRunUpdated,this.websocketService.testRunStarted,this.websocketService.testRunClosed,this.websocketService.testRunReopened,this.websocketService.testRunDeleted).pipe(Object(u.a)(this.destroy$),Object(He.a)(e=>this.testRun&&this.testRun.id===e.data.id)).subscribe(e=>{e instanceof Je.v?Ze.a.fire("Test run has been deleted",`by <strong>${e.actorName}</strong>`,"info").then(()=>this.router.navigate(["/test-runs/"+(this.project?this.project.key:":project")])):(this.testRun=e.data,this.subheaderService.setStatus(this.runStatusText(this.testRun),this.badgeRunClass(this.testRun)),this.cdr.detectChanges())}),Object(p.a)(this.websocketService.testCreated,this.websocketService.testUpdated,this.websocketService.testStarted,this.websocketService.testPassed,this.websocketService.testFailed,this.websocketService.testBlocked,this.websocketService.testDeleted).pipe(Object(u.a)(this.destroy$),Object(He.a)(e=>this.initialized&&this.testRun&&this.testRun.id===e.data.runId)).subscribe(e=>{const t=this.testRunItems$.getValue().findIndex(t=>t.id===e.data.id),n=!(e instanceof Je.r||e instanceof Je.s);e instanceof Je.r&&-1===t?this.testRunItems$.next(this.testRunItems$.getValue().concat(this.addTestRunItemMetadata(e.data))):e instanceof Je.s&&-1!==t?(this.testRunItems$.getValue().splice(t,1),this.filteredTestRunItems$.getValue().splice(this.filteredTestRunItems$.getValue().findIndex(t=>t.id===e.data.id),1)):n&&(this.testRunItems$.getValue()[t]=e.data,this.testRunItems$.getValue()[t]=this.addTestRunItemMetadata(this.testRunItems$.getValue()[t]),this.testRunItems$.next(this.reoderTestRunItems(this.testRunItems$.getValue()))),this.cdr.detectChanges()}),Object(p.a)(this.websocketService.attachmentLinked,this.websocketService.attachmentUnlinked).pipe(Object(u.a)(this.destroy$),Object(He.a)(e=>e.link.owner===Xe.b.TestRunItem)).subscribe(e=>{if(!this.attachments.has(e.link.linkedId))return;const t=this.attachments.get(e.link.linkedId),n=t.findIndex(t=>t.id===e.attachment.id);e instanceof Je.a?n>=0?t[n]=e.attachment:t.push(e.attachment):e instanceof Je.b&&-1!==n&&t.splice(n,1),this.attachments.set(e.link.linkedId,t),this.selectedTestItem&&this.selectedTestItem.id===e.link.linkedId&&(this.activeFileAttachments=t),this.cdr.detectChanges()}),Object(ze.b)(this.testStatusFilters$,this.testRunItems$).pipe(Object(u.a)(this.destroy$)).subscribe(([e,t])=>{const n=this.reoderTestRunItems(null!==status?t.filter(e=>this.testStatusFilters$.getValue().has(e.status)):t);this.filteredTestRunItems$.next(n),this.initialized=!0,this.cdr.detectChanges()}),this.router.events.pipe(Object(He.a)(e=>e instanceof fe.c),Object(u.a)(this.destroy$)).subscribe(e=>{this.subheaderService.setTitle(this.testRun.title?this.testRun.title:"Test run #"+this.testRun.id),this.subheaderService.setStatus(this.runStatusText(this.testRun),this.badgeRunClass(this.testRun)),this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}showFilter(e){this.showFilter$.getValue()?this.showFilter$.next(!1):this.showFilter$.next(!0)}changeFilter(e){if(this.testStatusFilters$.getValue().has(e)||null===e){const t=this.testStatusFilters$.getValue();t.delete(e),this.checkedFilter$.next(Qe.a.Indeterminate),this.testStatusFilters$.next(t)}else this.testStatusFilters$.next(this.testStatusFilters$.getValue().add(e));5===this.testStatusFilters$.getValue().size&&this.checkedFilter$.next(Qe.a.Checked),null===e&&(this.testStatusFilters$.getValue().size>=0&&this.testStatusFilters$.getValue().size<=4?(this.testStatusFilters$.next(new Set([Xe.s.Pending,Xe.s.InProgress,Xe.s.Passed,Xe.s.Failed,Xe.s.Blocked])),this.checkedFilter$.next(Qe.a.Checked)):(this.checkedFilter$.next(Qe.a.Unchecked),this.testStatusFilters$.next(new Set([]))))}openGallery(e){this.activeFileAttachments.filter(e=>e.contentType.includes("image")).forEach(e=>{this.activeAlbum.push({src:"/download/attachments/"+e.filename,caption:e.originalFilename,thumb:"/download/attachments/"+e.thumbFilename})}),this.lightbox.open(this.activeAlbum,e)}initialize(e,t){if(null===t)return this.notificationService.warning("Test run not exists"),void this.router.navigate(["/test-runs/"+(e?e.key:":project")]);if(t.projectId!==e.id)return this.notificationService.warning("Test run belongs to another project"),void this.router.navigate(["/test-runs/"+e.key]);this.project=e,this.testRun=t,this.subheaderService.setTitle(this.testRun.title?this.testRun.title:"Test run #"+this.testRun.id),this.subheaderService.setStatus(this.runStatusText(this.testRun),this.badgeRunClass(this.testRun)),this.cdr.detectChanges();const n=[this.hyperionTestRunsService.getTestRunItems(this.testRun.id)];let i=-1,s=-1;0===this.setupMap.size&&(i=n.length,n.push(this.hyperionSetupService.getSetup(this.project.id))),0===this.testCaseMap.size&&(s=n.length,n.push(this.hyperionTestCaseService.getTestCaseTree(this.project.id))),Object(ze.b)(...n).pipe(Object(u.a)(this.destroy$),Object(qe.a)()).subscribe(e=>{if(-1!==i&&(this.setupMap.clear(),e[i].items.forEach(e=>this.walkSetupTreeNode(e))),-1!==s&&(this.testCaseMap.clear(),e[s].items.forEach(e=>this.walkTestCaseTreeNode(e))),this.testRunItems$.next(this.reoderTestRunItems(e[0].items)),this.activeQueryId){const e=this.testRunItems$.getValue().find(e=>e.id===this.activeQueryId);e?this.selectTestRunItem(e):this.router.navigate([],{queryParams:{item_id:null},replaceUrl:!0,queryParamsHandling:"merge"})}this.initialized=!0,this.cdr.detectChanges()})}runStatusText(e){switch(e.status){case Xe.r.Draft:return"Draft";case Xe.r.InProgress:return"In Progress";case Xe.r.Closed:return"Closed"}}badgeRunClass(e){switch(e.status){case Xe.r.Draft:return"m-badge--metal";case Xe.r.InProgress:return"m-badge--info";case Xe.r.Closed:return"m-badge--warning"}}testStatusText(e){switch(e){case Xe.s.Pending:return"Pending";case Xe.s.Blocked:return"Blocked";case Xe.s.Passed:return"Passed";case Xe.s.Failed:return"Failed";case Xe.s.InProgress:return"In Progress"}}badgeTestClass(e){switch(e){case Xe.s.Pending:return"m-timeline-3__item--metal";case Xe.s.InProgress:return"m-timeline-3__item--info";case Xe.s.Blocked:return"m-timeline-3__item--warning";case Xe.s.Failed:return"m-timeline-3__item--danger";case Xe.s.Passed:return"m-timeline-3__item--success"}}walkSetupTreeNode(e){this.setupMap.set(e.item.id,e.item),e.children.forEach(e=>this.walkSetupTreeNode(e))}getParentWithValidPrecondition(e){let t=e.item.id;for(;e&&!this.testCaseMap.get(t).item.preconditionId;)t=e.item.parentId,e=this.testCaseMap.get(t);return e||null}lookUpPreconditionSteps(e){const t=new Array;if(!e){const t=this.testCaseMap.get(this.selectedTestCase.id),n=this.getParentWithValidPrecondition(t);e=n?n.item.preconditionId:0}let n;for(;e;)n=this.setupMap.get(e),t.unshift(n),e=n?n.parentId:null;return t}getParentWithValidSetup(e){let t=e.item.id;for(;e&&!this.testCaseMap.get(t).item.setupId;)t=e.item.parentId,e=this.testCaseMap.get(t);return e||null}lookUpSetupSteps(e){const t=new Array;if(!e){const t=this.testCaseMap.get(this.selectedTestCase.id),n=this.getParentWithValidSetup(t);e=n?n.item.setupId:0}let n=new Xe.m;for(;e;)n=this.setupMap.get(e),t.unshift(n),e=n?n.parentId:null;return t}walkTestCaseTreeNode(e,t=""){e.item=this.addTestCaseMetadata(e.item,t),this.testCaseMap.set(e.item.id,e),e.children.forEach(t=>this.walkTestCaseTreeNode(t,e.item.$title))}addTestCaseMetadata(e,t){return e.$parentTitle=t,e.$title=`${t}${t?" \u203a ":""}${e.title}`,e}addTestRunItemMetadata(e){const t=this.testCaseMap.has(e.caseId)?this.testCaseMap.get(e.caseId):null;e.$parentTitle=t?t.item.$parentTitle:null,e.$title=t?t.item.title:"Test run item #"+e.id,e.$sortTitle=`${e.$parentTitle}${e.$parentTitle?" \u203a ":""}${e.$title}`.toLowerCase();let n="";return e.params.specs.forEach((t,i)=>{n+=`[${t.value}]`,e.params.specs.length-1!==i&&(n+=", ")}),e.$param=n,e.$parentTitle.length>100?(e.$reducedParentTitle=e.$parentTitle.substr(0,e.$parentTitle.lastIndexOf(" ",100)),e.$reducedTitle=""):e.$title.length>100&&(e.$reducedParentTitle=e.$parentTitle,e.$reducedTitle=e.$title.substr(0,e.$title.lastIndexOf(" ",100))),e}reoderTestRunItems(e){return e.map(e=>this.addTestRunItemMetadata(e)).sort((e,t)=>e.orderNum>t.orderNum?1:-1)}selectTestRunItem(e){e.id&&this.router.navigate([],{queryParams:{item_id:e.id},replaceUrl:!0,queryParamsHandling:"merge"}),this.selectedTestItem=e;const t=this.testCaseMap.get(this.selectedTestItem.caseId);if(this.selectedTestCase=t?t.item:null,this.inheritedSetupTestCase=null,this.inheritedPreconditionTestCase=null,!this.selectedTestCase.setupId){const e=this.getParentWithValidSetup(t);this.inheritedSetupTestCase=e?e.item:null}if(!this.selectedTestCase.preconditionId){const e=this.getParentWithValidPrecondition(t);this.inheritedPreconditionTestCase=e?e.item:null}this.selectedTestItemSetup=this.lookUpSetupSteps(this.selectedTestCase.setupId),this.selectedTestItemPrecondition=this.lookUpPreconditionSteps(this.selectedTestCase.preconditionId),this.attachments.has(e.id)&&(this.activeFileAttachments=this.attachments.get(e.id)),this.getLinkedAttachments(e.id),this.cdr.detectChanges()}showBrowseTestCaseDialog(){this.activeCaseSet?this.activeCaseSet.clear():this.activeCaseSet=new Set;const e=new Map;this.testRunItems$.getValue().forEach(t=>{this.activeCaseSet.add(t.caseId),e.set(t.caseId,t.status)}),this.dialog.open(st,{width:"750px",data:{projectId:this.project.id,activeCaseSet:this.activeCaseSet,activeCaseStatusMap:e}}).afterClosed().pipe(Object(u.a)(this.destroy$)).subscribe(e=>{if(null===e||"object"==typeof e){let t=1;e.forEach(e=>{this.activeCaseSet.has(e)||this.testCaseMap.get(e).item.isGroup||this.createTestRunItem(e,t),t++,this.selectedTestItem=null,this.cdr.detectChanges()}),this.activeCaseSet.forEach(t=>{e.has(t)||this.testRunItems$.getValue().map(e=>{e.caseId===t&&this.deleteTestRunItem(e.id),this.selectedTestItem&&this.selectedTestItem.id===e.id&&(this.selectedTestItem=null)})})}})}drop(e){U(this.testRunItems$.getValue(),e.previousIndex,e.currentIndex),this.updateTestRunItem(this.testRunItems$.getValue()[e.currentIndex].id,e.currentIndex)}dropped(e){for(const t of e)if(t.fileEntry.isFile){const e=t.fileEntry,n=new Ne.a(0);this.attachmentsProgress.set(t.fileEntry.name,n),e.file(e=>{this.uploadService.uploadAttachment(e,Xe.b.TestRunItem,this.selectedTestItem.id).pipe(Object(He.a)(e=>e.type===Be.d.UploadProgress),Object(Ue.a)(()=>{n.complete(),this.attachmentsProgress.delete(e.name),this.cdr.detectChanges()})).subscribe(e=>{const t=Math.round(100*e.loaded/e.total);n.next(t)},t=>this.notificationService.warning("Failed to upload attachment error: "+e.name))})}}createTestRunItem(e,t){const n=new pt.g;n.caseId=e,n.orderNum=1e3*(this.testRunItems$.getValue().length+t),this.hyperionTestRunsService.createTestRunItems(n,this.testRun.id).pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.notificationService.success("Test run items created","Success"),this.cdr.detectChanges()},e=>{if(e instanceof Ke.a)switch(e.error){case pt.f.TestRunNotExists:this.notificationService.warning("Test run not exists");break;case pt.f.TestCaseNotExists:this.notificationService.warning("Test cases not exists");break;case pt.f.ReporterNotExists:this.notificationService.error("Test run item cannot be assigned")}else this.notificationService.error(e)})}deleteTestRunItem(e){this.hyperionTestRunsService.deleteTestRunItem(e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.notificationService.info("Test run item deleted","Success"),this.selectedTestItem&&this.selectedTestItem.id===e&&(this.selectedTestItem=null),this.router.navigate([],{queryParams:{item_id:null},replaceUrl:!0,queryParamsHandling:"merge"}),this.cdr.detectChanges()},e=>this.notificationService.error(e))}updateTestRunItem(e,t){const n=new pt.r,i=this.testRunItems$.getValue();if(i[t-1]&&i[t+1]){if(n.orderNum=Math.round((this.testRunItems$.getValue()[t-1].orderNum+this.testRunItems$.getValue()[t+1].orderNum)/2),n.orderNum===this.testRunItems$.getValue()[t-1].orderNum||n.orderNum===this.testRunItems$.getValue()[t+1].orderNum)return void this.reorderAllTestRunItems()}else this.testRunItems$.getValue()[t+1]?this.testRunItems$.getValue()[t-1]||(n.orderNum=1e3,this.testRunItems$.getValue()[t].orderNum=1e3,this.updateTestRunItem(this.testRunItems$.getValue()[t+1].id,t+1)):n.orderNum=this.testRunItems$.getValue()[t-1].orderNum+1e3;this.hyperionTestRunsService.updateTestRunItem(n,e).pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.notificationService.success("Test run item updated","Success"),this.cdr.detectChanges()},e=>{if(e instanceof Ke.a)switch(e.error){case pt.q.NothingToUpdate:this.notificationService.warning("Nothing to update")}else this.notificationService.error(e)})}reorderAllTestRunItems(){this.testRunItems$.getValue().forEach((e,t)=>{const n=new pt.r;n.orderNum=1e3*(t+1),this.hyperionTestRunsService.updateTestRunItem(n,e.id).pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.notificationService.success("Test run item updated","Success"),this.cdr.detectChanges()},e=>{if(e instanceof Ke.a)switch(e.error){case pt.q.NothingToUpdate:this.notificationService.warning("Nothing to update")}else this.notificationService.error(e)})})}startTestRun(e){this.hyperionTestRunsService.startTestRun(new mt.a,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>this.notificationService.success(`Test run #${e} started`),e=>this.notificationService.error(e))}closeTestRun(e){this.hyperionTestRunsService.closeTestRun(new mt.a,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>this.notificationService.success(`Test run #${e} closed`),e=>this.notificationService.error(e))}reopenTestRun(e){this.hyperionTestRunsService.reopenTestRun(new mt.a,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>this.notificationService.success(`Test run #${e} reopened`),e=>this.notificationService.error(e))}getLinkedAttachments(e){this.hyperionAttachmentService.getLinkedAttachments(Xe.b.TestRunItem,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.attachments.set(e,t.items),this.activeFileAttachments=t.items,this.cdr.detectChanges()},e=>this.notificationService.error(e))}unlinkFileAttachment(e,t){this.hyperionAttachmentService.deleteAttachmentLink(e,Xe.b.TestRunItem,t).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.activeFileAttachments=this.activeFileAttachments.filter(t=>t.id!==e),this.cdr.detectChanges()},e=>this.notificationService.error(e))}selectParamForTestItemSetup(e){let t=null;return this.selectedTestItem.params.specs.forEach((n,i)=>{n.setupId===e.id&&(t=i)}),t}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](ve.b),s["\u0275\u0275directiveInject"](lt.a),s["\u0275\u0275directiveInject"](ct.a),s["\u0275\u0275directiveInject"](dt.a),s["\u0275\u0275directiveInject"](Ye.a),s["\u0275\u0275directiveInject"](ht.a),s["\u0275\u0275directiveInject"](De.Lightbox),s["\u0275\u0275directiveInject"](rt.a),s["\u0275\u0275directiveInject"](fe.a),s["\u0275\u0275directiveInject"](fe.g),s["\u0275\u0275directiveInject"](ut.DomSanitizer),s["\u0275\u0275directiveInject"](ot.a),s["\u0275\u0275directiveInject"](at.a),s["\u0275\u0275directiveInject"](We.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["m-test-run-edit-page"]],decls:35,vars:20,consts:[[1,"row"],[1,"col-xl-12"],[1,"m-portlet","m-portlet--ngviewer"],[1,"progress-bar-position"],[3,"rounded","height","total","pending","inProgress","passed","failed","blocked"],[1,"m-portlet__head","p-0"],[1,"m-portlet__head-caption","full-width"],[1,"m-portlet__head-title","full-width","block"],[1,"full-width"],[3,"ngTemplateOutlet"],[1,"d-flex"],["unit","percent","direction","horizontal"],[3,"size"],["class","warning-message",3,"ngSwitch",4,"ngIf"],[1,"pt-2","col-12","left-split-content"],[2,"height","70vh"],["cdkDropList","","class","test-items-list",3,"cdkDropListDropped",4,"ngIf"],[3,"size",4,"ngIf"],["lessAttachments",""],["moreAttachments",""],["uploadButton",""],["actionButtons",""],["filterButtons",""],[1,"warning-message",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["cdkDropList","",1,"test-items-list",3,"cdkDropListDropped"],["cdkDrag","","class","animate test-item-elem",3,"active","pending","in-progress","passed","failed","blocked","click",4,"ngFor","ngForOf"],["cdkDrag","",1,"animate","test-item-elem",3,"click"],[1,"row","full-width","ml-0"],[1,"m-timeline-3","x-table"],[1,"m-timeline-3__items"],[1,"m-timeline-3_full_height"],[1,"m-timeline-3__item","ml-1",3,"ngClass"],[1,"m-timeline-3__item-desc","pl-2"],[1,"m-badge-item-text","pl-1"],[4,"ngIf"],["mat-icon-button","",1,"mr-2","gray",3,"swal","confirm"],["class","m-badge-item-text ml-3",4,"ngIf"],[1,"m-badge-item-text","ml-3"],[1,"font-italic"],[1,"col","pt-3","right-split-content"],[1,"sticky-block","f-w-400"],[1,"inline-block"],[1,"d-table-cell",2,"vertical-align","bottom"],[1,"m-timeline-3","x-table","d-table-cell","pl-2"],[1,"m-timeline-3__item",3,"ngClass"],[2,"padding-top","-10px"],[1,"inline-block","v-a-bottom","float-right",2,"line-height","32px"],[1,"dimmed"],[1,"basic-tree","pl-0"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"ngSwitch"],["class","col-md-6",4,"ngSwitchCase"],["class","col-md-6",4,"ngIf"],[1,"col-md-12","mini"],[1,"f-w-600","block","mb-0"],[1,"col-md-12","mt-1",2,"display","flex","flex-wrap","wrap"],[3,"innerHTML"],[1,"f-w-600","block"],["class","pl-0",4,"ngIf"],[1,"c-info"],[1,"pl-0"],[4,"ngFor","ngForOf"],[1,"c-success"],["class","inline-block medium-line align-text-bottom",4,"ngIf"],["class","block medium-line align-text-bottom","style","margin-left: 2rem",4,"ngIf"],[1,"inline-block","medium-line","align-text-bottom"],[1,"block","medium-line","align-text-bottom",2,"margin-left","2rem"],[3,"line-vertical",4,"ngIf"],["class","d-table-row",3,"line-vertical",4,"ngIf"],[1,"d-table-row"],[1,"d-table-cell"],["class","d-table-cell",4,"ngIf"],[1,"c-gray","m--valign-middle",2,"margin-right","-5px"],[1,"c-info","medium-line","align-text-bottom"],[1,"col-md-6"],[1,"row","m-0"],["class","attachment-count-container clickable mr-1 mb-1 animate",3,"click",4,"ngIf"],[4,"ngTemplateOutlet"],["class","thumb mr-1 mb-1 inline-block animate clickable","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",1,"thumb","mr-1","mb-1","inline-block","animate","clickable",3,"matTooltip"],[3,"src","click",4,"ngSwitchCase"],["target","_blank",3,"href","ngSwitch"],["class","placeholder inline-block",4,"ngSwitchCase"],[1,"delete","animate",3,"swal","confirm"],[1,"animate","c-white"],[3,"src","click"],[1,"placeholder","inline-block"],[1,"attachment-count-container","clickable","mr-1","mb-1","animate",3,"click"],[1,"attachment-count-label","animate"],["class","thumb mr-1 mb-1 inline-block animate clickable","matTooltipPosition","above",3,"matTooltip",4,"ngFor","ngForOf"],[1,"uploader","compact","inline-block","clickable","mb-1"],["dropZoneLabel","Drop files here",3,"onFileDrop"],["ngx-file-drop-content-tmp",""],["class","progress-conteiner mr-1 mb-1",4,"ngIf"],[1,"progress-conteiner","mr-1","mb-1"],["color","primary","mode","determinate",3,"value"],[1,"progress-percent"],["mat-icon-button","","color","primary",1,"animate",3,"click"],[1,"animate"],[1,"action-bar-button"],[1,"inline-block","ml-3","animate-filter"],["mat-raised-button","","matTooltip","Click to filter","matTooltipPosition","above",1,"mat-button","c-light-gray",3,"click"],[1,"f-s-24","c-white"],[1,"c-white","ml-1","v-a-middle"],["mat-raised-button","","color","primary",3,"click"],[1,"c-white","f-s-24"],[1,"inline-block","ml-3",3,"ngSwitch"],["mat-raised-button","","matTooltip","Click to start","matTooltipPosition","above","class","b-c-success",3,"click",4,"ngSwitchCase"],["mat-raised-button","","matTooltip","Click to close","matTooltipPosition","above","class","b-c-warning",3,"swal","confirm",4,"ngSwitchCase"],["mat-raised-button","","matTooltip","Click to reopen","matTooltipPosition","above","class","b-c-info",3,"swal","confirm",4,"ngSwitchCase"],["mat-raised-button","","matTooltip","Click to start","matTooltipPosition","above",1,"b-c-success",3,"click"],["mat-raised-button","","matTooltip","Click to close","matTooltipPosition","above",1,"b-c-warning",3,"swal","confirm"],[1,"c-white","f-s-24","ml-1","v-a-middle"],[1,"c-white"],["mat-raised-button","","matTooltip","Click to reopen","matTooltipPosition","above",1,"b-c-info",3,"swal","confirm"],[1,"pt-2"],[1,"inline-block","legend-row-checked","legend-row-height",2,"line-height","1"],["mat-button","",3,"click"],["color","primary",3,"ngSwitch"],[1,"inline-block","va-mid"],["type","checkbox","id","test2",3,"disabled"],["for","test2",1,"legend-item","pending",3,"click"],["type","checkbox","id","test3",3,"disabled"],["for","test3",1,"legend-item","in-progress",3,"click"],["type","checkbox","id","test4",3,"disabled"],["for","test4",1,"legend-item","passed",3,"click"],["type","checkbox","id","test5",3,"disabled"],["for","test5",1,"legend-item","failed",3,"click"],["type","checkbox","id","test6",3,"disabled"],["for","test6",1,"legend-item","blocked","clickable",3,"click"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275element"](4,"m-smart-progress-bar",4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",5),s["\u0275\u0275elementStart"](6,"div",6),s["\u0275\u0275elementStart"](7,"div",7),s["\u0275\u0275elementStart"](8,"div",8),s["\u0275\u0275elementContainer"](9,9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",6),s["\u0275\u0275elementStart"](11,"div",7),s["\u0275\u0275elementStart"](12,"div",8),s["\u0275\u0275elementContainer"](13,9),s["\u0275\u0275pipe"](14,"async"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",10),s["\u0275\u0275elementStart"](16,"as-split",11),s["\u0275\u0275elementStart"](17,"as-split-area",12),s["\u0275\u0275template"](18,_t,4,4,"div",13),s["\u0275\u0275pipe"](19,"async"),s["\u0275\u0275pipe"](20,"async"),s["\u0275\u0275elementStart"](21,"div",14),s["\u0275\u0275elementStart"](22,"perfect-scrollbar",15),s["\u0275\u0275template"](23,wt,2,1,"div",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](24,nn,43,20,"as-split-area",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](25,dn,4,3,"ng-template",null,18,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](27,gn,2,2,"ng-template",null,19,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](29,vn,5,3,"ng-template",null,20,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](31,In,16,4,"ng-template",null,21,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](33,Pn,34,21,"ng-template",null,22,s["\u0275\u0275templateRefExtractor"])),2&e){const e=s["\u0275\u0275reference"](32),n=s["\u0275\u0275reference"](34);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("rounded",!1)("height",10)("total",t.testRun.totalItemCount)("pending",t.testRun.pendingItemCount)("inProgress",t.testRun.inProgressItemCount)("passed",t.testRun.passedItemCount)("failed",t.testRun.failedItemCount)("blocked",t.testRun.blockedItemCount),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngTemplateOutlet",e),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngTemplateOutlet",s["\u0275\u0275pipeBind1"](14,14,t.showFilter$)?n:null),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("size",t.selectedTestItem?70:100),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",0===s["\u0275\u0275pipeBind1"](19,16,t.testRunItems$).length||0===s["\u0275\u0275pipeBind1"](20,18,t.filteredTestRunItems$).length),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngIf",t.filteredTestRunItems$.getValue()),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.selectedTestItem)}},directives:[gt.a,i.r,Re.c,Re.b,i.m,Oe.b,i.o,i.p,i.q,le,i.l,me,i.k,be.a,$e.b,xe.a,ke.a,je.a,je.b,Ie.a],pipes:[i.b,i.e,i.g],styles:['.padded[_ngcontent-%COMP%]{margin-top:-20px;margin-bottom:-30px;padding-top:15px;padding-bottom:15px}.non-sticky-block[_ngcontent-%COMP%]{margin-left:-15px;transition:background-color 125ms linear}.sticky-block-parent[_ngcontent-%COMP%]{box-shadow:-5px 0 5px -5px rgba(51,51,51,.25),0 0 5px 0 rgba(51,51,51,.25);padding-right:0}.sticky-block[_ngcontent-%COMP%]{display:block;position:-webkit-sticky;position:sticky;top:100px;z-index:100}.sticky-row[_ngcontent-%COMP%]{margin-right:-30px}.progress[_ngcontent-%COMP%]{width:60%}.progress-bar-in-progress[_ngcontent-%COMP%]{background-color:var(--info)}.progress-bar-passed[_ngcontent-%COMP%]{background-color:var(--success)}.progress-bar-failed[_ngcontent-%COMP%]{background-color:var(--danger)}.progress-bar-blocked[_ngcontent-%COMP%]{background-color:var(--warning)}  .mat-list-item-content{cursor:pointer}.item-selected[_ngcontent-%COMP%]{border-bottom:1px dashed var(--info)}.m-badge-item-text[_ngcontent-%COMP%]{line-height:31px;vertical-align:middle}.test-run-item-selected[_ngcontent-%COMP%]{border:1px dashed var(--info);border-radius:3px}.btn[_ngcontent-%COMP%]{padding:8px 12px!important}.btn-status[_ngcontent-%COMP%]{font-size:1rem!important}.m-timeline-3[_ngcontent-%COMP%]   .m-timeline-3__item[_ngcontent-%COMP%]{margin-bottom:0}.m-timeline-3[_ngcontent-%COMP%]   .m-timeline-3_full_height[_ngcontent-%COMP%]   .m-timeline-3__item[_ngcontent-%COMP%]:before{top:3px!important;height:80%!important}.mat-list-base[_ngcontent-%COMP%]{padding-top:0!important}.mat-icon-button[_ngcontent-%COMP%]{height:31px;width:31px;line-height:31px}.gray[_ngcontent-%COMP%]{color:var(--gray)}.test-items-list[_ngcontent-%COMP%]{max-width:100%;display:block;overflow:hidden}.test-item-elem[_ngcontent-%COMP%]{font-size:14px!important;font-weight:400!important;margin-bottom:2px}.test-item-elem.pending[_ngcontent-%COMP%]{background-color:rgba(212,213,230,.25)}.test-item-elem.pending.active[_ngcontent-%COMP%]{background-color:rgba(212,213,230,.75)}.test-item-elem.in-progress[_ngcontent-%COMP%]{background-color:rgba(54,163,247,.25)}.test-item-elem.in-progress.active[_ngcontent-%COMP%]{background-color:rgba(54,163,247,.75)}.test-item-elem.passed[_ngcontent-%COMP%]{background-color:rgba(52,191,163,.25)}.test-item-elem.passed.active[_ngcontent-%COMP%]{background-color:rgba(52,191,163,.75)}.test-item-elem.failed[_ngcontent-%COMP%]{background-color:rgba(244,81,108,.25)}.test-item-elem.failed.active[_ngcontent-%COMP%]{background-color:rgba(244,81,108,.75)}.test-item-elem.blocked[_ngcontent-%COMP%]{background-color:rgba(255,184,34,.25)}.test-item-elem.blocked.active[_ngcontent-%COMP%]{background-color:rgba(255,184,34,.75)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .test-items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .test-item-elem[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.progress-percent[_ngcontent-%COMP%]{text-align:center;top:-60%;z-index:500;display:block;position:relative;font-size:16px}.progress-container[_ngcontent-%COMP%]{display:inline-block;height:100px;color:#0782d0;width:100px!important;height:100px!important;border:1px solid rgba(7,130,208,.25)!important;border-radius:8px!important;transition:all .125s linear}  [type=checkbox]:checked,   [type=checkbox]:not(:checked){position:absolute;left:-9999px;margin-left:10px}  [type=checkbox]:checked+label,   [type=checkbox]:not(:checked)+label{position:relative;padding-left:1.95em;cursor:pointer;margin-right:15px;padding-top:3px}  [type=checkbox]:checked+label.all:before,   [type=checkbox]:checked+label.pending:before,   [type=checkbox]:not(:checked)+label.all:before,   [type=checkbox]:not(:checked)+label.pending:before{content:"";font-weight:600;position:absolute;left:0;top:0;width:1.5em;height:1.5em;border-radius:4px;background-color:rgba(212,213,230,.75);border:1px solid #d4d5e6;box-shadow:inset 0 1px 3px rgba(0,0,0,.1)}  [type=checkbox]:checked+label.in-progress:before,   [type=checkbox]:not(:checked)+label.in-progress:before{content:"";font-weight:600;position:absolute;left:0;top:0;width:1.5em;height:1.5em;border:1px solid #d4d5e6;border-radius:4px;background-color:rgba(54,163,247,.75);box-shadow:inset 0 1px 3px rgba(0,0,0,.1)}  [type=checkbox]:checked+label.passed:before,   [type=checkbox]:not(:checked)+label.passed:before{content:"";font-weight:600;position:absolute;left:0;top:0;width:1.5em;height:1.5em;border-radius:4px;background-color:rgba(52,191,163,.75);border:1px solid #34bfa3;box-shadow:inset 0 1px 3px rgba(0,0,0,.1)}  [type=checkbox]:checked+label.failed:before,   [type=checkbox]:not(:checked)+label.failed:before{content:"";position:absolute;left:0;top:0;width:1.5em;height:1.5em;font-weight:600;border-radius:4px;background-color:rgba(244,81,108,.75);border:1px solid #f4516c;box-shadow:inset 0 1px 3px rgba(0,0,0,.1)}  [type=checkbox]:checked+label.blocked:before,   [type=checkbox]:not(:checked)+label.blocked:before{content:"";position:absolute;left:0;top:0;width:1.5em;height:1.5em;font-weight:600;background-color:rgba(255,184,34,.75);border:1px solid #ffb822;border-radius:4px;box-shadow:inset 0 1px 3px rgba(0,0,0,.1)}.legend-item[_ngcontent-%COMP%]{font-weight:500}  [type=checkbox]:checked+label:after,   [type=checkbox]:not(:checked)+label:after{position:absolute;top:.18em;left:.18em;font-size:1.5em;font-weight:600;line-height:.8;color:#010603;transition:all .2s;font-family:Lucida Sans Unicode,Arial Unicode MS,Arial}  [type=checkbox]:not(:checked)+label:after{opacity:0;transform:scale(0)}  [type=checkbox]:checked+label:after{opacity:1;transform:scale(1)}  [type=checkbox]:disabled:checked+label:before,   [type=checkbox]:disabled:not(:checked)+label:before{box-shadow:none;border-color:#bbb;background-color:#ddd}  [type=checkbox]:disabled:checked+label:after{color:#999}  [type=checkbox]:disabled+label{color:#aaa}.filter-border[_ngcontent-%COMP%]{box-shadow:-5px 0 5px -5px rgba(51,51,51,.25),0 0 5px 0 rgba(51,51,51,.25);padding-right:0;border:1px solid #ababab}.animate-filter[_ngcontent-%COMP%]{transition:all .5s ease-in-out}.action-bar-button[_ngcontent-%COMP%], .animate-filter[_ngcontent-%COMP%]{padding-right:15px}.progress-bar-position[_ngcontent-%COMP%]{position:relative;top:-5px}.m-portlet__head-title.full-width.block[_ngcontent-%COMP%]{width:100%;padding-bottom:10px}.warning-message[_ngcontent-%COMP%]{display:block;position:relative;padding:15px}  .ps__rail-x{visibility:hidden}.line-vertical[_ngcontent-%COMP%]{background:rgba(255,184,34,.3)}'],changeDetection:0}),e})();var Dn=n("43X2"),On=n("PiIy"),jn=n("Ehhc"),$n=n("+0xr"),Mn=n("sWy5");function Fn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1," ID "),s["\u0275\u0275elementEnd"]())}function An(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"strong"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Test run #",e.id,"")}}function Vn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"strong"),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](e.title)}}function Ln(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"a",39),s["\u0275\u0275template"](2,An,2,1,"strong",37),s["\u0275\u0275template"](3,Vn,2,1,"strong",37),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"button",40),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit,n=s["\u0275\u0275nextContext"]();return n.editableMap.set(t.id,!0),n.windowRefService.focusElementById("test-run-"+t.id,50)}),s["\u0275\u0275elementStart"](5,"mat-icon"),s["\u0275\u0275text"](6,"edit"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate1"]("routerLink","",e.id,"/manage"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.title),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.title)}}function Bn(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"td",36),s["\u0275\u0275template"](1,Ln,7,3,"ng-container",37),s["\u0275\u0275elementStart"](2,"input",38),s["\u0275\u0275listener"]("keyup.enter",function(e){return e.target.blur()})("blur",function(n){s["\u0275\u0275restoreView"](e);const i=t.$implicit,r=s["\u0275\u0275nextContext"]();return r.updateTestRun(i.id,n.target.value),r.editableMap.set(i.id,!1)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!n.editableMap.get(e.id)),s["\u0275\u0275advance"](1),s["\u0275\u0275styleProp"]("display",n.editableMap.get(e.id)?"block":"none"),s["\u0275\u0275property"]("id","test-run-"+e.id)("value",e.title?e.title:"Test run #"+e.id)}}function Nn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1," Status "),s["\u0275\u0275elementEnd"]())}function zn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Draft"),s["\u0275\u0275elementEnd"]())}function Hn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"In Progress"),s["\u0275\u0275elementEnd"]())}function qn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Closed"),s["\u0275\u0275elementEnd"]())}function Un(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",41),s["\u0275\u0275elementStart"](1,"div",42),s["\u0275\u0275elementStart"](2,"div",43),s["\u0275\u0275elementStart"](3,"div",44),s["\u0275\u0275elementStart"](4,"div",45),s["\u0275\u0275elementStart"](5,"span",46),s["\u0275\u0275template"](6,zn,2,0,"span",47),s["\u0275\u0275template"](7,Hn,2,0,"span",47),s["\u0275\u0275template"](8,qn,2,0,"span",47),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngClass",n.badgeStatusClass(e.status)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngSwitch",e.status),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.statusEnum.Draft),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.statusEnum.InProgress),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.statusEnum.Closed)}}function Gn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",48),s["\u0275\u0275text"](1," Progress "),s["\u0275\u0275elementEnd"]())}function Zn(e,t){1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1," Not started "),s["\u0275\u0275elementContainerEnd"]())}function Qn(e,t){1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1," No tests are added "),s["\u0275\u0275elementContainerEnd"]())}function Wn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",51),s["\u0275\u0275element"](1,"m-smart-progress-bar",52),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("total",e.totalItemCount)("pending",e.pendingItemCount)("inProgress",e.inProgressItemCount)("passed",e.passedItemCount)("failed",e.failedItemCount)("blocked",e.blockedItemCount)}}function Yn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",49),s["\u0275\u0275template"](1,Zn,2,0,"ng-container",37),s["\u0275\u0275template"](2,Qn,2,0,"ng-container",37),s["\u0275\u0275template"](3,Wn,2,6,"div",50),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.status===n.statusEnum.Draft),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.status!==n.statusEnum.Draft&&0===e.totalItemCount),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.status!==n.statusEnum.Draft&&e.totalItemCount>0)}}function Xn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",35),s["\u0275\u0275text"](1," Created At "),s["\u0275\u0275elementEnd"]())}function Kn(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"td",53),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"date"),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](2,1,e.createdAt,"yyyy-MM-dd HH:mm")," ")}}function Jn(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"th",54),s["\u0275\u0275text"](1," Actions "),s["\u0275\u0275elementEnd"]())}function ei(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",62),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().startTestRun(t.id)}),s["\u0275\u0275elementStart"](1,"mat-icon",63),s["\u0275\u0275text"](2,"play_arrow"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275classProp"]("dimmed",0===e.totalItemCount),s["\u0275\u0275property"]("disabled",0===e.totalItemCount)}}const ti=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Close",confirmButtonColor:"#343a40",confirmButtonClass:"btn-dark",showCancelButton:!0,heightAuto:!1}};function ni(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",64),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().closeTestRun(t.id)}),s["\u0275\u0275elementStart"](1,"mat-icon",65),s["\u0275\u0275text"](2,"stop"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](1,ti,"Close <b>Test run "+(e.title?e.title:"#"+e.id)+"</b>?"))}}const ii=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Reopen",confirmButtonColor:"#36a3f7",confirmButtonClass:"btn-info",showCancelButton:!0,heightAuto:!1}};function si(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",66),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().reopenTestRun(t.id)}),s["\u0275\u0275elementStart"](1,"mat-icon",67),s["\u0275\u0275text"](2,"refresh"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](1,ii,"Reopen <b>Test run "+(e.title?e.title:"#"+e.id)+"</b>?"))}}const ri=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Clone",confirmButtonColor:"#343a40",showCancelButton:!0,heightAuto:!1}};function ai(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",68),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().cloneTestRun(t.id)}),s["\u0275\u0275elementStart"](1,"mat-icon",69),s["\u0275\u0275text"](2,"content_copy"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](1,ri,"Clone <b>Test run "+(e.title?e.title:"#"+e.id)+"</b>?"))}}const oi=function(e){return{title:"Confirmation",html:e,type:"question",confirmButtonText:"Delete",confirmButtonColor:"#f4516c",confirmButtonClass:"btn-danger",showCancelButton:!0,heightAuto:!1}};function li(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"td",55),s["\u0275\u0275template"](1,ei,3,3,"button",56),s["\u0275\u0275template"](2,ni,3,3,"button",57),s["\u0275\u0275template"](3,si,3,3,"button",58),s["\u0275\u0275template"](4,ai,3,3,"button",59),s["\u0275\u0275elementStart"](5,"button",60),s["\u0275\u0275listener"]("confirm",function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"]().deleteTestRun(n.id)}),s["\u0275\u0275elementStart"](6,"mat-icon",61),s["\u0275\u0275text"](7,"delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngSwitch",e.status),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.statusEnum.Draft),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.statusEnum.InProgress),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",n.statusEnum.Closed),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.status===n.statusEnum.Closed||e.status===n.statusEnum.InProgress),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("swal",s["\u0275\u0275pureFunction1"](6,oi,"Delete <b>Test run "+(e.title?e.title:"#"+e.id)+"</b>?"))}}function ci(e,t){1&e&&s["\u0275\u0275element"](0,"tr",70)}function di(e,t){1&e&&s["\u0275\u0275element"](0,"tr",71)}let hi=(()=>{class e{constructor(e,t,n,i,s,r,a,o,c,d,h){this.cdr=e,this.sanitizer=t,this.dialog=n,this.hyperionProjectService=i,this.hyperionTestRunsService=s,this.hyperionTestCaseService=r,this.notificationService=a,this.projectService=o,this.websocketService=c,this.windowRefService=d,this.route=h,this.destroy$=new l.b,this.displayedColumns=["id","status","progress","createdAt","actions"],this.dataSource=new Dn.a,this.editableMap=new Map,this.defaultOrderBy="id",this.defaultOrderDir="desc",this.orderBy=pt.o.Id,this.orderDir=Ke.h.Desc,this.offset=0,this.pageSize=10,this.pageSizes=[10,25,50,100],this.total=0,this.statusEnum=Xe.r}ngOnInit(){this.route.data.pipe(Object(u.a)(this.destroy$)).subscribe(e=>this.initialize(e.activeProject)),Object(p.a)(this.websocketService.testRunCreated,this.websocketService.testRunUpdated,this.websocketService.testRunStarted,this.websocketService.testRunClosed,this.websocketService.testRunReopened,this.websocketService.testRunDeleted).pipe(Object(u.a)(this.destroy$),Object(He.a)(e=>this.project&&this.project.id===e.data.projectId)).subscribe(e=>{let t=!1;e instanceof Je.u?t=this.canReloadOnCreate():e instanceof Je.v?t=this.dataSource.containsItem(this.equalityComparer,e.data):this.dataSource.updateItem(this.equalityComparer,e.data),t&&this.loadItems(this.offset)})}ngAfterViewInit(){Object(p.a)(this.paginator.page,this.sort.sortChange).pipe(Object(u.a)(this.destroy$),Object(_.a)(e=>{e.active&&e.direction&&(this.paginator.pageIndex=0),this.pageSize=this.paginator.pageSize,this.dataSource.loadItems(()=>this.getData(this.pageSize*this.paginator.pageIndex))})).subscribe(),this.loadItems()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initialize(e){this.project=e,this.loadItems()}getData(e){return this.hyperionTestRunsService.getTestRuns(this.project.id,this.orderBy,this.orderDir,e,this.pageSize).pipe(Object(u.a)(this.destroy$),Object(_.a)(e=>{this.total=e.total,this.editableMap.clear(),e.items.forEach(e=>this.editableMap.set(e.id,!1))}),Object(f.a)(e=>e.items))}equalityComparer(e,t){return e instanceof Xe.p&&t instanceof Xe.p&&e.id===t.id}canReloadOnCreate(){return this.total<this.pageSize||(this.orderBy===pt.o.Id||this.orderBy===pt.o.CreatedAt)&&this.orderDir===Ke.h.Desc}loadItems(e=0){this.offset=e,this.dataSource.loadItems(()=>this.getData(e))}badgeStatusClass(e){switch(e){case Xe.r.Draft:return"m-timeline-3__item--metal";case Xe.r.InProgress:return"m-timeline-3__item--info";case Xe.r.Closed:return"m-timeline-3__item--warning"}}createTestRunDialog(){Ze.a.fire({type:"question",title:"Create new test run?",input:"text",inputPlaceholder:"Test run #",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Create"}).then(e=>{void 0!==e.value&&this.createTestRun(e.value)})}createTestRun(e=null){const t=new pt.h;t.title=""===e?null:e,this.hyperionTestRunsService.createTestRun(t,this.project.id).pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.notificationService.success(`Test run #${e.id} added`),this.loadItems()},e=>{this.notificationService.error(e)})}deleteTestRun(e){this.hyperionTestRunsService.deleteTestRun(e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.notificationService.success(`Test run #${e} deleted`),this.loadItems()},e=>{e instanceof Ke.g&&this.loadItems(),this.notificationService.error(e)})}startTestRun(e){this.hyperionTestRunsService.startTestRun(new mt.a,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.notificationService.success(`Test run #${e} started`),this.loadItems()},e=>{e instanceof Ke.g&&this.loadItems(),this.notificationService.error(e)})}closeTestRun(e){this.hyperionTestRunsService.closeTestRun(new mt.a,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.notificationService.success(`Test run #${e} closed`),this.loadItems()},e=>{e instanceof Ke.g&&this.loadItems(),this.notificationService.error(e)})}reopenTestRun(e){this.hyperionTestRunsService.reopenTestRun(new mt.a,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.notificationService.success(`Test run #${e} reopened`),this.loadItems()},e=>{e instanceof Ke.g&&this.loadItems(),this.notificationService.error(e)})}updateTestRun(e,t){const n=new pt.s;n.title=t,this.hyperionTestRunsService.updateTestRun(n,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.notificationService.success(`Test run #${e} updated`),this.loadItems()},e=>{e instanceof Ke.g&&this.loadItems(),this.notificationService.error(e)})}cloneTestRun(e){this.hyperionTestRunsService.cloneTestRun(new mt.a,e).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.notificationService.success(`Test run #${e} cloned`),this.loadItems()},e=>{e instanceof Ke.g&&this.loadItems(),this.notificationService.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](ut.DomSanitizer),s["\u0275\u0275directiveInject"](ve.b),s["\u0275\u0275directiveInject"](ct.a),s["\u0275\u0275directiveInject"](ht.a),s["\u0275\u0275directiveInject"](Ye.a),s["\u0275\u0275directiveInject"](rt.a),s["\u0275\u0275directiveInject"](On.a),s["\u0275\u0275directiveInject"](We.a),s["\u0275\u0275directiveInject"](jn.a),s["\u0275\u0275directiveInject"](fe.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["m-test-runs-page"]],viewQuery:function(e,t){if(1&e&&(s["\u0275\u0275viewQuery"](we.a,!0),s["\u0275\u0275viewQuery"](Ee.a,!0)),2&e){let e;s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.paginator=e.first),s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.sort=e.first)}},decls:40,vars:9,consts:[[1,"row"],[1,"col-xl-12"],[1,"m-portlet","m-portlet--ngviewer"],[1,"m-portlet__head","compact"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"action-bar-button"],["mat-raised-button","","color","primary",3,"click"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],["href","javascript:void(null);","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],[1,"m-portlet__body","m-portlet__body--no-padding","pre-wrapped"],[1,"m-portlet__preview","p-0"],["mat-table","","matSort","","matSortDisableClear","",3,"matSortActive","matSortDirection","dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","width: 320px",4,"matCellDef"],["matColumnDef","status"],["mat-cell","","style","width: 85px",4,"matCellDef"],["matColumnDef","progress"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdAt"],["mat-cell","","style","width: 120px",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-left","style","width: 160px",3,"ngSwitch",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"b-transparent"],[1,"toolbar-spacer",2,"flex","1 1 auto"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"width","320px"],[4,"ngIf"],[1,"mr-4",2,"width","auto",3,"id","value","keyup.enter","blur"],[3,"routerLink"],["mat-icon-button","",1,"ml-2","mr-2","gray",3,"click"],["mat-cell","",2,"width","85px"],[1,"m-timeline-3","x-table"],[1,"m-timeline-3__items"],[1,"m-timeline-3__item","m-0",3,"ngClass"],[1,"m-timeline-3__item-desc","pl-2"],[1,"m-timeline-3__item-text","pl-1",2,"line-height","31px",3,"ngSwitch"],[4,"ngSwitchCase"],["mat-header-cell",""],["mat-cell",""],["style","width: auto;padding-right: 10px",4,"ngIf"],[2,"width","auto","padding-right","10px"],[3,"total","pending","inProgress","passed","failed","blocked"],["mat-cell","",2,"width","120px"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-left",2,"width","160px",3,"ngSwitch"],["mat-icon-button","","matTooltip","Click to start","matTooltipPosition","above",3,"dimmed","disabled","click",4,"ngSwitchCase"],["mat-icon-button","","matTooltip","Click to close","matTooltipPosition","above",3,"swal","confirm",4,"ngSwitchCase"],["mat-icon-button","","matTooltip","Click to reopen","matTooltipPosition","above",3,"swal","confirm",4,"ngSwitchCase"],["mat-icon-button","","matTooltip","Click to clone","matTooltipPosition","above",3,"swal","confirm",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Click to delete","matTooltipPosition","above",3,"swal","confirm"],[1,"c-error","f-s-24"],["mat-icon-button","","matTooltip","Click to start","matTooltipPosition","above",3,"disabled","click"],[1,"c-success","f-s-24"],["mat-icon-button","","matTooltip","Click to close","matTooltipPosition","above",3,"swal","confirm"],[1,"c-warning","f-s-24"],["mat-icon-button","","matTooltip","Click to reopen","matTooltipPosition","above",3,"swal","confirm"],[1,"c-info","f-s-24"],["mat-icon-button","","matTooltip","Click to clone","matTooltipPosition","above",3,"swal","confirm"],[1,"gray","f-s-24"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275elementStart"](5,"div",5),s["\u0275\u0275elementStart"](6,"h3",6),s["\u0275\u0275elementStart"](7,"div",7),s["\u0275\u0275elementStart"](8,"button",8),s["\u0275\u0275listener"]("click",function(){return t.createTestRunDialog()}),s["\u0275\u0275text"](9," Add test run "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",9),s["\u0275\u0275elementStart"](11,"ul",10),s["\u0275\u0275elementStart"](12,"li",11),s["\u0275\u0275elementStart"](13,"a",12),s["\u0275\u0275listener"]("click",function(){return t.loadItems()}),s["\u0275\u0275element"](14,"i",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",14),s["\u0275\u0275elementStart"](16,"div",15),s["\u0275\u0275elementStart"](17,"table",16),s["\u0275\u0275elementContainerStart"](18,17),s["\u0275\u0275template"](19,Fn,2,0,"th",18),s["\u0275\u0275template"](20,Bn,3,5,"td",19),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](21,20),s["\u0275\u0275template"](22,Nn,2,0,"th",18),s["\u0275\u0275template"](23,Un,9,5,"td",21),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](24,22),s["\u0275\u0275template"](25,Gn,2,0,"th",23),s["\u0275\u0275template"](26,Yn,4,3,"td",24),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](27,25),s["\u0275\u0275template"](28,Xn,2,0,"th",18),s["\u0275\u0275template"](29,Kn,3,4,"td",26),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](30,27),s["\u0275\u0275template"](31,Jn,2,0,"th",28),s["\u0275\u0275template"](32,li,8,8,"td",29),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275template"](33,ci,1,0,"tr",30),s["\u0275\u0275template"](34,di,1,0,"tr",31),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"mat-toolbar",32),s["\u0275\u0275elementStart"](36,"mat-toolbar-row"),s["\u0275\u0275element"](37,"m-test-status-legend"),s["\u0275\u0275element"](38,"span",33),s["\u0275\u0275element"](39,"mat-paginator",34),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](17),s["\u0275\u0275property"]("matSortActive",t.defaultOrderBy)("matSortDirection",t.defaultOrderDir)("dataSource",t.dataSource),s["\u0275\u0275advance"](16),s["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("length",t.total)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizes))},directives:[be.a,ke.a,$n.j,Ee.a,$n.c,$n.e,$n.b,$n.g,$n.i,Te.a,Te.c,Mn.a,we.a,$n.d,Ee.b,$n.a,i.m,fe.h,xe.a,i.k,i.o,i.p,gt.a,$e.b,$n.f,$n.h],pipes:[i.e],styles:[".gray[_ngcontent-%COMP%]{color:var(--gray)}.mat-icon-button[_ngcontent-%COMP%]{line-height:21px!important}.action-bar-button[_ngcontent-%COMP%]{padding-right:15px;padding-top:15px;padding-bottom:10px}  .ps__rail-x{visibility:hidden}"],changeDetection:0}),e})();var mi=n("NuMO");let pi=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,ue,ge.e,be.b,_e.b,ve.f,Se.d,xe.b,Ce.c,ye.c,we.b,Ie.b,Ee.c,Te.b,ke.b,Pe.c,Re.a,De.LightboxModule,je.c,Oe.c,$e.c,Fe.a,Ae.a,Me.a,fe.i.forChild([{path:":project",children:[{path:"",component:hi,resolve:{activeProject:Ve.a}},{path:":id/manage",component:Rn,resolve:{activeProject:Ve.a,testRun:Le.a}}],canActivate:[mi.a]}])]]}),e})()}}]);