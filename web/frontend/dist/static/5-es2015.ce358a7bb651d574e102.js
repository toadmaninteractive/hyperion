(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{N1IV:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e[e.Before=-1]="Before",e[e.Into=0]="Into",e[e.After=1]="After",e[e.Root=2]="Root",e[e.Null=null]="Null",e}({})},QyQT:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var r=n("fXoL"),o=n("UTw3"),i=n("Y4+Y"),d=n("N1IV"),a=n("2Vo4"),s=n("pLZG"),l=n("/uUt"),c=n("ofXK"),p=n("bSwM");const h=["addButtonTemplate"],g=["addParaButtonTemplate"],m=["nodeTitleTemplate"];function u(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1," Node template not defined\n"),r["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275listener"]("dragover",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onDragOverRoot(t)})("drop",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onDropToRoot(t)})("dragleave",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onDragLeaveRoot()}),r["\u0275\u0275elementStart"](1,"div",9),r["\u0275\u0275text"](2," Drop to root "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275classProp"]("drop-parent-select",e.dragOverRoot)}}const v=function(e){return{node:e}};function x(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"li",13),r["\u0275\u0275elementContainer"](1,14),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275nextContext"](2);const t=r["\u0275\u0275reference"](6),n=r["\u0275\u0275reference"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngTemplateOutlet",e.value.children.length?t:n)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](2,v,e.value))}}function N(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,x,2,4,"li",12),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!n.hiddenNodeSet.has(e.value.item.id))}}function C(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ul",10),r["\u0275\u0275template"](1,N,2,1,"ng-container",11),r["\u0275\u0275pipe"](2,"keyvalue"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](2,1,e.nodes))}}function y(e,t){if(1&e&&r["\u0275\u0275elementContainer"](0,14),2&e){const e=t.node;r["\u0275\u0275nextContext"]();const n=r["\u0275\u0275reference"](8);r["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](2,v,e))}}function E(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"li",13),r["\u0275\u0275elementContainer"](1,14),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275nextContext"](3);const t=r["\u0275\u0275reference"](6),n=r["\u0275\u0275reference"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngTemplateOutlet",e.children.length?t:n)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](2,v,e))}}function D(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,E,2,4,"li",12),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!n.hiddenNodeSet.has(e.item.id))}}function b(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"ul",10),r["\u0275\u0275template"](2,D,2,1,"ng-container",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().node;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.children)}}function w(e,t){if(1&e&&(r["\u0275\u0275elementContainer"](0,14),r["\u0275\u0275template"](1,b,3,1,"ng-container",15)),2&e){const e=t.node;r["\u0275\u0275nextContext"]();const n=r["\u0275\u0275reference"](8);r["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](3,v,e)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.expanded)}}function S(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",21),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().node;return t.expanded=!t.expanded}),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().node;r["\u0275\u0275classProp"]("la-angle-right",!e.expanded)("la-angle-down",e.expanded)}}function T(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-checkbox",22),r["\u0275\u0275listener"]("change",function(t){r["\u0275\u0275restoreView"](e);const n=r["\u0275\u0275nextContext"]().node;return r["\u0275\u0275nextContext"]().onCheckNode(n,t.checked)}),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().node,t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("indeterminate",t.indeterminateNodeSet.has(e.item.id))("checked",t.checkedNodeSet.has(e.item.id))("disabled",e.item.isDraft)}}function I(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",23),r["\u0275\u0275listener"]("mousedown",function(t){r["\u0275\u0275restoreView"](e);const n=r["\u0275\u0275nextContext"]().node;return r["\u0275\u0275nextContext"]().setDraggedNode(t,n)})("mouseup",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).unsetDraggedNode()}),r["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"i",24),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().node;return r["\u0275\u0275nextContext"]().onRemoveNode(t)}),r["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275listener"]("dragover",function(n){r["\u0275\u0275restoreView"](e);const o=t.node;return r["\u0275\u0275nextContext"]().onDragOver(n,o)})("dragend",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onDragEnd(t)})("drop",function(n){r["\u0275\u0275restoreView"](e);const o=t.node;return r["\u0275\u0275nextContext"]().onDrop(n,o)})("dragstart",function(n){r["\u0275\u0275restoreView"](e);const o=t.node;return r["\u0275\u0275nextContext"]().onDragStart(n,o)}),r["\u0275\u0275template"](1,S,1,4,"i",17),r["\u0275\u0275template"](2,T,1,3,"mat-checkbox",18),r["\u0275\u0275template"](3,I,1,0,"i",19),r["\u0275\u0275elementContainer"](4,14),r["\u0275\u0275elementContainer"](5,14),r["\u0275\u0275template"](6,O,1,0,"i",20),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.node,n=r["\u0275\u0275nextContext"](),o=r["\u0275\u0275reference"](10);r["\u0275\u0275classProp"]("dimmed",n.dimmedNodeSet.has(e.item.id))("more",n.dimmedNodeSet.has(e.item.id))("drag-start",e===n.draggedNode)("drop-center",e===n.hoveredNode&&0===n.draggedNodeHoveredType&&e!==n.draggedNode&&n.canDropInto(n.draggedNode,n.hoveredNode))("drop-before",e===n.hoveredNode&&-1===n.draggedNodeHoveredType&&e!==n.draggedNode&&n.canDropBefore(n.draggedNode,n.hoveredNode))("drop-below",e===n.hoveredNode&&1===n.draggedNodeHoveredType&&e!==n.draggedNode&&n.canDropAfter(n.draggedNode,n.hoveredNode)),r["\u0275\u0275attribute"]("draggable",e===n.draggedNode),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.children.length>0),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.showCheckboxes),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.canDrag&&0!==e.item.id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngTemplateOutlet",n.nodeTitleTemplate)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](21,v,e)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngTemplateOutlet",n.addButtonTemplate?n.addButtonTemplate:o)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](23,v,e)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.canRemove)}}function k(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",26),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().node;return r["\u0275\u0275nextContext"]().onAddNode(t)}),r["\u0275\u0275element"](1,"i",27),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().node,t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("disabled",t.hasDraftChildrenSet.has(e.item.id))}}function R(e,t){if(1&e&&r["\u0275\u0275template"](0,k,2,1,"button",25),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngIf",e.canAdd)}}class B extends o.i{constructor(e,t){super(),this.expanded=!1,this.item=null,this.children=[],this.item=e.item,this.children=this.convertToDynamicNodes(e.children,t),this.expanded=t.has(e.item.id)}convertToDynamicNodes(e,t){return e.map(e=>new B(e,t))}}let P=(()=>{class e{constructor(e){this.cdr=e,this.inputNodes$=new a.a(null),this.flatNodes=new Map(null),this.flatDynamicNodes=new Map(null),this.dimmedNodeSet=new Set,this.hiddenNodeSet=new Set,this.canAdd=!0,this.canRemove=!0,this.showCheckboxes=!1,this.nodeAdded=new r.EventEmitter,this.nodeRemoved=new r.EventEmitter,this.nodeModified=new r.EventEmitter,this.showNotification=new r.EventEmitter,this.checkedNodeSetChange=new r.EventEmitter,this.treeRendered=new r.EventEmitter,this.checkedNodeSet=new Set,this.indeterminateNodeSet=new Set,this.nodes=new Map,this.expandedNodeSet=new Set,this.hasDraftChildrenSet=new Set,this.ready$=new a.a(!1),this.dragOverRoot=!1,this.delayBeforeHoveredNodeExpand=300,this.dropPlaceEnum=d.a,this.notificationTypeEnum=i.b}set precheckedNodeIdSet(e){this.checkedNodeSet=e}ngAfterContentInit(){this.cdr.detectChanges(),this.ready$.pipe(Object(s.a)(e=>!!e)).subscribe(e=>this.treeRendered.emit(!0))}ngOnInit(){this.inputNodes$.asObservable().pipe(Object(s.a)(e=>!!e),Object(l.a)()).subscribe(e=>{this.nodes.size&&(this.expandedNodeSet.clear(),this.saveExpandedNode(this.nodes)),this.nodes.clear(),e.forEach(e=>this.nodes.set(e.item.id,new B(e,this.expandedNodeSet))),this.nodes.forEach(e=>this.walkDynamicTreeNodes(e)),this.hasDraftChildrenSet.clear(),this.checkDraftChildren(this.nodes),this.cdr.detectChanges(),this.ready$.next(!0)})}expandTreeNodes(e=this.nodes){e.forEach(e=>{e.expanded=!0,this.expandTreeNodes(e.children)}),this.cdr.detectChanges()}expandTreeNodesById(e){this.flatDynamicNodes.forEach(t=>{e.includes(t.item.id)&&(t.expanded=!0)}),this.cdr.detectChanges()}collapseTreeNodes(e=this.nodes){e.forEach(e=>{e.expanded=!1,this.collapseTreeNodes(e.children)}),this.cdr.detectChanges()}walkDynamicTreeNodes(e){e instanceof B?(this.flatDynamicNodes.set(e.item.id,e),this.walkDynamicTreeNodes(e.children)):e.forEach(e=>{this.flatDynamicNodes.set(e.item.id,e),this.walkDynamicTreeNodes(e.children)})}onAddNode(e){e.expanded=!0,setTimeout(()=>this.cdr.detectChanges()),this.nodeAdded.emit(e.item.id)}onRemoveNode(e){this.nodeRemoved.emit(e)}saveExpandedNode(e){e instanceof Map?e.forEach(e=>{e.expanded&&this.expandedNodeSet.add(e.item.id)}):e instanceof Array&&(this.expandedNodeSet=new Set([...e.filter(e=>e.expanded).map(e=>e.item.id),...this.expandedNodeSet])),e.forEach(e=>this.saveExpandedNode(e.children))}checkDraftChildren(e){e instanceof Map?e.forEach(e=>{e.children.find(e=>0===e.item.id)&&this.hasDraftChildrenSet.add(e.item.id)}):e instanceof Array&&(this.hasDraftChildrenSet=new Set([...e.filter(e=>e.children.find(e=>0===e.item.id)).map(e=>e.item.id),...this.hasDraftChildrenSet])),e.forEach(e=>this.checkDraftChildren(e.children))}treeNodeHasDraftChildren(e){return e.children.filter(e=>0===e.item.id).length>0}setDraggedNode(e,t){this.draggedNode=t}unsetDraggedNode(){this.draggedNode=null}onDragOverRoot(e){this.dragOverRoot=!0,e.preventDefault()}onDragLeaveRoot(){this.dragOverRoot=!1}onDropToRoot(e){this.dragOverRoot=!1,this.nodeModified.emit({dropType:d.a.Root,draggedNode:this.draggedNode,targetNode:null}),this.onDragEnd(e)}onDragOver(e,t){e.preventDefault(),this.draggedNodeHoveredType=NaN,this.hoveredNode&&t===this.hoveredNode?Date.now()-this.draggedNodeHoveredSince>this.delayBeforeHoveredNodeExpand&&(t.expanded||(t.expanded=!0,this.cdr.detectChanges())):(this.hoveredNode=t,this.draggedNodeHoveredSince=(new Date).getTime());const n=e.offsetY/e.target.clientHeight;n>.15&&n<.85?this.draggedNodeHoveredType=this.dropPlaceEnum.Into:n<.15?this.draggedNodeHoveredType=this.dropPlaceEnum.Before:n>.85&&(this.draggedNodeHoveredType=this.dropPlaceEnum.After)}onDrop(e,t){t!==this.draggedNode&&(this.draggedNodeHoveredType===this.dropPlaceEnum.Into?this.canDropInto(this.draggedNode,t)?this.draggedNode.item.parentId===t.item.id?this.showNotification.emit({type:this.notificationTypeEnum.Error,message:"You try drop to parent"}):this.nodeModified.emit({dropType:d.a.Into,draggedNode:this.nodeConverter(this.draggedNode),targetNode:this.nodeConverter(t)}):this.showNotification.emit({type:this.notificationTypeEnum.Error,message:"Forbidden"}):this.draggedNodeHoveredType===this.dropPlaceEnum.Before&&this.canDropBefore(this.draggedNode,t)?this.nodeModified.emit({dropType:d.a.Before,draggedNode:this.nodeConverter(this.draggedNode),targetNode:this.nodeConverter(t)}):this.draggedNodeHoveredType===this.dropPlaceEnum.After&&this.canDropAfter(this.draggedNode,t)&&this.nodeModified.emit({dropType:d.a.After,draggedNode:this.nodeConverter(this.draggedNode),targetNode:this.nodeConverter(t)})),this.onDragEnd(e)}onDragStart(e,t){e.dataTransfer.setData("foo","bar")}onDragEnd(e){this.draggedNode=null,this.hoveredNode=null,this.draggedNodeHoveredSince=0,this.draggedNodeHoveredType=NaN,e.preventDefault()}nodeConverter(e){const t=new o.i;return t.children=e.children,t.item=e.item,t}verifyChildrenNode(e,t){return t.item.parentId!==e.item.id&&(!t.item.parentId||this.verifyChildrenNode(e,this.flatDynamicNodes.get(t.item.parentId)))}canDropInto(e,t){return!(!e||!t)&&e.item.parentId!==t.item.id&&this.verifyChildrenNode(e,t)}canDropAfter(e,t){return!(!e||!t)&&e.item.id!==t.item.id&&this.verifyChildrenNode(e,t)}canDropBefore(e,t){return!(!e||!t)&&e.item.id!==t.item.id&&this.verifyChildrenNode(e,t)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ChangeDetectorRef))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["m-dynamic-tree-map"]],contentQueries:function(e,t,n){if(1&e&&(r["\u0275\u0275contentQuery"](n,h,!0),r["\u0275\u0275contentQuery"](n,g,!0),r["\u0275\u0275contentQuery"](n,m,!0)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.addButtonTemplate=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.addParaButtonTemplate=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.nodeTitleTemplate=e.first)}},inputs:{inputNodes$:"inputNodes$",flatNodes:"flatNodes",dimmedNodeSet:"dimmedNodeSet",hiddenNodeSet:"hiddenNodeSet",canAdd:"canAdd",canRemove:"canRemove",showCheckboxes:"showCheckboxes",precheckedNodeIdSet:"precheckedNodeIdSet",canDrag:"canDrag"},outputs:{nodeAdded:"nodeAdded",nodeRemoved:"nodeRemoved",nodeModified:"nodeModified",showNotification:"showNotification",checkedNodeSetChange:"checkedNodeSetChange",treeRendered:"treeRendered"},decls:11,vars:3,consts:[["class","m-card-warning",4,"ngIf"],["class","drop-parent",3,"drop-parent-select","dragover","drop","dragleave",4,"ngIf"],["class","tree-list",4,"ngIf"],["noChild",""],["hasChild",""],["nodeItem",""],["defaultAddButton",""],[1,"m-card-warning"],[1,"drop-parent",3,"dragover","drop","dragleave"],[1,"drop-text"],[1,"tree-list"],[4,"ngFor","ngForOf"],["class","tree-list-item",4,"ngIf"],[1,"tree-list-item"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"item-node",3,"dragover","dragend","drop","dragstart"],["class","las cursor-pointer",3,"la-angle-right","la-angle-down","click",4,"ngIf"],["color","primary","class","mr-1",3,"indeterminate","checked","disabled","change",4,"ngIf"],["class","drag-handle las la-grip-lines",3,"mousedown","mouseup",4,"ngIf"],["class","las la-trash cursor-pointer red",3,"click",4,"ngIf"],[1,"las","cursor-pointer",3,"click"],["color","primary",1,"mr-1",3,"indeterminate","checked","disabled","change"],[1,"drag-handle","las","la-grip-lines",3,"mousedown","mouseup"],[1,"las","la-trash","cursor-pointer","red",3,"click"],["class","icon-button",3,"disabled","click",4,"ngIf"],[1,"icon-button",3,"disabled","click"],[1,"las","la-plus","cursor-pointer","blue","f-s-20"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,u,2,0,"div",0),r["\u0275\u0275template"](1,f,3,2,"div",1),r["\u0275\u0275template"](2,C,3,3,"ul",2),r["\u0275\u0275template"](3,y,1,4,"ng-template",null,3,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](5,w,2,5,"ng-template",null,4,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](7,F,7,25,"ng-template",null,5,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](9,R,1,1,"ng-template",null,6,r["\u0275\u0275templateRefExtractor"])),2&e&&(r["\u0275\u0275property"]("ngIf",!t.nodeTitleTemplate),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.draggedNode&&t.draggedNode.item.parentId),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.nodes&&t.nodes.size>0))},directives:[c.m,c.l,c.r,p.a],pipes:[c.g],styles:[".example-tree-progress-bar[_ngcontent-%COMP%]{margin-left:30px}ul[_ngcontent-%COMP%]{list-style-type:none}.las[_ngcontent-%COMP%]{font-size:20px}.item-node[_ngcontent-%COMP%]{height:32px;display:flex;align-items:center;border:2px solid transparent}input[type=text].default-disable[_ngcontent-%COMP%], input[type=text].default-disable[_ngcontent-%COMP%]:disabled{border:none;border-bottom:1px solid #ccc;background-color:hsla(0,0%,100%,.125)}"],changeDetection:0}),e})()},gfTr:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return u});var r=n("fXoL"),o=n("PqYM"),i=n("ofXK");const d=["fileSelector"];function a(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.dropZoneLabel)}}function s(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"input",9),r["\u0275\u0275listener"]("click",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).openFileSelector(t)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("value",e.browseBtnLabel),r["\u0275\u0275property"]("className",e.browseBtnClassName)}}function l(e,t){if(1&e&&(r["\u0275\u0275template"](0,a,2,1,"div",6),r["\u0275\u0275template"](1,s,2,2,"div",7)),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngIf",e.dropZoneLabel),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.showBrowseBtn)}}function c(e,t){}const p=function(e){return{openFileSelector:e}};class h{constructor(e,t){this.relativePath=e,this.fileEntry=t}}let g=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.TemplateRef))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","ngx-file-drop-content-tmp",""]]}),e})(),m=(()=>{class e{constructor(e,t){this.zone=e,this.renderer=t,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new r.EventEmitter,this.onFileOver=new r.EventEmitter,this.onFileLeave=new r.EventEmitter,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=e=>{this.fileSelector&&this.fileSelector.nativeElement&&this.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",e=>{this.globalDraggingInProgress=!0}),this.globalDragEndListener=this.renderer.listen("document","dragend",e=>{this.globalDraggingInProgress=!1})}get disabled(){return this._disabled}set disabled(e){this._disabled=null!=e&&""+e!="false"}ngOnDestroy(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}onDragOver(e){this.useDragEnter?this.preventAndStop(e):this.isDropzoneDisabled()||this.useDragEnter||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragEnter(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}onDragLeave(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))}dropFiles(e){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)){let t;e.dataTransfer.dropEffect="copy",t=e.dataTransfer.items?e.dataTransfer.items:e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t)}}uploadFiles(e){!this.isDropzoneDisabled()&&e.target&&(this.checkFiles(e.target.files||[]),this.resetFileInput())}checkFiles(e){for(let t=0;t<e.length;t++){const n=e[t];let r=null;if(this.canGetAsEntry(n)&&(r=n.webkitGetAsEntry()),r)if(r.isFile){const e=new h(r.name,r);this.addToQueue(e)}else r.isDirectory&&this.traverseFileTree(r,r.name);else if(n){const e={name:n.name,isDirectory:!1,isFile:!0,file:e=>{e(n)}},t=new h(e.name,e);this.addToQueue(t)}}this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(o.a)(200,200).subscribe(()=>{if(this.files.length>0&&0===this.numOfActiveReadEntries){const e=this.files;this.files=[],this.onFileDrop.emit(e)}})}traverseFileTree(e,t){if(e.isFile){const n=new h(t,e);this.files.push(n)}else{t+="/";const n=e.createReader();let r=[];const o=()=>{this.numOfActiveReadEntries++,n.readEntries(n=>{if(n.length)r=r.concat(n),o();else if(0===r.length){const n=new h(t,e);this.zone.run(()=>{this.addToQueue(n)})}else for(let e=0;e<r.length;e++)this.zone.run(()=>{this.traverseFileTree(r[e],t+r[e].name)});this.numOfActiveReadEntries--})};o()}}resetFileInput(){if(this.fileSelector&&this.fileSelector.nativeElement){const e=this.fileSelector.nativeElement,t=e.parentElement,n=this.getHelperFormElement(),r=this.getFileInputPlaceholderElement();t!==n&&(this.renderer.insertBefore(t,r,e),this.renderer.appendChild(n,e),n.reset(),this.renderer.insertBefore(t,e,r),this.renderer.removeChild(t,r))}}getHelperFormElement(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}getFileInputPlaceholderElement(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}canGetAsEntry(e){return!!e.webkitGetAsEntry}isDropzoneDisabled(){return this.globalDraggingInProgress||this.disabled}addToQueue(e){this.files.push(e)}preventAndStop(e){e.stopPropagation(),e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.NgZone),r["\u0275\u0275directiveInject"](r.Renderer2))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-file-drop"]],contentQueries:function(e,t,n){if(1&e&&r["\u0275\u0275contentQuery"](n,g,!0,r.TemplateRef),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.contentTemplate=e.first)}},viewQuery:function(e,t){if(1&e&&r["\u0275\u0275staticViewQuery"](d,!0),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.fileSelector=e.first)}},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:15,consts:[[3,"className","drop","dragover","dragenter","dragleave"],[3,"className"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"className","value","click"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275listener"]("drop",function(e){return t.dropFiles(e)})("dragover",function(e){return t.onDragOver(e)})("dragenter",function(e){return t.onDragEnter(e)})("dragleave",function(e){return t.onDragLeave(e)}),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"input",2,3),r["\u0275\u0275listener"]("change",function(e){return t.uploadFiles(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,l,2,2,"ng-template",null,4,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](6,c,0,0,"ng-template",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275reference"](5);r["\u0275\u0275classProp"]("ngx-file-drop__drop-zone--over",t.isDraggingOverDropZone),r["\u0275\u0275property"]("className",t.dropZoneClassName),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("className",t.contentClassName),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("accept",t.accept)("multiple",t.multiple),r["\u0275\u0275attribute"]("directory",t.directory||void 0)("webkitdirectory",t.directory||void 0)("mozdirectory",t.directory||void 0)("msdirectory",t.directory||void 0)("odirectory",t.directory||void 0),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngTemplateOutlet",t.contentTemplate||e)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](13,p,t.openFileSelector))}},directives:[i.r,i.m],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),e})(),u=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e,bootstrap:function(){return[m]}}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[i.c]]}),e})()}}]);