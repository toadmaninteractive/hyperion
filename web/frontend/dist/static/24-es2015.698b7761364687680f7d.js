(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"HwM/":function(e,t,n){"use strict";n.r(t),n.d(t,"SettingsModule",function(){return M});var i=n("ofXK"),s=n("3Pt+"),r=n("tyNb"),o=n("bTqV"),l=n("Wp6s"),a=n("bSwM"),d=n("kmnG"),m=n("NFeN"),p=n("qFsG"),c=n("QibW"),g=n("d3UM"),u=n("Qu3c"),h=n("PCNd"),S=n("XNiG"),f=n("2Vo4"),v=n("1G5W"),_=n("nYR2"),b=n("Y4+Y"),y=n("mbOZ"),E=n("H/DC"),x=n("fXoL");let w=(()=>{class e{transform(e,t){if(!("number"==typeof e&&e>0))return"invalid duration";let n=+e;const i=Math.floor(n/86400);n%=86400;const s=Math.floor(n/3600);n%=3600;const r=Math.floor(n/60),o=n%60;let l=i>0?i+" days ":"";return l+=s>0?s+" hours ":"",l+=r>0?r+" mins ":"",l+=o>0?o+" secs ":"",l}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=x["\u0275\u0275definePipe"]({name:"mPrettyDuration",type:e,pure:!0}),e})();const C=function(e){return{dimmed:e}};function D(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"form",15),x["\u0275\u0275pipe"](1,"async"),x["\u0275\u0275elementStart"](2,"fieldset",16),x["\u0275\u0275pipe"](3,"async"),x["\u0275\u0275elementStart"](4,"div",17),x["\u0275\u0275elementStart"](5,"div",0),x["\u0275\u0275elementStart"](6,"div",18),x["\u0275\u0275elementStart"](7,"div",19),x["\u0275\u0275elementStart"](8,"h3",20),x["\u0275\u0275text"](9,"Sessions"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](10,"div",21),x["\u0275\u0275elementStart"](11,"mat-form-field",22),x["\u0275\u0275elementStart"](12,"input",23),x["\u0275\u0275listener"]("ngModelChange",function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().settings.personnelSessionDuration=t}),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](13,"mat-hint",24),x["\u0275\u0275text"](14," Which is "),x["\u0275\u0275elementStart"](15,"strong"),x["\u0275\u0275text"](16),x["\u0275\u0275pipe"](17,"mPrettyDuration"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](18,"div",25),x["\u0275\u0275elementStart"](19,"div",26),x["\u0275\u0275elementStart"](20,"button",27),x["\u0275\u0275listener"]("click",function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().updateSettings()}),x["\u0275\u0275pipe"](21,"async"),x["\u0275\u0275text"](22," Update settings "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275text"](23,"\xa0 "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("ngClass",x["\u0275\u0275pureFunction1"](14,C,x["\u0275\u0275pipeBind1"](1,6,e.loading$))),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("disabled",x["\u0275\u0275pipeBind1"](3,8,e.loading$)),x["\u0275\u0275advance"](10),x["\u0275\u0275property"]("min",0)("ngModel",e.settings.personnelSessionDuration),x["\u0275\u0275advance"](4),x["\u0275\u0275textInterpolate"](x["\u0275\u0275pipeBind1"](17,10,e.settings.personnelSessionDuration)),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("disabled",x["\u0275\u0275pipeBind1"](21,12,e.loading$)||!e.settingsChanged()||!e.settingsValid())}}let I=(()=>{class e{constructor(e,t,n,i){this.router=e,this.cdr=t,this.hyperionSettingsService=n,this.notificationService=i}ngOnInit(){this.destroy$=new S.b,this.loading$=new f.a(!1),this.getSettings()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.loading$.complete()}isInitialized(){return!(!this.settings||!this.pristineSettings)}settingsChanged(){return!!this.isInitialized()&&+this.settings.personnelSessionDuration!==this.pristineSettings.personnelSessionDuration}settingsValid(){return!!this.isInitialized()&&+this.settings.personnelSessionDuration>0}getSettings(){this.loading$.next(!0),this.hyperionSettingsService.getSettings().pipe(Object(v.a)(this.destroy$),Object(_.a)(()=>this.loading$.next(!1))).subscribe(e=>{this.settings=e,this.pristineSettings=E.a.fromJson(e.toJson()),this.cdr.detectChanges()})}updateSettings(){if(!this.isInitialized())return;const e=new E.b;e.personnelSessionDuration=+this.settings.personnelSessionDuration!==this.pristineSettings.personnelSessionDuration?this.settings.personnelSessionDuration:null,this.loading$.next(!0),this.hyperionSettingsService.updateSettings(e).pipe(Object(v.a)(this.destroy$),Object(_.a)(()=>this.loading$.next(!1))).subscribe(e=>{e.result?this.notificationService.success("Settings updated"):this.notificationService.error("Settings not updated"),e.result&&(this.cdr.detectChanges(),this.getSettings())})}}return e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275directiveInject"](r.g),x["\u0275\u0275directiveInject"](x.ChangeDetectorRef),x["\u0275\u0275directiveInject"](y.a),x["\u0275\u0275directiveInject"](b.a))},e.\u0275cmp=x["\u0275\u0275defineComponent"]({type:e,selectors:[["m-settings"]],decls:16,vars:1,consts:[[1,"row"],[1,"col-lg-12"],[1,"m-portlet"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-icon"],[1,"la","la-gear"],[1,"m-portlet__head-text"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],["href","javascript:void(null);","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],["class","m-form m-form--fit",3,"ngClass",4,"ngIf"],[1,"m-form","m-form--fit",3,"ngClass"],[3,"disabled"],[1,"m-portlet__body"],[1,"col-md-6","col-sm-12","col-xs-12"],[1,"m-form__heading"],[1,"m-form__heading-title"],[1,"form-group","m-form__group"],[1,"example-full-width"],["type","number","required","","matInput","","name","personnelSessionDuration","placeholder","Personnel session duration",3,"min","ngModel","ngModelChange"],["align","start",1,"f-s-12","pt-1"],[1,"m-portlet__foot","m-portlet__no-border","m-portlet__foot--fit","m--align-right"],[1,"m-form__actions","m-form__actions--solid"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div",0),x["\u0275\u0275elementStart"](1,"div",1),x["\u0275\u0275elementStart"](2,"div",2),x["\u0275\u0275elementStart"](3,"div",3),x["\u0275\u0275elementStart"](4,"div",4),x["\u0275\u0275elementStart"](5,"div",5),x["\u0275\u0275elementStart"](6,"span",6),x["\u0275\u0275element"](7,"i",7),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](8,"h3",8),x["\u0275\u0275text"](9," Manage system settings "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](10,"div",9),x["\u0275\u0275elementStart"](11,"ul",10),x["\u0275\u0275elementStart"](12,"li",11),x["\u0275\u0275elementStart"](13,"a",12),x["\u0275\u0275listener"]("click",function(){return t.getSettings()}),x["\u0275\u0275element"](14,"i",13),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](15,D,24,16,"form",14),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e&&(x["\u0275\u0275advance"](15),x["\u0275\u0275property"]("ngIf",t.isInitialized()))},directives:[u.a,i.m,s.q,s.j,s.k,i.k,d.b,s.m,p.b,s.c,s.o,s.i,s.l,d.e,o.a],pipes:[i.b,w],styles:[""],changeDetection:0}),e})();var $=n("qebw");let M=(()=>{class e{}return e.\u0275mod=x["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=x["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,s.e,o.b,l.a,a.b,d.d,m.b,p.c,c.a,g.b,u.b,h.a,r.i.forChild([{path:"",component:I,canActivate:[$.a]}])]]}),e})()}}]);